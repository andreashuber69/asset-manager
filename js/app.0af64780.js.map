{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?7d57","webpack:///./src/assets/cryptocompare.png","webpack:///./src/model/Application.ts","webpack:///./src/App.vue?b46b","webpack:///./src/components/AboutDialog.vue?847c","webpack:///./src/components/AboutDialog.vue.ts","webpack:///./src/components/AboutDialog.vue.ts?19a7","webpack:///./src/components/AboutDialog.vue","webpack:///./src/components/AssetList.vue?6ed5","webpack:///./src/model/validation/schemas/WeightUnit.schema.ts","webpack:///./src/components/AssetEditor.vue?b64f","webpack:///./src/model/Input.ts","webpack:///./src/model/InputInfo.ts","webpack:///./src/model/PrimitiveInputInfo.ts","webpack:///./src/model/validation/ValidationError.ts","webpack:///./src/model/validation/Validator.ts","webpack:///./src/model/TextInputInfo.ts","webpack:///./src/model/AssetInputInfo.ts","webpack:///./src/model/SelectInputInfo.ts","webpack:///./src/model/CryptoWalletInputInfo.ts","webpack:///./src/model/AddressCryptoWalletInputInfo.ts","webpack:///./src/model/QueryError.ts","webpack:///./src/model/QueryCache.ts","webpack:///./src/model/validation/schemas/CryptoCompareResponse.schema.ts","webpack:///./src/model/CryptoCompareRequest.ts","webpack:///./src/model/QueryUtility.ts","webpack:///./src/model/Asset.ts","webpack:///./src/model/SingleAsset.ts","webpack:///./src/model/CryptoWallet.ts","webpack:///./src/model/RealCryptoWallet.ts","webpack:///./src/model/GenericAssetBundle.ts","webpack:///./src/model/SimpleCryptoWallet.ts","webpack:///./src/model/validation/schemas/AssetTypeName.schema.ts","webpack:///./src/model/validation/schemas/BlockchainBalanceResponse.schema.ts","webpack:///./src/model/BtcWallet.ts","webpack:///./src/model/BtgWallet.ts","webpack:///./src/model/validation/schemas/BlockcypherBalanceResponse.schema.ts","webpack:///./src/model/BlockcypherWallet.ts","webpack:///./src/model/DashWallet.ts","webpack:///./src/model/Erc20TokenWallet.ts","webpack:///./src/model/validation/schemas/DeletedAssets.schema.ts","webpack:///./src/model/validation/schemas/EthplorerGetAddressInfoResponse.schema.ts","webpack:///./src/model/Erc20TokensWalletBundle.ts","webpack:///./src/model/Erc20TokensWallet.ts","webpack:///./src/model/validation/schemas/BlockscoutBalanceResponse.schema.ts","webpack:///./src/model/EtcWallet.ts","webpack:///./src/model/EthWallet.ts","webpack:///./src/model/validation/schemas/QuandlResponse.schema.ts","webpack:///./src/model/QuandlRequest.ts","webpack:///./src/model/arrayOfAll.ts","webpack:///./src/model/PreciousMetalAsset.ts","webpack:///./src/model/GoldAsset.ts","webpack:///./src/model/LtcWallet.ts","webpack:///./src/model/ExchangeRate.ts","webpack:///./src/model/MiscAsset.ts","webpack:///./src/model/validation/schemas/CurrencyName.schema.ts","webpack:///./src/model/MiscAssetInputInfo.ts","webpack:///./src/model/PalladiumAsset.ts","webpack:///./src/model/PlatinumAsset.ts","webpack:///./src/model/PreciousMetalAssetInputInfo.ts","webpack:///./src/model/QuantityCryptoWalletInputInfo.ts","webpack:///./src/model/SilverAsset.ts","webpack:///./src/model/SimpleCryptoWalletInputInfo.ts","webpack:///./src/model/validation/schemas/IAddressCryptoWallet.schema.ts","webpack:///./src/model/validation/schemas/IMiscAsset.schema.ts","webpack:///./src/model/validation/schemas/IPreciousMetalAsset.schema.ts","webpack:///./src/model/validation/schemas/IQuantityCryptoWallet.schema.ts","webpack:///./src/model/validation/schemas/ISimpleCryptoWallet.schema.ts","webpack:///./src/model/XmrWallet.ts","webpack:///./src/model/validation/schemas/ZchainGetAccountResponse.schema.ts","webpack:///./src/model/ZecWallet.ts","webpack:///./src/model/ObjectConverter.ts","webpack:///./src/model/AssetEditorData.ts","webpack:///./src/model/AssetInput.ts","webpack:///./src/model/AssetProperties.ts","webpack:///./src/components/NoAssetInputInfo.ts","webpack:///./src/components/Select.vue?603b","webpack:///./src/components/ComponentBase.ts","webpack:///./src/components/ControlBase.ts","webpack:///./src/components/Select.vue.ts","webpack:///./src/components/Select.vue.ts?7961","webpack:///./src/components/Select.vue","webpack:///./src/components/TextArea.vue?1d6d","webpack:///./src/components/TextArea.vue.ts","webpack:///./src/components/TextArea.vue.ts?fe8f","webpack:///./src/components/TextArea.vue","webpack:///./src/components/TextField.vue?7de0","webpack:///./src/components/TextField.vue.ts","webpack:///./src/components/TextField.vue.ts?b116","webpack:///./src/components/TextField.vue","webpack:///./src/components/AssetEditor.vue.ts","webpack:///./src/components/AssetEditor.vue.ts?04aa","webpack:///./src/components/AssetEditor.vue","webpack:///./src/components/ColumnInfo.ts","webpack:///./src/components/Format.ts","webpack:///./src/components/AssetList.vue.ts","webpack:///./src/components/AssetList.vue.ts?fdb7","webpack:///./src/components/AssetList.vue","webpack:///./src/components/BrowserDialog.vue?ba44","webpack:///./src/components/BrowserDialog.vue.ts","webpack:///./src/components/BrowserDialog.vue.ts?09cb","webpack:///./src/components/BrowserDialog.vue","webpack:///./src/components/SaveAsDialog.vue?1fa0","webpack:///./src/components/SaveAsDialog.vue.ts","webpack:///./src/components/SaveAsDialog.vue.ts?6e38","webpack:///./src/components/SaveAsDialog.vue","webpack:///./src/model/AssetCollectionUtility.ts","webpack:///./src/model/AssetGroup.ts","webpack:///./src/model/Ordering.ts","webpack:///./src/model/TaskQueue.ts","webpack:///./src/model/AssetCollection.ts","webpack:///./src/model/Model.ts","webpack:///./src/model/validation/schemas/TaggedModel.schema.ts","webpack:///./src/model/ModelParser.ts","webpack:///./src/Parser.ts","webpack:///./src/LocalStorage.ts","webpack:///./src/App.vue.ts","webpack:///./src/App.vue.ts?8fb2","webpack:///./src/App.vue","webpack:///./src/plugins/vuetify.ts","webpack:///./src/app-main.ts","webpack:///./src/assets/bitcoingold.png","webpack:///./src/App.vue?8830","webpack:///./src/assets/background.png","webpack:///./src/assets/blockcypher.svg","webpack:///./src/assets/blockchain.svg","webpack:///./src/components/AssetList.vue?0d90","webpack:///./src/assets/blockscout.svg","webpack:///./src/assets/ethplorer.png","webpack:///./src/Browser.ts","webpack:///./src/main.ts","webpack:///./src/assets/quandl.svg"],"names":["i","chunkIds","length","deferredModules","j","deferredModule","enumerable","get","getter","value","key","bind","module","Object","prototype","hasOwnProperty","call","object","property","jsonpArray","webpackJsonpCallback","exports","name","Application","packageName","split","map","c","toUpperCase","substr","join","version","_vm","this","_h","$createElement","_c","_self","attrs","model","callback","$$v","isDrawerVisible","expression","on","onNewClicked","_v","onOpenClicked","ref","staticStyle","fileExtension","onFileInputChanged","onSaveClicked","onSaveAsClicked","onAboutClicked","$event","stopPropagation","staticClass","_s","title","$refs","assetList","onAdd","onRefreshClicked","scopedSlots","_u","fn","_g","groupBy","_l","newGroupBy","currency","newCurrency","style","staticRenderFns","isOpen","Date","now","getUTCFullYear","userAgent","desktopVersion","includes","window","navigator","showDialog","prefix","start","indexOf","substring","AboutDialog","component","VBtn","VCard","VCardActions","VCardText","VCardTitle","VContainer","VDialog","VFlex","VImg","VLayout","VSpacer","WeightUnit","directives","rawName","headers","options","undefined","checkedValue","assets","grandTotalValue","grouped","expand","header","text","item","isExpandable","isExpanded","_e","notes","getPrefix","format","unitValueHint","quantityHint","onEdit","onDelete","totalColumnCount","proxy","grandTotalLabelColumnCount","isVisible","typeInputInfo","type","assetInfo","data","nativeOn","onCancelClicked","isComposite","input","props","label","hint","isPresent","isRequired","validate","strict","propertyName","InputUtility","validatePrimitive","ctor","Error","definedInput","validateContent","InputInfo","message","setPrototypeOf","ValidationError","primitiveSchemaNames","fromJson","json","Validator","fromData","JSON","parse","isSchemaName","validationResult","console","log","stringify","isPrimitiveSchemaName","assign","schemaName","ajv","getSchemaKeyRef","errorsText","getSchema","getPrimitiveSchema","definitions","createAjv","result","multipleOfPrecision","addSchema","customSchemaKey","forEach","toLowerCase","getValue","isNumber","valueResult","validateValue","min","max","step","Number","parseFloat","includeRelations","validateComposite","singleResult","validateRelations","params","SelectInputInfo","getDefaults","items","enumSchemaNames","reduce","p","description","location","weight","weightUnit","fineness","valueCurrency","createAsset","parent","quantityDecimals","CryptoWalletInputInfo","assertUnreachable","parameters","quantity","address","addressHint","QueryError","fetch","query","responseCtor","getErrorMessage","QueryCache","cacheResult","fetchParseValidateAndApprove","fetchAndParse","clear","cache","getResponse","set","fetchParseAndValidate","response","errorMessage","e","tryFetch","responseText","Map","coin","invert","execute","CryptoCompareResponse","price","USD","status","NaN","Asset","nextKey","unitValueHintImpl","multiply","unitValueUsd","exchangeRate","unitValue","totalValue","queryData","Promise","queryUnitValueUsd","bundle","reject","factor1","factor2","currencySymbol","displayDecimals","queryQuantity","getProperties","RealCryptoWallet","getPropertiesImpl","resolve","unit","asset","deleteAsset","index","splice","SimpleCryptoWallet","Bundle","toJSON","primaryAsset","silver","palladium","platinum","gold","bitcoin","monero","litecoin","ethereumClassic","ethereum","erc20Tokens","bitcoinGold","dash","zcash","misc","assetTypeNames","BtcWallet","QuantityRequest","BlockchainRequest","addresses","NestedBCRequest","getFinalBalance","BlockchainBalanceResponse","r","reason","finalBalance","transactionCount","balances","keys","k","filter","v","b","addBalance","isNaN","final_balance","n_tx","add","NestedQuantityRequest","delay","fromBase58","addChain","derive","milliseconds","setTimeout","getBatch","node","offset","Array","batchLength","getAddress","unusedAddressesToCheck","minUnusedAddressesToCheck","batch","url","BlockcypherBalanceResponse","balance","editable","Erc20TokenWallet","erc20Wallet","deletedAssets","DeletedAssets","push","Erc20TokensWalletBundle","getTokens","EthplorerGetAddressInfoResponse","error","tokens","token","addTokenWallet","noTokenBalance","toString","tokenInfo","decimals","symbol","info","rate","BlockscoutBalanceResponse","parseInt","isFinite","ETH","path","QuandlResponse","dataset","arrayOfAll","array","weightUnitNames","quandlPath","pureGramsPerUnit","PreciousMetalAsset","getUnit","toLocaleString","unitFormatOptions","maximumFractionDigits","minimumFractionDigits","useGrouping","request","ExchangeRate","currencyMap","MiscAsset","currencyNames","QuantityCryptoWalletInputInfo","SimpleCryptoWalletInputInfo","isUndefined","addressCryptoWalletTypeNames","miscAssetTypeNames","preciousMetalAssetTypeNames","quantityCryptoWalletTypeNames","simpleCryptoWalletTypeNames","XmrWallet","ZchainGetAccountResponse","btcHint","ltcHint","etcHint","ethHint","erc20Hint","btgHint","dashHint","zecHint","convert","rawObject","convertPreciousMetalObject","convertSimpleCryptoObject","convertAddressCryptoObject","convertQuantityCryptoObject","convertMiscObject","ObjectConverter","is","infos","types","AssetEditorData","getType","getDescription","getLocation","getWeight","getWeightUnit","getFineness","getValueCurrency","getQuantity","getNotes","isPreciousMetalAsset","isMiscAsset","isType","rawAsset","AssetProperties","getPreciousMetalProperties","getSimpleCryptoWalletProperties","getAddressCryptoWalletProperties","getQuantityCryptoWalletProperties","getMiscAssetProperties","large","propertyValue","$emit","getControl","primitiveInputInfo","checkedProperty","checkedInfo","Select","VSelect","TextArea","VTextarea","TextField","VTextField","isExistingAsset","AssetEditor","isValid","close","Boolean","getAssetInfo","editableAsset","form","reset","components","VForm","getTotalCount","optionalCount","ColumnInfo","requiredCount","getAllNames","groupBys","maxOptionalCount","num","Format","numericColumnNames","optionalColumnCount","AssetList","allColumnNames","ordering","visibleColumnNames","getHeaders","h","sortBy","sort","by","sortDesc","descending","columnName","maxPrefix","maxPrefixes","valueFormatted","Math","trunc","prefixWithoutSign","assetEditor","newAsset","changedAsset","replace","mounted","timer","setInterval","beforeDestroy","clearInterval","sortable","capitalize","str","formatZeroes","longest","hasNegativeValues","current","numToFormat","abs","adjustTableColumnCount","$nextTick","onRendered","element","$el","offsetLeft","offsetWidth","VDataTable","VIcon","VList","VListItem","VListItemTitle","VMenu","Resize","applicationTitle","dontShowDialog","BrowserDialog","isUntestedBrowser","localStorage","getItem","dontShowBrowserDialogName","setItem","test","VCheckbox","preventDefault","nameInfo","SaveAsDialog","groups","l","AssetCollectionUtility","compare","group","left","right","compareImpl","leftProperty","rightProperty","coalesce","a","s","AssetGroup","addend1","addend2","getProperty","previous","allGroupBys","onGroupChanged","onSortChanged","groupByIndex","Ordering","getIndex","sortImpl","capitalizeGroupBys","setGroupBy","findIndex","capitalizeGroupBy","queue","executeTask","executeAfterPrevious","idle","createTask","taskQueue","bundles","update","notifyChanged","oldAsset","queryBundleData","id","updateImpl","newBundles","updateGroups","promises","AssetCollection","size","waitForResponses","delayId","MAX_SAFE_INTEGER","has","race","values","newGroups","getGroups","newGroup","existingGroup","find","g","addGroups","groupName","groupAssets","currencyImpl","currencies","wasSavedToFile","hasUnsavedChangesImpl","hasUnsavedChanges","createBundles","onChanged","onCurrencyChanged","toJsonString","onCurrencyChangedImpl","ModelParser","parseBundles","TaggedModel","createBundle","rawBundle","alert","load","localStorageKey","sessionStorage","LocalStorage","sessionLocalStorageKey","loadExistingSession","loadNewSession","save","saveImpl","openNewWindow","URL","pathname","origin","searchParams","append","emptyModelLocalStorageKey","sessionForceLoadFromLocalStorageKey","open","href","performance","navigation","TYPE_RELOAD","loadModel","oldKeys","getOldKeys","oldKey","isEmpty","trySaveToLocalStorage","removeItem","uniqueNumber","random","isSafeInteger","uniqueKey","oldKeyNumber","initModel","addEventListener","App","fileInput","click","onFileInputChangedImpl","write","saveAsDialog","newName","aboutDialog","defaultGroupByLabels","groupByLabels","rawGroupBy","read","blob","reader","FileReader","onload","onerror","readAsText","document","files","file","endsWith","Blob","msSaveBlob","fileName","elem","createElement","createObjectURL","download","body","appendChild","removeChild","VApp","VAppBar","VAppBarNavIcon","VContent","VListItemContent","VListItemIcon","VNavigationDrawer","VToolbarTitle","VToolbar","use","icons","iconfont","config","productionTip","vuetify","render","$mount","browserName","browserVersion","engineName","getInfo","uaParser","browser","major","parsedMajor","isCompatible","search","URLSearchParams","appElement","getElementById","innerHTML"],"mappings":"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","file":"js/app.0af64780.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/net-worth/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","module.exports = __webpack_public_path__ + \"img/cryptocompare.6eae0308.png\";","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport packageJson from \"../../package.json\";\n\nexport class Application {\n    public static get packageName() {\n        return packageJson.name;\n    }\n\n    public static get title() {\n        return Application.packageName.split(\"-\").map((c) => `${c[0].toUpperCase()}${c.substr(1)}`).join(\" \");\n    }\n\n    public static get version() {\n        return packageJson.version;\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',[_c('v-navigation-drawer',{attrs:{\"app\":\"\",\"dark\":\"\",\"temporary\":\"\"},model:{value:(_vm.isDrawerVisible),callback:function ($$v) {_vm.isDrawerVisible=$$v},expression:\"isDrawerVisible\"}},[_c('v-list',{attrs:{\"dense\":\"\",\"nav\":\"\"}},[_c('v-list-item',{attrs:{\"link\":\"\"},on:{\"click\":_vm.onNewClicked}},[_c('v-list-item-icon',[_c('v-icon',[_vm._v(\"note_add\")])],1),_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(\"New\")])],1)],1),_c('v-list-item',{attrs:{\"link\":\"\"},on:{\"click\":_vm.onOpenClicked}},[_c('v-list-item-icon',[_c('v-icon',[_vm._v(\"open_in_browser\")])],1),_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(\"Open...\")]),_c('input',{ref:\"fileInput\",staticStyle:{\"display\":\"none\"},attrs:{\"type\":\"file\",\"accept\":_vm.model.fileExtension},on:{\"change\":_vm.onFileInputChanged}})],1)],1),_c('v-list-item',{attrs:{\"link\":\"\"},on:{\"click\":_vm.onSaveClicked}},[_c('v-list-item-icon',[_c('v-icon',[_vm._v(\"save\")])],1),_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(\"Save\")])],1)],1),_c('v-list-item',{attrs:{\"link\":\"\"},on:{\"click\":_vm.onSaveAsClicked}},[_c('v-list-item-icon',[_c('v-icon',[_vm._v(\"save\")])],1),_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(\"Save As...\")])],1)],1),_c('v-list-item',{attrs:{\"link\":\"\"},on:{\"click\":_vm.onAboutClicked}},[_c('v-list-item-icon',[_c('v-icon',[_vm._v(\"help\")])],1),_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(\"About\")])],1)],1)],1)],1),_c('v-app-bar',{attrs:{\"app\":\"\",\"dark\":\"\",\"color\":\"primary\"}},[_c('v-app-bar-nav-icon',{attrs:{\"title\":\"Open menu\"},on:{\"click\":function($event){$event.stopPropagation();_vm.isDrawerVisible = !_vm.isDrawerVisible}}}),_c('v-toolbar-title',{staticClass:\"hidden-xs-only\"},[_c('v-icon',[_vm._v(\"account_balance_wallet\")]),_c('span',{staticClass:\"application-title\"},[_vm._v(\" \"+_vm._s(_vm.model.title))])],1),_c('v-spacer'),_c('v-btn',{attrs:{\"icon\":\"\",\"title\":\"Add new asset\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.$refs.assetList.onAdd($event)}}},[_c('v-icon',[_vm._v(\"add\")])],1),_c('v-btn',{attrs:{\"icon\":\"\",\"title\":\"Refresh\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.onRefreshClicked($event)}}},[_c('v-icon',[_vm._v(\"refresh\")])],1),_c('v-menu',{attrs:{\"max-height\":\"300px\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('v-btn',_vm._g({attrs:{\"text\":\"\",\"title\":\"Change grouping\"}},on),[_vm._v(\" \"+_vm._s(_vm.groupBy)+\" \"),_c('v-icon',{attrs:{\"right\":\"\"}},[_vm._v(\"arrow_drop_down\")])],1)]}}])},[_c('v-list',_vm._l((_vm.groupBys),function(newGroupBy){return _c('v-list-item',{key:newGroupBy,on:{\"click\":function($event){_vm.groupBy = newGroupBy}}},[_c('v-list-item-title',[_vm._v(_vm._s(newGroupBy))])],1)}),1)],1),_c('v-menu',{attrs:{\"max-height\":\"300px\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('v-btn',_vm._g({attrs:{\"text\":\"\",\"title\":\"Change valuation currency\"}},on),[_vm._v(\" \"+_vm._s(_vm.model.currency)+\" \"),_c('v-icon',{attrs:{\"right\":\"\"}},[_vm._v(\"arrow_drop_down\")])],1)]}}])},[_c('v-list',_vm._l((_vm.model.currencies),function(newCurrency){return _c('v-list-item',{key:newCurrency,on:{\"click\":function($event){_vm.model.currency = newCurrency}}},[_c('v-list-item-title',[_vm._v(_vm._s(newCurrency))])],1)}),1)],1)],1),_c('v-content',{style:({\n    'background-image': (\"url(\" + (require('./assets/background.png')) + \")\"),\n    'background-repeat': 'repeat'\n  })},[_c('v-container',[_c('v-layout',{attrs:{\"justify-center\":\"\"}},[_c('BrowserDialog'),_c('AssetList',{ref:\"assetList\",attrs:{\"value\":_vm.model}}),_c('SaveAsDialog',{ref:\"saveAsDialog\"}),_c('AboutDialog',{ref:\"aboutDialog\"})],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-dialog',{attrs:{\"width\":\"960px\"},model:{value:(_vm.isOpen),callback:function ($$v) {_vm.isOpen=$$v},expression:\"isOpen\"}},[_c('v-card',[_c('v-card-title',{staticClass:\"headline\"},[_vm._v(_vm._s(_vm.title))]),_c('v-card-text',[_c('v-container',{attrs:{\"grid-list-md\":\"\"}},[_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('v-card',{attrs:{\"flat\":\"\"}},[_c('v-card-text',{staticClass:\"text-center px-0\"},[_vm._v(\" Copyright © 2018-\"+_vm._s(new Date(Date.now()).getUTCFullYear())+\" Andreas Huber Dönni \")])],1)],1),_c('v-flex',{attrs:{\"xs12\":\"\",\"sm4\":\"\"}},[_c('v-btn',{staticClass:\"ma-0\",attrs:{\"href\":(\"https://github.com/andreashuber69/\" + _vm.packageName + \"/blob/master/README.md#--\"),\"target\":\"_blank\",\"color\":\"primary\",\"block\":\"\",\"text\":\"\"}},[_vm._v(\" Documentation \")])],1),_c('v-flex',{attrs:{\"xs12\":\"\",\"sm4\":\"\"}},[_c('v-btn',{staticClass:\"ma-0\",attrs:{\"href\":(\"https://github.com/andreashuber69/\" + _vm.packageName + \"/issues\"),\"target\":\"_blank\",\"color\":\"primary\",\"block\":\"\",\"text\":\"\"}},[_vm._v(\" Issues \")])],1),_c('v-flex',{attrs:{\"xs12\":\"\",\"sm4\":\"\"}},[_c('v-btn',{staticClass:\"ma-0\",attrs:{\"href\":(\"https://raw.githubusercontent.com/andreashuber69/\" + _vm.packageName + \"/master/LICENSE\"),\"target\":\"_blank\",\"color\":\"primary\",\"block\":\"\",\"text\":\"\"}},[_vm._v(\" License \")])],1),_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('v-card',{attrs:{\"flat\":\"\"}},[_c('v-card-text',{staticClass:\"text-center px-0\"},[_vm._v(\" This application would not work without the help of the following data providers, who generously offer their services free of charge: \")])],1)],1),_c('v-flex',{attrs:{\"xs12\":\"\",\"sm6\":\"\",\"md4\":\"\"}},[_c('v-btn',{staticClass:\"ma-0\",attrs:{\"href\":\"https://cryptocompare.com\",\"target\":\"_blank\",\"block\":\"\",\"text\":\"\"}},[_c('v-img',{attrs:{\"src\":require('@/assets/cryptocompare.png'),\"max-width\":\"200\",\"height\":\"36\",\"contain\":\"\"}})],1)],1),_c('v-flex',{attrs:{\"xs12\":\"\",\"sm6\":\"\",\"md4\":\"\"}},[_c('v-btn',{staticClass:\"ma-0\",attrs:{\"href\":\"https://blockchain.info\",\"target\":\"_blank\",\"block\":\"\",\"text\":\"\"}},[_c('v-img',{attrs:{\"src\":require('@/assets/blockchain.svg'),\"max-width\":\"200\",\"height\":\"36\",\"contain\":\"\"}})],1)],1),_c('v-flex',{attrs:{\"xs12\":\"\",\"sm6\":\"\",\"md4\":\"\"}},[_c('v-btn',{staticClass:\"ma-0\",attrs:{\"href\":\"https://blockcypher.com\",\"target\":\"_blank\",\"block\":\"\",\"text\":\"\"}},[_c('v-img',{attrs:{\"src\":require('@/assets/blockcypher.svg'),\"max-width\":\"200\",\"height\":\"36\",\"contain\":\"\"}})],1)],1),_c('v-flex',{attrs:{\"xs12\":\"\",\"sm6\":\"\",\"md4\":\"\"}},[_c('v-btn',{staticClass:\"ma-0\",attrs:{\"href\":\"https://blockscout.com/etc/mainnet\",\"target\":\"_blank\",\"block\":\"\",\"text\":\"\"}},[_c('v-img',{attrs:{\"src\":require('@/assets/blockscout.svg'),\"max-width\":\"36\",\"height\":\"36\",\"contain\":\"\"}}),_c('span',[_vm._v(\"blockscout.com\")])],1)],1),_c('v-flex',{attrs:{\"xs12\":\"\",\"sm6\":\"\",\"md4\":\"\"}},[_c('v-btn',{staticClass:\"ma-0\",attrs:{\"href\":\"https://ethplorer.io\",\"target\":\"_blank\",\"block\":\"\",\"text\":\"\"}},[_c('v-img',{attrs:{\"src\":require('@/assets/ethplorer.png'),\"max-width\":\"200\",\"height\":\"36\",\"contain\":\"\"}})],1)],1),_c('v-flex',{attrs:{\"xs12\":\"\",\"sm6\":\"\",\"md4\":\"\"}},[_c('v-btn',{staticClass:\"ma-0\",attrs:{\"href\":\"https://explorer.bitcoingold.org\",\"target\":\"_blank\",\"block\":\"\",\"text\":\"\"}},[_c('v-img',{attrs:{\"src\":require('@/assets/bitcoingold.png'),\"max-width\":\"200\",\"height\":\"36\",\"contain\":\"\"}})],1)],1),_c('v-flex',{attrs:{\"xs12\":\"\",\"sm6\":\"\",\"md4\":\"\"}},[_c('v-btn',{staticClass:\"ma-0\",attrs:{\"href\":\"https://zcha.in\",\"target\":\"_blank\",\"block\":\"\",\"text\":\"\"}},[_vm._v(\" ZCHAIN \")])],1),_c('v-flex',{attrs:{\"xs12\":\"\",\"sm6\":\"\",\"md4\":\"\"}},[_c('v-btn',{staticClass:\"ma-0\",attrs:{\"href\":\"https://quandl.com\",\"target\":\"_blank\",\"block\":\"\",\"text\":\"\"}},[_c('v-img',{attrs:{\"src\":require('@/assets/quandl.svg'),\"max-width\":\"200\",\"height\":\"36\",\"contain\":\"\"}})],1)],1),_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('v-card',{attrs:{\"flat\":\"\"}},[_c('v-card-text',{staticClass:\"caption text-center px-0\"},[_vm._v(_vm._s(_vm.userAgent))])],1)],1)],1)],1)],1),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"primary\"},on:{\"click\":function($event){_vm.isOpen = false}}},[_vm._v(\"Close\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { Component, Vue } from \"vue-property-decorator\";\n\nimport { Application } from \"../model/Application\";\n\n@Component\n/** Implements the About dialog. */\n// eslint-disable-next-line import/no-default-export\nexport default class AboutDialog extends Vue {\n    public isOpen = false;\n\n    public get title() {\n        return `${Application.title} v${Application.version}${this.desktopVersion}`;\n    }\n\n    public get packageName() {\n        return Application.packageName + (this.userAgent.includes(\"Electron\") ? \"-desktop\" : \"\");\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    public get userAgent() {\n        return window.navigator.userAgent;\n    }\n\n    public showDialog() {\n        this.isOpen = true;\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    // eslint-disable-next-line class-methods-use-this\n    private get desktopVersion() {\n        const { userAgent } = window.navigator;\n        const prefix = `${Application.packageName}/`;\n        const start = userAgent.indexOf(prefix) + prefix.length;\n\n        return start >= prefix.length ? ` (Desktop v${userAgent.substring(start, userAgent.indexOf(\" \", start))})` : \"\";\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!./AboutDialog.vue.ts?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!./AboutDialog.vue.ts?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./AboutDialog.vue?vue&type=template&id=707b1964&scoped=true&\"\nimport script from \"./AboutDialog.vue.ts?vue&type=script&lang=ts&\"\nexport * from \"./AboutDialog.vue.ts?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"707b1964\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VFlex } from 'vuetify/lib/components/VGrid';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VLayout } from 'vuetify/lib/components/VGrid';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardText,VCardTitle,VContainer,VDialog,VFlex,VImg,VLayout,VSpacer})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-layout',{attrs:{\"row\":\"\",\"justify-center\":\"\"}},[_c('AssetEditor',{ref:\"editor\"})],1),_c('v-data-table',{directives:[{name:\"resize\",rawName:\"v-resize\",value:(_vm.adjustTableColumnCount),expression:\"adjustTableColumnCount\"}],staticClass:\"elevation-1\",attrs:{\"headers\":_vm.headers,\"options\":_vm.options,\"loading\":_vm.checkedValue.assets.grandTotalValue === undefined,\"items\":_vm.checkedValue.assets.grouped,\"item-key\":\"key\",\"server-items-length\":_vm.checkedValue.assets.grouped.length,\"hide-default-footer\":\"\",\"mobile-breakpoint\":0},on:{\"update:options\":function($event){_vm.options=$event},\"click:row\":function($event){return $event.expand()}},scopedSlots:_vm._u([{key:\"header.unitValue\",fn:function(ref){\nvar header = ref.header;\nreturn [_vm._v(\" \"+_vm._s(header.text)),_c('br'),_vm._v(\"(\"+_vm._s(_vm.checkedValue.currency)+\") \")]}},{key:\"header.totalValue\",fn:function(ref){\nvar header = ref.header;\nreturn [_vm._v(\" \"+_vm._s(header.text)),_c('br'),_vm._v(\"(\"+_vm._s(_vm.checkedValue.currency)+\") \")]}},{key:\"item.expand\",fn:function(ref){\nvar item = ref.item;\nreturn [(item.isExpandable && !item.isExpanded)?_c('v-icon',[_vm._v(\"expand_more\")]):_vm._e(),(item.isExpandable && item.isExpanded)?_c('v-icon',[_vm._v(\"expand_less\")]):_vm._e()]}},{key:\"item.description\",fn:function(ref){\nvar item = ref.item;\nvar value = ref.value;\nreturn [_c('span',{attrs:{\"title\":item.notes}},[_vm._v(_vm._s(value))])]}},{key:\"item.fineness\",fn:function(ref){\nvar header = ref.header;\nvar value = ref.value;\nreturn [_c('span',{staticClass:\"prefix\"},[_vm._v(_vm._s(_vm.getPrefix(header.value, value)))]),_c('span',[_vm._v(_vm._s(_vm.format(value, 6)))])]}},{key:\"item.unitValue\",fn:function(ref){\nvar item = ref.item;\nvar header = ref.header;\nvar value = ref.value;\nreturn [_c('span',{staticClass:\"prefix\"},[_vm._v(_vm._s(_vm.getPrefix(header.value, value)))]),_c('span',{attrs:{\"title\":item.unitValueHint}},[_vm._v(_vm._s(_vm.format(value, 2, 2)))])]}},{key:\"item.quantity\",fn:function(ref){\nvar item = ref.item;\nvar header = ref.header;\nvar value = ref.value;\nreturn [_c('span',{staticClass:\"prefix\"},[_vm._v(_vm._s(_vm.getPrefix(header.value, value)))]),_c('span',{attrs:{\"title\":item.quantityHint}},[_vm._v(_vm._s(_vm.format(value, 6)))])]}},{key:\"item.totalValue\",fn:function(ref){\nvar header = ref.header;\nvar value = ref.value;\nreturn [_c('span',{staticClass:\"prefix total\"},[_vm._v(_vm._s(_vm.getPrefix(header.value, value)))]),_c('span',{staticClass:\"total\"},[_vm._v(_vm._s(_vm.format(value, 2, 2)))])]}},{key:\"item.percent\",fn:function(ref){\nvar header = ref.header;\nvar value = ref.value;\nreturn [_c('span',{staticClass:\"prefix total\"},[_vm._v(_vm._s(_vm.getPrefix(header.value, value)))]),_c('span',{staticClass:\"total\"},[_vm._v(_vm._s(_vm.format(value, 1, 1)))])]}},{key:\"item.more\",fn:function(ref){\nvar item = ref.item;\nreturn [(item.hasActions)?_c('v-menu',{scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('v-btn',_vm._g({attrs:{\"icon\":\"\"}},on),[_c('v-icon',[_vm._v(\"more_vert\")])],1)]}}],null,true)},[_c('v-list',[_c('v-list-item',{on:{\"click\":function($event){return _vm.onEdit(item)}}},[_c('v-list-item-title',[_vm._v(\"Edit\")])],1),_c('v-list-item',{on:{\"click\":function($event){return _vm.onDelete(item)}}},[_c('v-list-item-title',[_vm._v(\"Delete\")])],1)],1)],1):_vm._e()]}},{key:\"body.prepend\",fn:function(){return [(_vm.checkedValue.assets.grouped.length === 0)?_c('tr',[_c('td',{staticClass:\"no-data\",attrs:{\"colspan\":_vm.totalColumnCount}},[_vm._v(\" No assets, yet. Add new ones with the \"),_c('strong',[_vm._v(\"+\")]),_vm._v(\" button (top right) or load existing assets with \"),_c('strong',[_vm._v(\"Open...\")]),_vm._v(\" in the menu (top left). \")])]):_vm._e()]},proxy:true},{key:\"body.append\",fn:function(){return [_c('tr',[_c('td',{staticClass:\"total\",attrs:{\"colspan\":_vm.grandTotalLabelColumnCount}},[_vm._v(\"Grand Total\")]),(_vm.isVisible('totalValue'))?_c('td',[_c('span',{staticClass:\"prefix total\"},[_vm._v(_vm._s(_vm.getPrefix('totalValue', _vm.grandTotalValue)))]),_c('span',{staticClass:\"total\"},[_vm._v(_vm._s(_vm.format(_vm.grandTotalValue, 2, 2)))])]):_vm._e(),_c('td',[_c('span',{staticClass:\"prefix total\"},[_vm._v(_vm._s(_vm.getPrefix('percent', 100)))]),_c('span',{staticClass:\"total\"},[_vm._v(\"100.0\")])]),_c('td')])]},proxy:true}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { arrayOfAll } from \"../../arrayOfAll\";\n\n/** Provides the conversion factors between the unit gram and other weight units. */\nexport enum WeightUnit {\n    g = 1,\n    kg = 1000,\n    gr = 0.06479891, // https://en.wikipedia.org/wiki/Grain_(unit)\n    \"t oz\" = gr * 480, // https://en.wikipedia.org/wiki/Ounce\n    oz = gr * 437.5, // https://en.wikipedia.org/wiki/Ounce\n}\n\nexport type WeightUnitName = keyof typeof WeightUnit;\n\n/**\n * Enumerates the weight units supported by the application.\n *\n * @description While it's easy to get the names of an enum in a string[] it seems impossible to get them in a literal\n * types tuple like this one, which is why we need to repeat them. [[arrayOfAll]] at least ensures that all names are\n * present and that they're written correctly.\n */\nexport const weightUnitNames = arrayOfAll<WeightUnitName>()(\"g\", \"kg\", \"gr\", \"t oz\", \"oz\");\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-dialog',{attrs:{\"persistent\":\"\",\"max-width\":\"960px\"},model:{value:(_vm.isOpen),callback:function ($$v) {_vm.isOpen=$$v},expression:\"isOpen\"}},[_c('v-card',[_c('v-card-title',{staticClass:\"headline\"},[_vm._v(_vm._s(_vm.title))]),_c('v-card-text',[_c('v-form',{ref:\"form\"},[_c('v-container',{attrs:{\"grid-list-md\":\"\"}},[_c('v-layout',{attrs:{\"wrap\":\"\"}},[_c('Select',{attrs:{\"large\":\"true\",\"info\":_vm.typeInputInfo},model:{value:(_vm.type),callback:function ($$v) {_vm.type=$$v},expression:\"type\"}}),_c('TextField',{attrs:{\"info\":_vm.assetInfo,\"property\":\"description\"},model:{value:(_vm.data),callback:function ($$v) {_vm.data=$$v},expression:\"data\"}}),_c('TextField',{attrs:{\"info\":_vm.assetInfo,\"property\":\"location\"},model:{value:(_vm.data),callback:function ($$v) {_vm.data=$$v},expression:\"data\"}}),_c('TextField',{attrs:{\"info\":_vm.assetInfo,\"property\":\"address\"},model:{value:(_vm.data),callback:function ($$v) {_vm.data=$$v},expression:\"data\"}}),_c('TextField',{attrs:{\"info\":_vm.assetInfo,\"property\":\"weight\"},model:{value:(_vm.data),callback:function ($$v) {_vm.data=$$v},expression:\"data\"}}),_c('Select',{attrs:{\"info\":_vm.assetInfo,\"property\":\"weightUnit\"},model:{value:(_vm.data),callback:function ($$v) {_vm.data=$$v},expression:\"data\"}}),_c('TextField',{attrs:{\"info\":_vm.assetInfo,\"property\":\"fineness\"},model:{value:(_vm.data),callback:function ($$v) {_vm.data=$$v},expression:\"data\"}}),_c('TextField',{attrs:{\"info\":_vm.assetInfo,\"property\":\"value\"},model:{value:(_vm.data),callback:function ($$v) {_vm.data=$$v},expression:\"data\"}}),_c('Select',{attrs:{\"info\":_vm.assetInfo,\"property\":\"valueCurrency\"},model:{value:(_vm.data),callback:function ($$v) {_vm.data=$$v},expression:\"data\"}}),_c('TextField',{attrs:{\"info\":_vm.assetInfo,\"property\":\"quantity\"},model:{value:(_vm.data),callback:function ($$v) {_vm.data=$$v},expression:\"data\"}}),_c('TextArea',{attrs:{\"info\":_vm.assetInfo,\"property\":\"notes\"},model:{value:(_vm.data),callback:function ($$v) {_vm.data=$$v},expression:\"data\"}})],1)],1)],1)],1),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{nativeOn:{\"click\":function($event){return _vm.onCancelClicked($event)}}},[_vm._v(\"Cancel\")]),_c('v-btn',{attrs:{\"color\":\"primary\"},nativeOn:{\"click\":function($event){return _vm.onSaveClicked($event)}}},[_vm._v(\"Save\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { AssetPropertyName } from \"./AssetInterfaces\";\n\nexport type CompositeInput = { [K in AssetPropertyName]?: unknown };\nexport type Input = CompositeInput | unknown;\n\nexport class InputUtility {\n    public static isComposite(input: Input): input is CompositeInput {\n        return input instanceof Object;\n    }\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { AssetPropertyName } from \"./AssetInterfaces\";\nimport { Input } from \"./Input\";\n\nexport interface IPrimitiveInputInfoProperties {\n    readonly label: string;\n    readonly hint: string;\n    readonly isPresent: boolean;\n    readonly isRequired: boolean;\n}\n\n/**\n * Defines the base for all classes that provide input information for a primitive or composite value.\n *\n * @description Input information refers to data displayed in the UI (prompts, hints, whether a value is required, etc.)\n * as well as the means to validate input.\n */\nexport abstract class InputInfo {\n    /**\n     * Validates `input` or a property of `input`.\n     *\n     * @description As the type indicates, `input` can be of primitive or composite type. In the former case, `input`\n     * itself is validated. In the latter case, the value of the property with the passed name is validated. Either\n     * way, this method only ever validates a single primitive value.\n     * @returns `true` if the property value is valid; otherwise a string describing why the value is invalid.\n     */\n    public abstract validate(strict: boolean, input: Input, propertyName?: AssetPropertyName): true | string;\n\n    /**\n     * Gets the input info for a property.\n     *\n     * @throws `Error` if `T` does not match the type implied by `propertyName`.\n     */\n    public abstract get<T extends IPrimitiveInputInfoProperties>(ctor: new() => T, propertyName?: AssetPropertyName): T;\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { AssetPropertyName } from \"./AssetInterfaces\";\nimport { Input, InputUtility } from \"./Input\";\nimport { InputInfo, IPrimitiveInputInfoProperties } from \"./InputInfo\";\n\n/** Defines the base for all classes that provide input information for a primitive value. */\nexport abstract class PrimitiveInputInfo extends InputInfo implements IPrimitiveInputInfoProperties {\n    public readonly label: string;\n    public readonly hint: string;\n    public readonly isPresent: boolean;\n    public readonly isRequired: boolean;\n\n    public validate(strict: boolean, input: Input, propertyName?: AssetPropertyName) {\n        return InputUtility.isComposite(input) ?\n            \"A composite value was provided when a primitive one was expected.\" :\n            this.validatePrimitive(strict, input, propertyName);\n    }\n\n    public get<T extends IPrimitiveInputInfoProperties>(ctor: new() => T, propertyName?: AssetPropertyName): T {\n        if (propertyName !== undefined) {\n            throw new Error(\"The propertyName argument must be undefined for a primitive input.\");\n        }\n\n        if (!(this instanceof ctor)) {\n            throw new Error(`The requested type ${ctor.name} does not match the actual type.`);\n        }\n\n        return this;\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    /** @internal */\n    protected constructor(props: IPrimitiveInputInfoProperties) {\n        super();\n        ({ label: this.label, hint: this.hint, isPresent: this.isPresent, isRequired: this.isRequired } = props);\n    }\n\n    /** @internal */\n    protected validatePrimitive(strict: boolean, input: unknown, propertyName?: AssetPropertyName) {\n        if (propertyName !== undefined) {\n            throw new Error(\"The propertyName argument must be undefined for a primitive value.\");\n        }\n\n        if (!this.isPresent) {\n            return true;\n        }\n\n        const definedInput = input ?? \"\";\n\n        if ((typeof definedInput === \"string\") && (definedInput.length === 0)) {\n            return this.isRequired ? \"A value is required.\" : true;\n        }\n\n        return this.validateContent(strict, input);\n    }\n\n    /** @internal */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars, class-methods-use-this\n    protected validateContent(strict: boolean, input: unknown): true | string {\n        return true;\n    }\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nexport class ValidationError extends Error {\n    public constructor(message?: string) {\n        super(message);\n\n        // eslint-disable-next-line max-len\n        // https://github.com/Microsoft/TypeScript-wiki/blob/master/Breaking-Changes.md#extending-built-ins-like-error-array-and-map-may-no-longer-work\n        Object.setPrototypeOf(this, ValidationError.prototype);\n    }\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport Ajv from \"ajv\";\n\nimport schema from \"./schemas/All.schema.json\";\nimport { ValidationError } from \"./ValidationError\";\n\n// These are the only non-null primitives currently allowed in JSON schema, see\n// https://json-schema.org/draft/2019-09/json-schema-core.html#rfc.section.4.2.1\nconst primitiveSchemaNames = [\"Boolean\", \"Number\", \"String\"] as const;\ntype PrimitiveSchemaName = typeof primitiveSchemaNames[number];\ntype PropertyNamesWithEnumMembers<T> = { [K in keyof T]: T[K] extends { enum: unknown[] } ? K : never }[keyof T];\n\nexport type SchemaName = PrimitiveSchemaName | keyof typeof schema.definitions;\n\nexport type EnumSchemaName = PropertyNamesWithEnumMembers<typeof schema.definitions>;\n\nexport class Validator {\n    public static fromJson<T>(json: string, ctor: new (value?: unknown) => T): T {\n        return Validator.fromData(JSON.parse(json) as unknown, ctor);\n    }\n\n    public static fromData<T>(data: unknown, ctor: new (value?: unknown) => T): T {\n        if (!Validator.isSchemaName(ctor.name)) {\n            throw new Error(`Unknown schema: ${ctor.name}`);\n        }\n\n        const validationResult = Validator.validate(data, ctor.name);\n\n        if (validationResult !== true) {\n            // eslint-disable-next-line no-console\n            console.log(`${JSON.stringify(data, undefined, 2)} does not satisfy ${ctor.name}`);\n            throw new ValidationError(validationResult);\n        }\n\n        return Validator.isPrimitiveSchemaName(ctor.name) ? new ctor(data) : Object.assign(new ctor(), data);\n    }\n\n    public static validate(data: unknown, schemaName: SchemaName): true | string {\n        return (Validator.ajv.validate(Validator.getSchemaKeyRef(schemaName), data) === true) ||\n            Validator.ajv.errorsText();\n    }\n\n    public static getSchema(name: SchemaName) {\n        return Validator.isPrimitiveSchemaName(name) ? Validator.getPrimitiveSchema(name) : schema.definitions[name];\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    private static readonly customSchemaKey = \"Custom\";\n    private static readonly ajv = Validator.createAjv();\n\n    private static createAjv() {\n        const result = new Ajv({ multipleOfPrecision: 9 });\n        result.addSchema(schema, Validator.customSchemaKey);\n        primitiveSchemaNames.forEach(\n            (name) => result.addSchema(Validator.getPrimitiveSchema(name), Validator.getSchemaKeyRef(name)),\n        );\n\n        return result;\n    }\n\n    private static getSchemaKeyRef(schemaName: SchemaName) {\n        return Validator.isPrimitiveSchemaName(schemaName) ?\n            schemaName :\n            `${Validator.customSchemaKey}#/definitions/${schemaName}`;\n    }\n\n    private static isSchemaName(name: string): name is SchemaName {\n        return Validator.isPrimitiveSchemaName(name) || Object.prototype.hasOwnProperty.call(schema.definitions, name);\n    }\n\n    private static isPrimitiveSchemaName(name: string): name is PrimitiveSchemaName {\n        return (primitiveSchemaNames as readonly string[]).includes(name);\n    }\n\n    private static getPrimitiveSchema(name: PrimitiveSchemaName) {\n        return { type: name.toLowerCase() };\n    }\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { IPrimitiveInputInfoProperties } from \"./InputInfo\";\nimport { PrimitiveInputInfo } from \"./PrimitiveInputInfo\";\nimport { SchemaName, Validator } from \"./validation/Validator\";\n\ninterface ITextInputInfoProperties extends IPrimitiveInputInfoProperties {\n    readonly schemaName?: SchemaName;\n}\n\n/**\n * Provides input information for a property where a valid value either needs to be a number with certain constraints\n * (minimum, maximum, step) or text.\n */\nexport class TextInputInfo extends PrimitiveInputInfo {\n    public get min() {\n        return this.getValue(\"minimum\");\n    }\n\n    public get max() {\n        return this.getValue(\"maximum\");\n    }\n\n    public get step() {\n        return this.getValue(\"multipleOf\");\n    }\n\n    /** @internal */\n    public constructor(props: ITextInputInfoProperties = { label: \"\", hint: \"\", isPresent: false, isRequired: false }) {\n        super(props);\n        ({ schemaName: this.schemaName } = props);\n    }\n\n    public get type() {\n        return this.isNumber ? \"number\" : \"text\";\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    /**\n     * @internal\n     * @description This duplicates the validation a HTML input control (or a v-text-field) does out of the box. The\n     * duplication is necessary for the following reasons:\n     * - Some browsers localize the validation message. Since this application is in English only, users with a\n     *   non-English locale would get mixed languages in the UI.\n     * - We want to use exactly the same rules to validate file content.\n     */\n    protected validateContent(strict: boolean, input: unknown) {\n        const valueResult = this.validateValue(strict, input);\n\n        if (valueResult !== true) {\n            return valueResult;\n        }\n\n        return super.validateContent(strict, input);\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    private readonly schemaName?: SchemaName;\n\n    private get isNumber() {\n        return (this.min !== undefined) || (this.max !== undefined) || (this.step !== undefined);\n    }\n\n    private getValue(propertyName: string) {\n        if (this.schemaName) {\n            const result = (Validator.getSchema(this.schemaName) as { [propertyName: string]: unknown })[propertyName];\n\n            return typeof result === \"number\" ? result : undefined;\n        }\n\n        return undefined;\n    }\n\n    private validateValue(strict: boolean, input: unknown) {\n        if (!this.schemaName) {\n            throw new Error(\"Missing schemaName.\");\n        }\n\n        return Validator.validate(\n            !strict && this.isNumber && (typeof input === \"string\") ? Number.parseFloat(input) : input,\n            this.schemaName,\n        );\n    }\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { AssetPropertyName } from \"./AssetInterfaces\";\nimport { IAuxProperties } from \"./IAuxProperties\";\nimport { CompositeInput, Input, InputUtility } from \"./Input\";\nimport { InputInfo, IPrimitiveInputInfoProperties } from \"./InputInfo\";\nimport { PrimitiveInputInfo } from \"./PrimitiveInputInfo\";\nimport { SelectInputInfo } from \"./SelectInputInfo\";\nimport { TextInputInfo } from \"./TextInputInfo\";\nimport { AssetTypeName } from \"./validation/schemas/AssetTypeName.schema\";\n\ninterface IValidationResults extends IAuxProperties<true | string> {\n    [key: string]: true | string;\n}\n\n/**\n * Defines how the properties of a given asset type need to be input and validated and provides a method to create a\n * representation of the asset.\n */\nexport abstract class AssetInputInfo extends InputInfo implements IAuxProperties<PrimitiveInputInfo> {\n    public abstract get type(): AssetTypeName | \"\";\n\n    public abstract get description(): TextInputInfo;\n    public abstract get location(): TextInputInfo;\n    public abstract get address(): TextInputInfo;\n    public abstract get value(): TextInputInfo;\n    public abstract get valueCurrency(): SelectInputInfo;\n    public abstract get weight(): TextInputInfo;\n    public abstract get weightUnit(): SelectInputInfo;\n    public abstract get fineness(): PrimitiveInputInfo;\n    public abstract get quantity(): TextInputInfo;\n    public readonly notes = new TextInputInfo({\n        label: \"Notes\", hint: \"Additional asset information.\", isPresent: true, isRequired: false, schemaName: \"Text\",\n    });\n\n    /**\n     * @internal\n     * @description This is a property rather than a parameter of [[validate]], because [[validate]] is often\n     * (indirectly) called from a context where it is not known whether relations should be validated. For example,\n     * validation for Vuetify controls is specified by supplying a function to each control. Said function is then\n     * called while the bound value is modified in the control. However, the same function is also called when the\n     * whole form is validated. Obviously, relations should not be validated in the former case but they must be in the\n     * latter one.\n     */\n    public includeRelations = false;\n\n    public validate(strict: boolean, input: Input, propertyName?: AssetPropertyName) {\n        return InputUtility.isComposite(input) ?\n            this.validateComposite(strict, input, propertyName) :\n            \"A primitive value was provided when a composite one was expected.\";\n    }\n\n    public get<T extends IPrimitiveInputInfoProperties>(ctor: new() => T, propertyName?: AssetPropertyName): T {\n        if (propertyName === undefined) {\n            throw new Error(\"The propertyName argument cannot be undefined for a composite input.\");\n        }\n\n        const result = this[propertyName];\n\n        if (!(result instanceof ctor)) {\n            throw new Error(\n                `The requested type ${ctor.name} does not match the actual type of the property ${propertyName}.`,\n            );\n        }\n\n        return result;\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    /** @internal */\n    protected validateComposite(strict: boolean, input: CompositeInput, propertyName?: AssetPropertyName) {\n        if (propertyName === undefined) {\n            throw new Error(\"The propertyName argument cannot be undefined for a composite value.\");\n        }\n\n        const singleResult = this[propertyName].validate(strict, input[propertyName], undefined);\n\n        return (singleResult === true) && this.includeRelations ?\n            this.validateRelations(input, propertyName) :\n            singleResult;\n    }\n\n    /** @internal */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars, class-methods-use-this\n    protected validateRelations(input: CompositeInput, propertyName: AssetPropertyName): true | string {\n        return true;\n    }\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\n/* eslint-disable max-classes-per-file */\nimport { IPrimitiveInputInfoProperties } from \"./InputInfo\";\nimport { PrimitiveInputInfo } from \"./PrimitiveInputInfo\";\nimport { EnumSchemaName, SchemaName, Validator } from \"./validation/Validator\";\n\ninterface ISelectInputInfoParameters extends IPrimitiveInputInfoProperties {\n    readonly items: readonly string[];\n    readonly enumSchemaNames: readonly EnumSchemaName[];\n}\n\n/** Provides input information for a property where a valid value needs to be equal to one of a given list of values. */\nexport abstract class SelectInputInfoBase extends PrimitiveInputInfo {\n    public abstract get items(): readonly string[];\n\n    /** @internal */\n    protected constructor(props: IPrimitiveInputInfoProperties) {\n        super(props);\n    }\n}\n\nexport class SelectInputInfo extends SelectInputInfoBase {\n    public readonly items: readonly string[];\n\n    /** @internal */\n    public constructor(params = SelectInputInfo.getDefaults()) {\n        super(params);\n        ({ items: this.items, enumSchemaNames: this.enumSchemaNames } = params);\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    protected validateContent(strict: boolean, input: unknown) {\n        if (this.items.length && this.enumSchemaNames.length) {\n            const result = this.enumSchemaNames.reduce<string | true>(\n                (p: string | true, c: SchemaName) => (p === true ? p : Validator.validate(input, c)),\n                \"\",\n            );\n\n            if (result !== true) {\n                return result;\n            }\n        }\n\n        return super.validateContent(strict, input);\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    private static getDefaults(): ISelectInputInfoParameters {\n        return { label: \"\", hint: \"\", isPresent: false, isRequired: false, items: [], enumSchemaNames: [] };\n    }\n\n    private readonly enumSchemaNames: readonly EnumSchemaName[];\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { AssetInputInfo } from \"./AssetInputInfo\";\nimport { CryptoWallet } from \"./CryptoWallet\";\nimport { IParent } from \"./IEditable\";\nimport { SelectInputInfo } from \"./SelectInputInfo\";\nimport { TextInputInfo } from \"./TextInputInfo\";\n\nexport interface ICryptoWalletCtor<T extends CryptoWallet, U> {\n    readonly type: T[\"type\"];\n    new (parent: IParent, props: U): T;\n}\n\nexport interface ICryptoWalletInputInfoParameters<T extends CryptoWallet, U> {\n    readonly ctor: ICryptoWalletCtor<T, U>;\n}\n\nexport abstract class CryptoWalletInputInfo<T extends CryptoWallet, U> extends AssetInputInfo {\n    public get type() {\n        return this.ctor.type;\n    }\n\n    public readonly description = new TextInputInfo({\n        label: \"Description\",\n        hint: \"Describes the wallet, e.g. 'Mycelium', 'Hardware Wallet', 'Paper Wallet'.\",\n        isPresent: true,\n        isRequired: true,\n        schemaName: \"Text\",\n    });\n\n    public readonly location = new TextInputInfo({\n        label: \"Location\",\n        hint: \"The location of the wallet, e.g. 'My Mobile', 'Home', 'Safety Deposit Box'.\",\n        isPresent: true,\n        isRequired: false,\n        schemaName: \"Text\",\n    });\n\n    public readonly weight = new TextInputInfo();\n    public readonly weightUnit = new SelectInputInfo();\n    public readonly fineness = new TextInputInfo();\n    public readonly value = new TextInputInfo();\n    public readonly valueCurrency = new SelectInputInfo();\n\n    public createAsset(parent: IParent, props: U) {\n        return new this.ctor(parent, props);\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    protected static getSchema(quantityDecimals: 8 | 18) {\n        switch (quantityDecimals) {\n            case 8:\n                return \"Quantity8\";\n            case 18:\n                return \"QuantityAny\";\n            default:\n                return CryptoWalletInputInfo.assertUnreachable(quantityDecimals);\n        }\n    }\n\n    protected constructor(params: ICryptoWalletInputInfoParameters<T, U>) {\n        super();\n        this.ctor = params.ctor;\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    private static assertUnreachable(value: never): never {\n        throw new Error(value);\n    }\n\n    private readonly ctor: ICryptoWalletCtor<T, U>;\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { CryptoWalletInputInfo, ICryptoWalletInputInfoParameters } from \"./CryptoWalletInputInfo\";\nimport { Erc20TokensWallet } from \"./Erc20TokensWallet\";\nimport { TextInputInfo } from \"./TextInputInfo\";\nimport { IAddressCryptoWalletProperties } from \"./validation/schemas/IAddressCryptoWalletProperties.schema\";\n\ninterface IAddressCryptoWalletInputInfoParameters extends\n    ICryptoWalletInputInfoParameters<Erc20TokensWallet, IAddressCryptoWalletProperties> {\n    readonly addressHint: string;\n}\n\nexport class AddressCryptoWalletInputInfo extends\n    CryptoWalletInputInfo<Erc20TokensWallet, IAddressCryptoWalletProperties> {\n    public readonly address: TextInputInfo;\n    public readonly quantity = new TextInputInfo();\n\n    /** @internal */\n    public constructor(parameters: IAddressCryptoWalletInputInfoParameters) {\n        super(parameters);\n        this.address = new TextInputInfo({\n            label: \"Address\", hint: parameters.addressHint, isPresent: true, isRequired: true, schemaName: \"Text\",\n        });\n    }\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\n/** Thrown when a query fails. */\nexport class QueryError extends Error {\n    public constructor(message?: string) {\n        // eslint-disable-next-line @typescript-eslint/prefer-nullish-coalescing\n        super(message || \"Unexpected Response\");\n\n        // eslint-disable-next-line max-len\n        // https://github.com/Microsoft/TypeScript-wiki/blob/master/Breaking-Changes.md#extending-built-ins-like-error-array-and-map-may-no-longer-work\n        Object.setPrototypeOf(this, QueryError.prototype);\n    }\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { QueryError } from \"./QueryError\";\nimport { Validator } from \"./validation/Validator\";\n\n/** @internal */\nexport class QueryCache {\n    /** @internal */\n    public static fetch(query: string): Promise<unknown>;\n    public static fetch<R>(\n        query: string,\n        responseCtor: new () => R,\n        getErrorMessage?: (r: R) => string | undefined,\n    ): Promise<R>;\n\n    public static async fetch<R>(\n        query: string,\n        responseCtor?: new () => R,\n        getErrorMessage?: (r: R) => string | undefined,\n    ) {\n        return QueryCache.cacheResult(\n            query,\n            async () => (\n                responseCtor ?\n                    QueryCache.fetchParseValidateAndApprove(query, responseCtor, getErrorMessage) :\n                    QueryCache.fetchAndParse(query)\n            ),\n        );\n    }\n\n    /** @internal */\n    public static clear() {\n        QueryCache.cache.clear();\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    private static readonly cache = new Map<string, Promise<unknown>>();\n\n    private static async cacheResult<R>(query: string, getResponse: () => Promise<R>) {\n        let result = QueryCache.cache.get(query);\n\n        if (!result) {\n            result = getResponse();\n            QueryCache.cache.set(query, result);\n        }\n\n        return result;\n    }\n\n    private static async fetchParseValidateAndApprove<R>(\n        query: string,\n        responseCtor: new () => R,\n        getErrorMessage?: (r: R) => string | undefined,\n    ) {\n        const response = await QueryCache.fetchParseAndValidate(query, responseCtor);\n\n        if (getErrorMessage) {\n            const errorMessage = getErrorMessage(response);\n\n            if (errorMessage) {\n                throw new QueryError(`Server Error: ${errorMessage}`);\n            }\n        }\n\n        return response;\n    }\n\n    private static async fetchParseAndValidate<R>(query: string, responseCtor: new () => R) {\n        const response = await QueryCache.fetchAndParse(query);\n\n        try {\n            return Validator.fromData(response, responseCtor);\n        } catch (e) {\n            throw new QueryError(`Validation Error: ${e}`);\n        }\n    }\n\n    private static async fetchAndParse(query: string) {\n        const responseText = await QueryCache.tryFetch(query);\n\n        try {\n            return JSON.parse(responseText) as unknown;\n        } catch (e) {\n            throw new QueryError(`Invalid JSON: ${e}`);\n        }\n    }\n\n    private static async tryFetch(query: string) {\n        try {\n            return await (await window.fetch(query)).text();\n        } catch (e) {\n            throw new QueryError(`Network Error: ${e}`);\n        }\n    }\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nexport class CryptoCompareResponse {\n    public readonly USD!: number;\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { IWebRequest } from \"./IWebRequest\";\nimport { QueryCache } from \"./QueryCache\";\nimport { CryptoCompareResponse } from \"./validation/schemas/CryptoCompareResponse.schema\";\n\n/** Represents a single cryptocompare.com request. */\nexport class CryptoCompareRequest implements IWebRequest<number> {\n    public constructor(private readonly coin: string, private readonly invert: boolean) {\n    }\n\n    public async execute() {\n        const price = (await QueryCache.fetch(\n            `https://min-api.cryptocompare.com/data/price?fsym=${this.coin}&tsyms=USD`,\n            CryptoCompareResponse,\n        )).USD;\n\n        return this.invert ? 1 / price : price;\n    }\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { QueryError } from \"./QueryError\";\n\nexport class QueryUtility {\n    public static async execute(query: () => Promise<number | undefined>) {\n        try {\n            return {\n                result: await query(),\n                status: \"\",\n            };\n        } catch (e) {\n            if (e instanceof QueryError) {\n                return {\n                    result: Number.NaN,\n                    status: e.message,\n                };\n            }\n\n            throw e;\n        }\n    }\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { IAssetIntersection } from \"./AssetInterfaces\";\nimport { IEditable, IParent } from \"./IEditable\";\nimport { QueryUtility } from \"./QueryUtility\";\nimport { AssetBundleUnion } from \"./validation/schemas/AssetBundleUnion.schema\";\nimport { AssetTypeName } from \"./validation/schemas/AssetTypeName.schema\";\nimport { AssetUnion } from \"./validation/schemas/AssetUnion.schema\";\nimport { Fineness } from \"./validation/schemas/Fineness.schema\";\nimport { ICalculatedAssetProperties } from \"./validation/schemas/ICalculatedAssetProperties.schema\";\nimport { QuantityAny } from \"./validation/schemas/QuantityAny.schema\";\n\n/**\n * Represent a bundle of assets.\n *\n * @description Asset bundles are primarily useful in conjunction with crypto currencies, where one address can hold a\n * balance of multiple currencies. For example, an ETH address can hold balances of hundreds of ERC20 tokens. A bundle\n * of assets is always defined by a primary asset, the details of which are then used to retrieve information about\n * secondary assets. For example, in the case of ERC20 tokens, a [[Erc20TokensWallet]] object is the primary asset\n * and the nested [[Erc20TokenWallet]] objects are the secondary assets. When the former is instantiated with an address\n * and then put into a bundle by calling [[Erc20TokensWallet.bundle]], [[Erc20TokenWallet]] objects are automatically\n * added to [[assets]] for each of the ERC20 tokens.\n * Since every asset must reside in a bundle, there is also the class [[GenericAssetBundle]], which never holds\n * secondary assets besides the primary one. This is used for all [[PreciousMetalAsset]] subclasses and other\n * [[CryptoWallet]] subclasses.\n */\nexport interface IAssetBundle {\n    /** Provides the bundled assets. */\n    readonly assets: readonly Asset[];\n\n    /** Deletes `asset` from [[assets]]. */\n    deleteAsset(asset: Asset): void;\n\n    /** @internal */\n    queryData(): Promise<void>;\n\n    /** @internal */\n    toJSON(): AssetBundleUnion;\n}\n\n/** Defines the base of all classes that represent an asset. */\nexport abstract class Asset implements ICalculatedAssetProperties {\n    /** Provides the unique key of the asset. */\n    public readonly key = Asset.nextKey++;\n\n    /** Provides the parent model to which this asset belongs. */\n    public readonly parent: IParent;\n\n    // eslint-disable-next-line class-methods-use-this\n    public get isExpandable() {\n        return false;\n    }\n\n    /** Provides the type of asset, e.g. 'Silver, 'Gold', 'Bitcoin', 'Litecoin'. */\n    public abstract get type(): AssetTypeName | \"\";\n\n    /** Provides the asset description, e.g. 'Bars', 'Coins', 'Spending', 'Savings'. */\n    public abstract get description(): string;\n\n    /** Provides the location of the asset, e.g. 'Safe', 'Safety Deposit Box', 'Mobile Phone', 'Hardware Wallet'. */\n    public abstract get location(): string;\n\n    /** Provides further information on the location. */\n    // eslint-disable-next-line class-methods-use-this\n    public get locationHint() {\n        return \"\";\n    }\n\n    /** Provides the unit of the quantity, e.g. '1 t oz', '10 g', 'BTC'. */\n    public abstract get unit(): string;\n\n    /** Provides the fineness, e.g. 0.999. For anything other than precious metals this is always undefined. */\n    public abstract get fineness(): Fineness | undefined;\n\n    /** Provides the asset quantity. */\n    public abstract get quantity(): QuantityAny | undefined;\n\n    /** Provides the quantity query error message, if applicable. */\n    public abstract get quantityHint(): string;\n\n    /** Provides the number of decimals to format the quantity to. */\n    public abstract get displayDecimals(): number;\n\n    /** Provides the asset notes. */\n    public abstract get notes(): string;\n\n    /** @internal */\n    public get unitValue() {\n        return Asset.multiply(this.unitValueUsd, this.parent.exchangeRate);\n    }\n\n    /** Provides the unit value query error message, if applicable. */\n    public get unitValueHint() {\n        return this.unitValueHintImpl;\n    }\n\n    /** @internal */\n    public get totalValue() {\n        return Asset.multiply(this.quantity, this.unitValue);\n    }\n\n    /** @internal */\n    public get percent() {\n        return (this.totalValue === undefined) || (this.parent.assets.grandTotalValue === undefined) ?\n            undefined :\n            this.totalValue / this.parent.assets.grandTotalValue * 100;\n    }\n\n    /** Provides a value indicating whether the asset has any associated actions. */\n    // eslint-disable-next-line class-methods-use-this\n    public get hasActions() {\n        return true;\n    }\n\n    /** Provides the associated asset that can be edited. */\n    public get editableAsset(): IEditable {\n        return this;\n    }\n\n    /** @internal */\n    public async queryData(): Promise<void> {\n        const { result, status } = await QueryUtility.execute(async () => this.queryUnitValueUsd());\n        this.unitValueUsd = result;\n        this.unitValueHintImpl = status;\n    }\n\n    /** @internal */\n    public abstract toJSON(): AssetUnion;\n\n    /** @internal */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars, class-methods-use-this\n    public bundle(bundle?: unknown): IAssetBundle {\n        throw new Error(\"Asset cannot be bundled.\");\n    }\n\n    /** @internal */\n    // eslint-disable-next-line @typescript-eslint/no-empty-function, class-methods-use-this\n    public expand() {\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    protected unitValueUsd?: number;\n\n    protected constructor(parent: IParent) {\n        this.parent = parent;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    protected async queryUnitValueUsd(): Promise<number | undefined> {\n        return Promise.reject(new Error(\"Asset cannot query unit value.\"));\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    private static nextKey = 0;\n\n    private static multiply(factor1: number | undefined, factor2: number | undefined) {\n        return (factor1 === undefined) || (factor2 === undefined) ? undefined : factor1 * factor2;\n    }\n\n    private unitValueHintImpl = \"\";\n}\n\nexport type AssetDisplayPropertyName = (keyof IAssetIntersection) | (keyof ICalculatedAssetProperties);\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { Asset } from \"./Asset\";\nimport { IParent } from \"./IEditable\";\n\n/** Defines the base of all classes that represent a single asset (as opposed to an [[AssetGroup]]). */\nexport abstract class SingleAsset extends Asset {\n    public quantityHint = \"\";\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    protected constructor(parent: IParent) {\n        super(parent);\n    }\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { IParent } from \"./IEditable\";\nimport { SingleAsset } from \"./SingleAsset\";\nimport { AddressCryptoWalletTypeName } from \"./validation/schemas/IAddressCryptoWallet.schema\";\nimport { QuantityCryptoWalletTypeName } from \"./validation/schemas/IQuantityCryptoWallet.schema\";\nimport { SimpleCryptoWalletTypeName } from \"./validation/schemas/ISimpleCryptoWallet.schema\";\nimport { QuantityAny } from \"./validation/schemas/QuantityAny.schema\";\n\n/** Defines the base of all classes that represent a crypto currency wallet. */\nexport abstract class CryptoWallet extends SingleAsset {\n    public abstract get type(): SimpleCryptoWalletTypeName | AddressCryptoWalletTypeName | QuantityCryptoWalletTypeName;\n\n    public get locationHint() {\n        return this.address;\n    }\n\n    public abstract get address(): string;\n\n    public get unit() {\n        return this.currencySymbol;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    public get fineness() {\n        return undefined;\n    }\n\n    public quantity: QuantityAny | undefined;\n\n    public readonly displayDecimals = 6;\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    protected constructor(parent: IParent, private readonly currencySymbol: string) {\n        super(parent);\n    }\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { CryptoCompareRequest } from \"./CryptoCompareRequest\";\nimport { CryptoWallet } from \"./CryptoWallet\";\nimport { IParent } from \"./IEditable\";\nimport { QueryUtility } from \"./QueryUtility\";\nimport { IAddressCryptoWalletProperties } from \"./validation/schemas/IAddressCryptoWalletProperties.schema\";\nimport { IQuantityCryptoWalletProperties } from \"./validation/schemas/IQuantityCryptoWalletProperties.schema\";\nimport { ISimpleCryptoWalletProperties } from \"./validation/schemas/ISimpleCryptoWalletProperties.schema\";\n\ntype SimpleCryptoWalletProperties = [\n    ISimpleCryptoWalletProperties[\"description\"],\n    ISimpleCryptoWalletProperties[\"location\"],\n    IAddressCryptoWalletProperties[\"address\"] | undefined,\n    IQuantityCryptoWalletProperties[\"quantity\"] | undefined,\n    ISimpleCryptoWalletProperties[\"notes\"]\n];\n\nexport type IRealCryptoWalletParameters = ISimpleCryptoWalletProperties & {\n    /** The crypto currency symbol, e.g. 'BTC', 'LTC'. */\n    readonly currencySymbol: string;\n};\n\n/** Defines the base of all classes that represent a real crypto currency wallet. */\nexport abstract class RealCryptoWallet extends CryptoWallet {\n    public readonly description: string;\n\n    public readonly address: string;\n\n    public readonly location: string;\n\n    public readonly notes: string;\n\n    /** @internal */\n    public async queryData(): Promise<void> {\n        await super.queryData();\n\n        if (this.address) {\n            const { result, status } = await QueryUtility.execute(async () => this.queryQuantity());\n\n            if (result !== undefined) {\n                this.quantity = (this.quantity === undefined ? 0 : this.quantity) + result;\n            }\n\n            this.quantityHint = status;\n        }\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    // This is a hack to work around the fact that the spread operator does not call property getters:\n    // https://github.com/Microsoft/TypeScript/issues/26547\n    protected static getProperties(\n        props: ISimpleCryptoWalletProperties,\n        currencySymbol: string,\n    ): IRealCryptoWalletParameters {\n        const { description, location, notes } = props;\n        const address = ((\"address\" in props) && props.address) || undefined;\n        const quantity = ((\"quantity\" in props) && props.quantity) || undefined;\n\n        return {\n            ...RealCryptoWallet.getPropertiesImpl([description, location, address, quantity, notes]),\n            currencySymbol,\n        };\n    }\n\n    protected constructor(parent: IParent, params: IRealCryptoWalletParameters) {\n        super(parent, params.currencySymbol);\n        this.description = params.description;\n        this.location = params.location ?? \"\";\n        this.address = ((\"address\" in params) && params.address) || \"\";\n        this.quantity = ((\"quantity\" in params) && params.quantity) || undefined;\n        this.notes = params.notes ?? \"\";\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    protected async queryQuantity(): Promise<number | undefined> {\n        return Promise.resolve(undefined);\n    }\n\n    protected async queryUnitValueUsd() {\n        return this.unit ? new CryptoCompareRequest(this.unit, false).execute() : Promise.resolve(undefined);\n    }\n\n    /** @internal */\n    protected getProperties(): ISimpleCryptoWalletProperties {\n        return RealCryptoWallet.getPropertiesImpl([\n            this.description,\n            this.location || undefined,\n            this.address || undefined,\n            this.address ? undefined : this.quantity,\n            this.notes || undefined,\n        ]);\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    private static getPropertiesImpl(\n        [description, location, address, quantity, notes]: SimpleCryptoWalletProperties,\n    ): ISimpleCryptoWalletProperties {\n        if (address) {\n            return { description, location, address, notes };\n        } else if (quantity) {\n            return { description, location, quantity, notes };\n        }\n\n        throw new Error(\"Unexpected ISimpleCryptoWalletProperties value!\");\n    }\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { SingleAsset } from \"./SingleAsset\";\n\n/** Defines a bundle containing a single asset. */\nexport abstract class GenericAssetBundle<T extends SingleAsset> {\n    public readonly assets: T[];\n\n    /** @internal */\n    public constructor(asset: T) {\n        this.assets = [asset];\n    }\n\n    public deleteAsset(asset: T) {\n        const index = this.assets.indexOf(asset);\n\n        if (index >= 0) {\n            this.assets.splice(index, 1);\n        }\n    }\n\n    public async queryData() {\n        return this.assets[0].queryData();\n    }\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\n/* eslint-disable max-classes-per-file */\nimport { IAssetBundle } from \"./Asset\";\nimport { GenericAssetBundle } from \"./GenericAssetBundle\";\nimport { IParent } from \"./IEditable\";\nimport { IRealCryptoWalletParameters, RealCryptoWallet } from \"./RealCryptoWallet\";\nimport { ISimpleCryptoWallet, SimpleCryptoWalletTypeName } from \"./validation/schemas/ISimpleCryptoWallet.schema\";\n\n/** Defines the base of all simple crypto currency wallets. */\nexport abstract class SimpleCryptoWallet extends RealCryptoWallet {\n    public abstract get type(): SimpleCryptoWalletTypeName;\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    public bundle(bundle?: unknown): IAssetBundle {\n        return new SimpleCryptoWallet.Bundle(this);\n    }\n\n    /** @internal */\n    public toJSON(): ISimpleCryptoWallet {\n        return {\n            type: this.type,\n            ...this.getProperties(),\n        };\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    protected constructor(parent: IParent, props: IRealCryptoWalletParameters) {\n        super(parent, props);\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    private static readonly Bundle = class extends GenericAssetBundle<SimpleCryptoWallet> implements IAssetBundle {\n        public toJSON() {\n            return {\n                primaryAsset: this.assets[0].toJSON(),\n            };\n        }\n    };\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nexport const silver = \"Silver\";\nexport const palladium = \"Palladium\";\nexport const platinum = \"Platinum\";\nexport const gold = \"Gold\";\nexport const bitcoin = \"Bitcoin\";\nexport const monero = \"Monero\";\nexport const litecoin = \"Litecoin\";\nexport const ethereumClassic = \"Ethereum Classic\";\nexport const ethereum = \"Ethereum\";\nexport const erc20Tokens = \"ERC20 Tokens\";\nexport const bitcoinGold = \"Bitcoin Gold\";\nexport const dash = \"Dash\";\nexport const zcash = \"Zcash\";\nexport const misc = \"Misc\";\n\nexport const assetTypeNames = [\n    silver,\n    palladium,\n    platinum,\n    gold,\n    bitcoin,\n    monero,\n    litecoin,\n    ethereumClassic,\n    ethereum,\n    erc20Tokens,\n    bitcoinGold,\n    dash,\n    zcash,\n    misc,\n] as const;\n\nexport type AssetTypeName = typeof assetTypeNames[number];\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nexport interface IAddressBalance {\n    readonly [key: string]: unknown;\n    // eslint-disable-next-line @typescript-eslint/camelcase\n    readonly final_balance: number;\n    // eslint-disable-next-line @typescript-eslint/camelcase\n    readonly n_tx: number;\n}\n\nexport class BlockchainBalanceResponse {\n    readonly [address: string]: IAddressBalance | string | number;\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\n/* eslint-disable max-classes-per-file */\nimport { HDNode } from \"bitcoinjs-lib\";\nimport { IParent } from \"./IEditable\";\nimport { IWebRequest } from \"./IWebRequest\";\nimport { QueryCache } from \"./QueryCache\";\nimport { QueryError } from \"./QueryError\";\nimport { RealCryptoWallet } from \"./RealCryptoWallet\";\nimport { SimpleCryptoWallet } from \"./SimpleCryptoWallet\";\nimport { bitcoin } from \"./validation/schemas/AssetTypeName.schema\";\nimport { BlockchainBalanceResponse, IAddressBalance } from \"./validation/schemas/BlockchainBalanceResponse.schema\";\nimport { ISimpleCryptoWalletProperties } from \"./validation/schemas/ISimpleCryptoWalletProperties.schema\";\n\n/** @internal */\ninterface IBalance {\n    finalBalance: number;\n    transactionCount: number;\n}\n\n/** Represents a BTC wallet. */\nexport class BtcWallet extends SimpleCryptoWallet {\n    public static readonly type = bitcoin;\n\n    public readonly type = bitcoin;\n\n    public constructor(parent: IParent, props: ISimpleCryptoWalletProperties) {\n        super(parent, RealCryptoWallet.getProperties(props, \"BTC\"));\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    protected async queryQuantity() {\n        return new BtcWallet.QuantityRequest(this.address).queryQuantity();\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    private static readonly BlockchainRequest = class NestedBCRequest implements IWebRequest<Readonly<IBalance>> {\n        public constructor(addresses: readonly string[]) {\n            this.addresses = addresses.join(\"|\");\n        }\n\n        public async execute() {\n            return NestedBCRequest.getFinalBalance(await QueryCache.fetch(\n                `https://blockchain.info/balance?active=${this.addresses}&cors=true`,\n                BlockchainBalanceResponse,\n                (r) => (typeof r.reason === \"string\" && r.reason) || undefined,\n            ));\n        }\n\n        ////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n        private static getFinalBalance(response: BlockchainBalanceResponse) {\n            const result: IBalance = { finalBalance: Number.NaN, transactionCount: 0 };\n            const balances = Object.keys(response).map((k) => response[k]).filter(\n                (v): v is IAddressBalance => typeof v === \"object\",\n            );\n\n            balances.forEach((b) => NestedBCRequest.addBalance(result, b));\n\n            if (Number.isNaN(result.finalBalance)) {\n                throw new QueryError();\n            }\n\n            return result;\n        }\n\n        // eslint-disable-next-line @typescript-eslint/camelcase\n        private static addBalance(result: IBalance, { final_balance, n_tx }: IAddressBalance) {\n            // eslint-disable-next-line @typescript-eslint/camelcase\n            result.finalBalance = (Number.isNaN(result.finalBalance) ? 0 : result.finalBalance) + (final_balance / 1E8);\n            // eslint-disable-next-line @typescript-eslint/camelcase\n            result.transactionCount += n_tx;\n        }\n\n        private readonly addresses: string;\n    };\n\n    private static readonly QuantityRequest = class NestedQuantityRequest {\n        public constructor(private readonly address: string) {\n        }\n\n        public async queryQuantity() {\n            // cSpell: ignore xpub\n            // TODO: This is a crude test to distinguish between xpub and a normal address\n            if (this.address.length <= 100) {\n                await this.add([this.address]);\n            } else {\n                await NestedQuantityRequest.delay(1000);\n                const parent = HDNode.fromBase58(this.address);\n\n                // The following calls use a lot of CPU. By delaying first, we ensure that other queries can be\n                // sent, their respective responses received and even rendered in the UI before the CPU is blocked.\n                await this.addChain(parent.derive(0));\n                await this.addChain(parent.derive(1));\n            }\n\n            return this.quantity;\n        }\n\n        ////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n        private static readonly minUnusedAddressesToCheck = 20;\n        private static batchLength = 2;\n\n        private static async delay(milliseconds: number) {\n            return new Promise<void>((resolve) => setTimeout(resolve, milliseconds));\n        }\n\n        private static getBatch(node: HDNode, offset: number) {\n            const result = new Array<string>(NestedQuantityRequest.batchLength);\n            const start = Date.now();\n\n            for (let index = 0; index < result.length; ++index) {\n                result[index] = node.derive(offset + index).getAddress();\n            }\n\n            if ((Date.now() - start < 500) && (NestedQuantityRequest.batchLength < 16)) {\n                // This is an attempt at making address derivation more bearable on browsers with lousy script execution\n                // speed, e.g. Edge. Of course, this doesn't make the overall process faster, but it avoids blocking the\n                // thread for longer than a second.\n                NestedQuantityRequest.batchLength *= 2;\n            }\n\n            return result;\n        }\n\n        private quantity = 0;\n\n        private async add(addresses: readonly string[]) {\n            const result = await new BtcWallet.BlockchainRequest(addresses).execute();\n            this.quantity += result.finalBalance;\n\n            return result;\n        }\n\n        private async addChain(node: HDNode) {\n            // eslint-disable-next-line init-declarations\n            let batch: string[] | undefined;\n            let unusedAddressesToCheck = NestedQuantityRequest.minUnusedAddressesToCheck;\n\n            for (let index = 0; unusedAddressesToCheck > 0; index += batch.length) {\n                batch = NestedQuantityRequest.getBatch(node, index);\n\n                // We need to do this sequentially such that we don't miss the point where the unused addresses start\n                // eslint-disable-next-line no-await-in-loop\n                if ((await this.add(batch)).transactionCount === 0) {\n                    unusedAddressesToCheck -= batch.length;\n                } else {\n                    unusedAddressesToCheck = NestedQuantityRequest.minUnusedAddressesToCheck;\n                }\n            }\n        }\n    };\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { IParent } from \"./IEditable\";\nimport { QueryCache } from \"./QueryCache\";\nimport { RealCryptoWallet } from \"./RealCryptoWallet\";\nimport { SimpleCryptoWallet } from \"./SimpleCryptoWallet\";\nimport { bitcoinGold } from \"./validation/schemas/AssetTypeName.schema\";\nimport { ISimpleCryptoWalletProperties } from \"./validation/schemas/ISimpleCryptoWalletProperties.schema\";\n\n/** Represents a BTG wallet. */\nexport class BtgWallet extends SimpleCryptoWallet {\n    public static readonly type = bitcoinGold;\n\n    public readonly type = bitcoinGold;\n\n    public constructor(parent: IParent, props: ISimpleCryptoWalletProperties) {\n        super(parent, RealCryptoWallet.getProperties(props, \"BTG\"));\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    protected async queryQuantity() {\n        const url = `https://explorer.bitcoingold.org/insight-api/addr/${this.address}/balance`;\n\n        // If the address is invalid, the server answers without setting the Access-Control-Allow-Origin header, which\n        // keeps us from reading the error message in the body.\n        return Number(await QueryCache.fetch(url, Number)) / 1E8;\n    }\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nexport class BlockcypherBalanceResponse {\n    readonly [key: string]: unknown;\n    public readonly balance?: number;\n    public readonly error?: string;\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { IParent } from \"./IEditable\";\nimport { QueryCache } from \"./QueryCache\";\nimport { IRealCryptoWalletParameters } from \"./RealCryptoWallet\";\nimport { SimpleCryptoWallet } from \"./SimpleCryptoWallet\";\nimport { BlockcypherBalanceResponse } from \"./validation/schemas/BlockcypherBalanceResponse.schema\";\n\n/** Represents a wallet the balance of which is requested from blockcypher.com. */\nexport abstract class BlockcypherWallet extends SimpleCryptoWallet {\n    protected constructor(parent: IParent, params: IRealCryptoWalletParameters) {\n        super(parent, params);\n    }\n\n    protected async queryQuantity() {\n        const url = `https://api.blockcypher.com/v1/${this.unit.toLowerCase()}/main/addrs/${this.address}/balance`;\n        const response = await QueryCache.fetch(url, BlockcypherBalanceResponse, (r) => r.error);\n\n        return (response.balance && response.balance / 1E8) ?? Number.NaN;\n    }\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { BlockcypherWallet } from \"./BlockcypherWallet\";\nimport { IParent } from \"./IEditable\";\nimport { RealCryptoWallet } from \"./RealCryptoWallet\";\nimport { dash } from \"./validation/schemas/AssetTypeName.schema\";\nimport { ISimpleCryptoWalletProperties } from \"./validation/schemas/ISimpleCryptoWalletProperties.schema\";\n\n/** Represents a DASH wallet. */\nexport class DashWallet extends BlockcypherWallet {\n    public static readonly type = dash;\n\n    public readonly type = dash;\n\n    public constructor(parent: IParent, props: ISimpleCryptoWalletProperties) {\n        super(parent, RealCryptoWallet.getProperties(props, \"DASH\"));\n    }\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { CryptoWallet } from \"./CryptoWallet\";\nimport { IEditable } from \"./IEditable\";\nimport { AddressCryptoWalletTypeName, IAddressCryptoWallet } from \"./validation/schemas/IAddressCryptoWallet.schema\";\nimport { QuantityAny } from \"./validation/schemas/QuantityAny.schema\";\n\ninterface ITokenWalletParameters {\n    readonly editable: IErc20TokensWallet;\n    readonly currencySymbol: string;\n    readonly quantity: QuantityAny;\n    readonly quantityHint: string;\n    readonly unitValueUsd?: number;\n}\n\nexport interface IErc20TokensWallet extends IEditable {\n    readonly type: AddressCryptoWalletTypeName;\n    readonly description: string;\n    readonly location: string;\n    readonly address: string;\n    readonly notes: string;\n\n    queryData(): Promise<void>;\n    toJSON(): IAddressCryptoWallet;\n}\n\nexport class Erc20TokenWallet extends CryptoWallet {\n    public get type(): AddressCryptoWalletTypeName {\n        return this.editable.type;\n    }\n\n    public get description() {\n        return this.editable.description;\n    }\n\n    public get location() {\n        return this.editable.location;\n    }\n\n    public get address() {\n        return this.editable.address;\n    }\n\n    public get notes() {\n        return this.editable.notes;\n    }\n\n    public get editableAsset() {\n        return this.editable;\n    }\n\n    /** @internal */\n    public constructor({ editable, currencySymbol, quantity, quantityHint, unitValueUsd }: ITokenWalletParameters) {\n        super(editable.parent, currencySymbol);\n        this.editable = editable;\n        this.quantity = quantity;\n        this.quantityHint = quantityHint;\n        this.unitValueUsd = unitValueUsd;\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    public toJSON(): never {\n        throw new Error(`${Erc20TokenWallet.name} cannot be serialized.`);\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    private readonly editable: IErc20TokensWallet;\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { IDeletedAssets } from \"./IDeletedAssets.schema\";\n\nexport class DeletedAssets implements IDeletedAssets {\n    readonly [key: string]: unknown;\n    public readonly deletedAssets!: readonly string[];\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nexport interface IToken {\n    readonly [key: string]: unknown;\n    readonly tokenInfo: {\n        readonly [key: string]: unknown;\n        readonly symbol: string;\n        readonly decimals: string | number;\n        readonly price: false | {\n            readonly [key: string]: unknown;\n            readonly rate: number;\n            readonly currency: \"USD\";\n        };\n    };\n\n    readonly balance: number;\n}\n\nexport class EthplorerGetAddressInfoResponse {\n    readonly [key: string]: unknown;\n    public readonly ETH?: {\n        readonly [key: string]: unknown;\n        readonly balance: number;\n    };\n\n    public readonly error?: {\n        readonly [key: string]: unknown;\n        readonly message: string;\n    };\n\n    public readonly tokens?: readonly IToken[];\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { IAssetBundle } from \"./Asset\";\nimport { Erc20TokenWallet, IErc20TokensWallet } from \"./Erc20TokenWallet\";\nimport { QueryCache } from \"./QueryCache\";\nimport { QueryError } from \"./QueryError\";\nimport { DeletedAssets } from \"./validation/schemas/DeletedAssets.schema\";\nimport { EthplorerGetAddressInfoResponse, IToken } from \"./validation/schemas/EthplorerGetAddressInfoResponse.schema\";\nimport { IErc20TokensWalletBundle } from \"./validation/schemas/IErc20TokensWalletBundle.schema\";\nimport { Validator } from \"./validation/Validator\";\n\nexport class Erc20TokensWalletBundle implements IAssetBundle {\n    public readonly assets = new Array<Erc20TokenWallet>();\n\n    public constructor(private readonly erc20Wallet: IErc20TokensWallet, bundle?: unknown) {\n        try {\n            this.deletedAssets = [...Validator.fromData(bundle, DeletedAssets).deletedAssets];\n        } catch {\n            this.deletedAssets = [];\n            // Exception intentionally ignored\n        }\n    }\n\n    public deleteAsset(asset: Erc20TokenWallet) {\n        const index = this.assets.indexOf(asset);\n\n        if (index >= 0) {\n            this.deletedAssets.push(this.assets[index].unit);\n            this.assets.splice(index, 1);\n        }\n    }\n\n    public async queryData() {\n        await this.erc20Wallet.queryData();\n\n        if (!this.erc20Wallet.address) {\n            return;\n        }\n\n        try {\n            const url = `https://api.ethplorer.io/getAddressInfo/${this.erc20Wallet.address}?apiKey=dvoio1769GSrYx63`;\n            const tokens = Erc20TokensWalletBundle.getTokens(\n                await QueryCache.fetch(url, EthplorerGetAddressInfoResponse, (r) => r.error?.message),\n            );\n\n            for (const token of tokens[0]) {\n                this.addTokenWallet(token, tokens[1]);\n            }\n        } catch (e) {\n            if (e instanceof QueryError) {\n                this.addTokenWallet(Erc20TokensWalletBundle.noTokenBalance, e.toString());\n            } else {\n                throw e;\n            }\n        }\n    }\n\n    public toJSON(): IErc20TokensWalletBundle {\n        return {\n            primaryAsset: this.erc20Wallet.toJSON(),\n            deletedAssets: this.deletedAssets,\n        };\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    private static getTokens({ tokens }: EthplorerGetAddressInfoResponse): [readonly IToken[], string] {\n        return (tokens && [tokens, \"\"]) || [[Erc20TokensWalletBundle.noTokenBalance], \"No Token Balance Found!\"];\n    }\n\n    private static get noTokenBalance(): IToken {\n        return {\n            balance: Number.NaN,\n            tokenInfo: {\n                decimals: Number.NaN,\n                price: false,\n                symbol: \"NONE\",\n            },\n        };\n    }\n\n    private readonly deletedAssets: string[];\n\n    private addTokenWallet(token: IToken, quantityHint: string) {\n        const info = token.tokenInfo;\n\n        if (!this.deletedAssets.includes(info.symbol) && (token.balance !== 0)) {\n            this.assets.push(new Erc20TokenWallet({\n                editable: this.erc20Wallet,\n                currencySymbol: info.symbol,\n                quantity: token.balance / (10 ** Number.parseFloat(info.decimals.toString())),\n                quantityHint,\n                unitValueUsd: (info.price && info.price.rate) || 0,\n            }));\n        }\n    }\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { Erc20TokensWalletBundle } from \"./Erc20TokensWalletBundle\";\nimport { IParent } from \"./IEditable\";\nimport { RealCryptoWallet } from \"./RealCryptoWallet\";\nimport { erc20Tokens } from \"./validation/schemas/AssetTypeName.schema\";\nimport { IAddressCryptoWallet } from \"./validation/schemas/IAddressCryptoWallet.schema\";\nimport { IAddressCryptoWalletProperties } from \"./validation/schemas/IAddressCryptoWalletProperties.schema\";\n\n/** Represents a wallet for ERC20 tokens. */\nexport class Erc20TokensWallet extends RealCryptoWallet {\n    public static readonly type = erc20Tokens;\n\n    public readonly type = erc20Tokens;\n\n    public constructor(parent: IParent, props: IAddressCryptoWalletProperties) {\n        super(parent, RealCryptoWallet.getProperties(props, \"\"));\n    }\n\n    public bundle(bundle?: unknown): Erc20TokensWalletBundle {\n        return new Erc20TokensWalletBundle(this, bundle);\n    }\n\n    /** @internal */\n    public toJSON(): IAddressCryptoWallet {\n        return {\n            type: this.type,\n            ...this.getProperties(),\n            address: this.address,\n        };\n    }\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nexport class BlockscoutBalanceResponse {\n    readonly [key: string]: unknown;\n    public readonly result!: string | null;\n    public readonly status!: string;\n    public readonly message!: string;\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { IParent } from \"./IEditable\";\nimport { QueryCache } from \"./QueryCache\";\nimport { QueryError } from \"./QueryError\";\nimport { RealCryptoWallet } from \"./RealCryptoWallet\";\nimport { SimpleCryptoWallet } from \"./SimpleCryptoWallet\";\nimport { ethereumClassic } from \"./validation/schemas/AssetTypeName.schema\";\nimport { BlockscoutBalanceResponse } from \"./validation/schemas/BlockscoutBalanceResponse.schema\";\nimport { ISimpleCryptoWalletProperties } from \"./validation/schemas/ISimpleCryptoWalletProperties.schema\";\n\n/** Represents an ETC wallet. */\nexport class EtcWallet extends SimpleCryptoWallet {\n    public static readonly type = ethereumClassic;\n\n    public readonly type = ethereumClassic;\n\n    public constructor(parent: IParent, props: ISimpleCryptoWalletProperties) {\n        super(parent, RealCryptoWallet.getProperties(props, \"ETC\"));\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    protected async queryQuantity() {\n        const response = await QueryCache.fetch(\n            `https://blockscout.com/etc/mainnet/api?module=account&action=balance&address=${this.address}`,\n            BlockscoutBalanceResponse,\n            (r) => (r.status !== \"1\" && r.message) || undefined,\n        );\n\n        const result = Number.parseInt(response.result ?? \"\", 10);\n\n        if (Number.isFinite(result)) {\n            return result / 1E18;\n        }\n\n        throw new QueryError(`Unexpected balance: ${response.result}`);\n    }\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { IParent } from \"./IEditable\";\nimport { QueryCache } from \"./QueryCache\";\nimport { RealCryptoWallet } from \"./RealCryptoWallet\";\nimport { SimpleCryptoWallet } from \"./SimpleCryptoWallet\";\nimport { ethereum } from \"./validation/schemas/AssetTypeName.schema\";\nimport { EthplorerGetAddressInfoResponse } from \"./validation/schemas/EthplorerGetAddressInfoResponse.schema\";\nimport { ISimpleCryptoWalletProperties } from \"./validation/schemas/ISimpleCryptoWalletProperties.schema\";\n\n/** Represents an ETH wallet. */\nexport class EthWallet extends SimpleCryptoWallet {\n    public static readonly type = ethereum;\n\n    public readonly type = ethereum;\n\n    public constructor(parent: IParent, props: ISimpleCryptoWalletProperties) {\n        super(parent, RealCryptoWallet.getProperties(props, \"ETH\"));\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    protected async queryQuantity() {\n        const response = await QueryCache.fetch(\n            `https://api.ethplorer.io/getAddressInfo/${this.address}?apiKey=dvoio1769GSrYx63`,\n            EthplorerGetAddressInfoResponse,\n            (r) => r.error?.message,\n        );\n\n        return response.ETH?.balance ?? Number.NaN;\n    }\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nexport class QuandlResponse {\n    public readonly dataset!: {\n        readonly data: readonly [\n            readonly [\n                string,\n                number | null\n            ]\n        ];\n        readonly [key: string]: unknown;\n    };\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { IWebRequest } from \"./IWebRequest\";\nimport { QueryCache } from \"./QueryCache\";\nimport { QuandlResponse } from \"./validation/schemas/QuandlResponse.schema\";\n\n/** Represents a single quandl.com request. */\nexport class QuandlRequest implements IWebRequest<number> {\n    public constructor(private readonly path: string, private readonly invert: boolean) {\n    }\n\n    public async execute() {\n        if (this.path.length > 0) {\n            const url = `https://www.quandl.com/api/v3/datasets/${this.path}?api_key=ALxMkuJx2XTUqsnsn6qK&rows=1`;\n            const price = (await QueryCache.fetch(url, QuandlResponse)).dataset.data[0][1] ?? Number.NaN;\n\n            return this.invert ? 1 / price : price;\n        }\n\n        return 1;\n    }\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nexport const arrayOfAll = <T>() => <U extends readonly T[]>(\n    ...array: U & (readonly T[] extends ReadonlyArray<U[number]> ? unknown : never)\n): Readonly<typeof array> => array;\n","\n// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\n/* eslint-disable max-classes-per-file */\nimport { IAssetBundle } from \"./Asset\";\nimport { GenericAssetBundle } from \"./GenericAssetBundle\";\nimport { IParent } from \"./IEditable\";\nimport { QuandlRequest } from \"./QuandlRequest\";\nimport { SingleAsset } from \"./SingleAsset\";\nimport { Fineness } from \"./validation/schemas/Fineness.schema\";\nimport { IPreciousMetalAsset, PreciousMetalAssetTypeName } from \"./validation/schemas/IPreciousMetalAsset.schema\";\nimport { IPreciousMetalAssetProperties } from \"./validation/schemas/IPreciousMetalAssetProperties.schema\";\nimport { Quantity0 } from \"./validation/schemas/Quantity0.schema\";\nimport { Weight } from \"./validation/schemas/Weight.schema\";\nimport { WeightUnit } from \"./validation/schemas/WeightUnit.schema\";\n\n/** Defines the base of all classes that represent a precious metal asset. */\nexport abstract class PreciousMetalAsset extends SingleAsset {\n    public abstract get type(): PreciousMetalAssetTypeName;\n\n    public readonly description: string;\n\n    public readonly location: string;\n\n    public readonly weight: Weight;\n\n    public readonly weightUnit: WeightUnit;\n\n    public get unit() {\n        return PreciousMetalAsset.getUnit(this.weight, this.weightUnit);\n    }\n\n    public readonly fineness: Fineness;\n\n    public readonly quantity: Quantity0;\n\n    public readonly displayDecimals = 0;\n\n    public readonly notes: string;\n\n    /** @internal */\n    public toJSON(): IPreciousMetalAsset {\n        return {\n            type: this.type,\n            description: this.description,\n            location: this.location || undefined,\n            weight: this.weight,\n            weightUnit: this.weightUnit,\n            fineness: this.fineness,\n            quantity: this.quantity,\n            notes: this.notes || undefined,\n        };\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    public bundle(bundle?: unknown): IAssetBundle {\n        return new PreciousMetalAsset.Bundle(this);\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    protected constructor(parent: IParent, props: IPreciousMetalAssetProperties, private readonly quandlPath: string) {\n        super(parent);\n        this.description = props.description;\n        this.location = props.location ?? \"\";\n        this.weight = props.weight;\n        this.weightUnit = props.weightUnit;\n        this.fineness = props.fineness;\n        this.quantity = props.quantity;\n        this.notes = props.notes ?? \"\";\n        this.pureGramsPerUnit = this.weight * this.weightUnit * this.fineness;\n    }\n\n    protected async queryUnitValueUsd() {\n        return this.pureGramsPerUnit / WeightUnit[\"t oz\"] * await new QuandlRequest(this.quandlPath, false).execute();\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    private static readonly Bundle = class extends GenericAssetBundle<PreciousMetalAsset> implements IAssetBundle {\n        public toJSON() {\n            return {\n                primaryAsset: this.assets[0].toJSON(),\n            };\n        }\n    };\n\n    private static readonly unitFormatOptions = {\n        maximumFractionDigits: 3, minimumFractionDigits: 0, useGrouping: true,\n    };\n\n    private static getUnit(weight: Weight, unit: WeightUnit) {\n        return `${weight.toLocaleString(undefined, PreciousMetalAsset.unitFormatOptions)} ${WeightUnit[unit]}`;\n    }\n\n    private readonly pureGramsPerUnit: number;\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { IParent } from \"./IEditable\";\nimport { PreciousMetalAsset } from \"./PreciousMetalAsset\";\nimport { gold } from \"./validation/schemas/AssetTypeName.schema\";\nimport { IPreciousMetalAssetProperties } from \"./validation/schemas/IPreciousMetalAssetProperties.schema\";\n\n/** Represents an asset made of gold. */\nexport class GoldAsset extends PreciousMetalAsset {\n    public static readonly type = gold;\n\n    public readonly type = gold;\n\n    public constructor(parent: IParent, props: IPreciousMetalAssetProperties) {\n        super(parent, props, \"lbma/gold.json\");\n    }\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { BlockcypherWallet } from \"./BlockcypherWallet\";\nimport { IParent } from \"./IEditable\";\nimport { RealCryptoWallet } from \"./RealCryptoWallet\";\nimport { litecoin } from \"./validation/schemas/AssetTypeName.schema\";\nimport { ISimpleCryptoWalletProperties } from \"./validation/schemas/ISimpleCryptoWalletProperties.schema\";\n\n/** Represents an LTC wallet. */\nexport class LtcWallet extends BlockcypherWallet {\n    public static readonly type = litecoin;\n\n    public readonly type = litecoin;\n\n    public constructor(parent: IParent, props: ISimpleCryptoWalletProperties) {\n        super(parent, RealCryptoWallet.getProperties(props, \"LTC\"));\n    }\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { CryptoCompareRequest } from \"./CryptoCompareRequest\";\nimport { IWebRequest } from \"./IWebRequest\";\nimport { QuandlRequest } from \"./QuandlRequest\";\nimport { CurrencyName } from \"./validation/schemas/CurrencyName.schema\";\n\nexport class ExchangeRate {\n    public static async get(currency: CurrencyName) {\n        const request = ExchangeRate.currencyMap.get(currency);\n\n        if (!request) {\n            throw new Error(\"Unknown currency!\");\n        }\n\n        return request.execute();\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    private static readonly currencyMap: ReadonlyMap<CurrencyName, IWebRequest<number>> = new Map([\n        // cSpell:ignore xudladd, xudlcdd, xudlbk, xudlsfd, xudldkd, xudlgbd, xudlhdd, xudljyd, xudlnkd, xudlndd\n        // cSpell:ignore xudlsrd, xudlskd, xudlsgd, xudltwd, xudlzrd\n        [\"USD\", new QuandlRequest(\"\", false) as IWebRequest<number>],\n        [\"AUD\", new QuandlRequest(\"boe/xudladd.json\", false)],\n        [\"CAD\", new QuandlRequest(\"boe/xudlcdd.json\", false)],\n        [\"CNY\", new QuandlRequest(\"boe/xudlbk73.json\", false)],\n        [\"CHF\", new QuandlRequest(\"boe/xudlsfd.json\", false)],\n        [\"CZK\", new QuandlRequest(\"boe/xudlbk27.json\", false)],\n        [\"DKK\", new QuandlRequest(\"boe/xudldkd.json\", false)],\n        [\"GBP\", new QuandlRequest(\"boe/xudlgbd.json\", false)],\n        [\"HKD\", new QuandlRequest(\"boe/xudlhdd.json\", false)],\n        [\"HUF\", new QuandlRequest(\"boe/xudlbk35.json\", false)],\n        [\"INR\", new QuandlRequest(\"boe/xudlbk64.json\", false)],\n        [\"JPY\", new QuandlRequest(\"boe/xudljyd.json\", false)],\n        [\"KRW\", new QuandlRequest(\"boe/xudlbk74.json\", false)],\n        [\"LTL\", new QuandlRequest(\"boe/xudlbk38.json\", false)],\n        [\"MYR\", new QuandlRequest(\"boe/xudlbk66.json\", false)],\n        [\"NIS\", new QuandlRequest(\"boe/xudlbk65.json\", false)],\n        [\"NOK\", new QuandlRequest(\"boe/xudlnkd.json\", false)],\n        [\"NZD\", new QuandlRequest(\"boe/xudlndd.json\", false)],\n        [\"PLN\", new QuandlRequest(\"boe/xudlbk49.json\", false)],\n        [\"RUB\", new QuandlRequest(\"boe/xudlbk69.json\", false)],\n        [\"SAR\", new QuandlRequest(\"boe/xudlsrd.json\", false)],\n        [\"SEK\", new QuandlRequest(\"boe/xudlskd.json\", false)],\n        [\"SGD\", new QuandlRequest(\"boe/xudlsgd.json\", false)],\n        [\"THB\", new QuandlRequest(\"boe/xudlbk72.json\", false)],\n        [\"TRY\", new QuandlRequest(\"boe/xudlbk75.json\", false)],\n        [\"TWD\", new QuandlRequest(\"boe/xudltwd.json\", false)],\n        [\"ZAR\", new QuandlRequest(\"boe/xudlzrd.json\", false)],\n        [\"XAG\", new QuandlRequest(\"lbma/silver.json\", true)],\n        [\"XAU\", new QuandlRequest(\"lbma/gold.json\", true)],\n        [\"BTC\", new CryptoCompareRequest(\"BTC\", true)],\n    ]);\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\n/* eslint-disable max-classes-per-file */\nimport { IAssetBundle } from \"./Asset\";\nimport { ExchangeRate } from \"./ExchangeRate\";\nimport { GenericAssetBundle } from \"./GenericAssetBundle\";\nimport { IParent } from \"./IEditable\";\nimport { SingleAsset } from \"./SingleAsset\";\nimport { misc } from \"./validation/schemas/AssetTypeName.schema\";\nimport { CurrencyName } from \"./validation/schemas/CurrencyName.schema\";\nimport { IMiscAsset } from \"./validation/schemas/IMiscAsset.schema\";\nimport { IMiscAssetProperties } from \"./validation/schemas/IMiscAssetProperties.schema\";\nimport { Quantity0 } from \"./validation/schemas/Quantity0.schema\";\n\n/** Represents a miscellaneous asset. */\nexport class MiscAsset extends SingleAsset {\n    public static readonly type = misc;\n\n    public readonly type = misc;\n\n    public readonly description: string;\n\n    public readonly location: string;\n\n    public get unit() {\n        return MiscAsset.getUnit(this.value, this.valueCurrency);\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    public get fineness() {\n        return undefined;\n    }\n\n    public readonly value: number;\n\n    public readonly valueCurrency: CurrencyName;\n\n    public readonly quantity: Quantity0;\n\n    public readonly displayDecimals = 0;\n\n    public readonly notes: string;\n\n    public constructor(parent: IParent, props: IMiscAssetProperties) {\n        super(parent);\n        this.description = props.description;\n        this.location = props.location ?? \"\";\n        this.value = props.value;\n        this.valueCurrency = props.valueCurrency;\n        this.quantity = props.quantity;\n        this.notes = props.notes ?? \"\";\n    }\n\n    /** @internal */\n    public toJSON(): IMiscAsset {\n        return {\n            type: this.type,\n            description: this.description,\n            location: this.location || undefined,\n            value: this.value,\n            valueCurrency: this.valueCurrency,\n            quantity: this.quantity,\n            notes: this.notes || undefined,\n        };\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    public bundle(bundle?: unknown): IAssetBundle {\n        return new MiscAsset.Bundle(this);\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    protected async queryUnitValueUsd() {\n        return this.value / await ExchangeRate.get(this.valueCurrency);\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    private static readonly Bundle = class extends GenericAssetBundle<MiscAsset> implements IAssetBundle {\n        public toJSON() {\n            return {\n                primaryAsset: this.assets[0].toJSON(),\n            };\n        }\n    };\n\n    private static readonly unitFormatOptions = {\n        maximumFractionDigits: 2,\n        minimumFractionDigits: 2,\n        useGrouping: true,\n    };\n\n    private static getUnit(value: number, valueCurrency: CurrencyName) {\n        return `${value.toLocaleString(undefined, MiscAsset.unitFormatOptions)} ${valueCurrency}`;\n    }\n}\n\nexport interface IMiscAssetCtor {\n    readonly type: typeof MiscAsset.type;\n    new (parent: IParent, props: IMiscAssetProperties): MiscAsset;\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nexport const currencyNames = [\n    \"USD\",\n    \"AUD\",\n    \"CAD\",\n    \"CNY\",\n    \"CHF\",\n    \"CZK\",\n    \"DKK\",\n    \"GBP\",\n    \"HKD\",\n    \"HUF\",\n    \"INR\",\n    \"JPY\",\n    \"KRW\",\n    \"LTL\",\n    \"MYR\",\n    \"NIS\",\n    \"NOK\",\n    \"NZD\",\n    \"PLN\",\n    \"RUB\",\n    \"SAR\",\n    \"SEK\",\n    \"SGD\",\n    \"THB\",\n    \"TRY\",\n    \"TWD\",\n    \"ZAR\",\n    \"XAG\",\n    \"XAU\",\n    \"BTC\",\n] as const;\n\nexport type CurrencyName = typeof currencyNames[number];\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { AssetInputInfo } from \"./AssetInputInfo\";\nimport { IParent } from \"./IEditable\";\nimport { MiscAsset } from \"./MiscAsset\";\nimport { SelectInputInfo } from \"./SelectInputInfo\";\nimport { TextInputInfo } from \"./TextInputInfo\";\nimport { currencyNames } from \"./validation/schemas/CurrencyName.schema\";\nimport { IMiscAssetProperties } from \"./validation/schemas/IMiscAssetProperties.schema\";\n\n/**\n * Defines how the properties of a miscellaneous asset need to be input and validated and provides a method to create a\n * representation of the asset.\n */\nexport class MiscAssetInputInfo extends AssetInputInfo {\n    // eslint-disable-next-line class-methods-use-this\n    public get type(): typeof MiscAsset.type {\n        return MiscAsset.type;\n    }\n\n    public readonly description = new TextInputInfo({\n        label: \"Description\",\n        hint: \"The nature of the items, e.g. 'Cash', 'Vacation House'.\",\n        isPresent: true,\n        isRequired: true,\n        schemaName: \"Text\",\n    });\n\n    public readonly location = new TextInputInfo({\n        label: \"Location\",\n        hint: \"The location, e.g. 'Safe', 'Redford'.\",\n        isPresent: true,\n        isRequired: false,\n        schemaName: \"Text\",\n    });\n\n    public readonly address = new TextInputInfo();\n    public readonly weight = new TextInputInfo();\n    public readonly weightUnit = new SelectInputInfo();\n    public readonly fineness = new TextInputInfo();\n\n    public readonly value = new TextInputInfo({\n        label: \"Value\",\n        hint: \"The value of a single item, expressed in Currency. A liability can be expressed with a negative number\",\n        isPresent: true,\n        isRequired: true,\n        schemaName: \"Value\",\n    });\n\n    public readonly valueCurrency = new SelectInputInfo({\n        label: \"Currency\",\n        hint: \"The currency Value is expressed in.\",\n        isPresent: true,\n        isRequired: true,\n        items: currencyNames,\n        enumSchemaNames: [\"CurrencyName\"],\n    });\n\n    public readonly quantity = new TextInputInfo({\n        label: \"Quantity\", hint: \"The number of items.\", isPresent: true, isRequired: true, schemaName: \"Quantity0\",\n    });\n\n    // eslint-disable-next-line class-methods-use-this\n    public createAsset(parent: IParent, props: IMiscAssetProperties) {\n        return new MiscAsset(parent, props);\n    }\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { IParent } from \"./IEditable\";\nimport { PreciousMetalAsset } from \"./PreciousMetalAsset\";\nimport { palladium } from \"./validation/schemas/AssetTypeName.schema\";\nimport { IPreciousMetalAssetProperties } from \"./validation/schemas/IPreciousMetalAssetProperties.schema\";\n\n/** Represents an asset made of palladium. */\nexport class PalladiumAsset extends PreciousMetalAsset {\n    public static readonly type = palladium;\n\n    public readonly type = palladium;\n\n    public constructor(parent: IParent, props: IPreciousMetalAssetProperties) {\n        super(parent, props, \"lppm/pall.json\");\n    }\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { IParent } from \"./IEditable\";\nimport { PreciousMetalAsset } from \"./PreciousMetalAsset\";\nimport { platinum } from \"./validation/schemas/AssetTypeName.schema\";\nimport { IPreciousMetalAssetProperties } from \"./validation/schemas/IPreciousMetalAssetProperties.schema\";\n\n/** Represents an asset made of platinum. */\nexport class PlatinumAsset extends PreciousMetalAsset {\n    public static readonly type = platinum;\n\n    public readonly type = platinum;\n\n    public constructor(parent: IParent, props: IPreciousMetalAssetProperties) {\n        super(parent, props, \"lppm/plat.json\");\n    }\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { AssetInputInfo } from \"./AssetInputInfo\";\nimport { IParent } from \"./IEditable\";\nimport { PreciousMetalAsset } from \"./PreciousMetalAsset\";\nimport { SelectInputInfo } from \"./SelectInputInfo\";\nimport { TextInputInfo } from \"./TextInputInfo\";\nimport { PreciousMetalAssetTypeName } from \"./validation/schemas/IPreciousMetalAsset.schema\";\nimport { IPreciousMetalAssetProperties } from \"./validation/schemas/IPreciousMetalAssetProperties.schema\";\nimport { weightUnitNames } from \"./validation/schemas/WeightUnit.schema\";\n\nexport interface IPreciousMetalAssetCtor {\n    readonly type: PreciousMetalAssetTypeName;\n    new (parent: IParent, props: IPreciousMetalAssetProperties): PreciousMetalAsset;\n}\n\n/**\n * Defines how the properties of a precious metal asset need to be input and validated and provides a method to create a\n * representation of the asset.\n */\nexport class PreciousMetalAssetInputInfo extends AssetInputInfo {\n    public get type() {\n        return this.ctor.type;\n    }\n\n    public readonly description = new TextInputInfo({\n        label: \"Description\",\n        hint: \"Describes the items, e.g. 'Coins', 'Bars'.\",\n        isPresent: true,\n        isRequired: true,\n        schemaName: \"Text\",\n    });\n\n    public readonly location = new TextInputInfo({\n        label: \"Location\",\n        hint: \"The location, e.g. 'Safe', 'Safety Deposit Box'.\",\n        isPresent: true,\n        isRequired: false,\n        schemaName: \"Text\",\n    });\n\n    public readonly address = new TextInputInfo();\n\n    public readonly weight = new TextInputInfo({\n        label: \"Weight\",\n        hint: \"The weight of a single item, expressed in Unit.\",\n        isPresent: true,\n        isRequired: true,\n        schemaName: \"Weight\",\n    });\n\n    public readonly weightUnit = new SelectInputInfo({\n        label: \"Unit\",\n        hint: \"The unit Weight is expressed in.\",\n        isPresent: true,\n        isRequired: true,\n        items: weightUnitNames,\n        enumSchemaNames: [\"WeightUnitName\"],\n    });\n\n    public readonly fineness = new TextInputInfo({\n        label: \"Fineness\",\n        hint: \"The precious metal fineness.\",\n        isPresent: true,\n        isRequired: true,\n        schemaName: \"Fineness\",\n    });\n\n    public readonly value = new TextInputInfo();\n    public readonly valueCurrency = new SelectInputInfo();\n\n    public readonly quantity = new TextInputInfo({\n        label: \"Quantity\", hint: \"The number of items.\", isPresent: true, isRequired: true, schemaName: \"Quantity0\",\n    });\n\n    /** @internal */\n    public constructor(private readonly ctor: IPreciousMetalAssetCtor) {\n        super();\n    }\n\n    public createAsset(parent: IParent, props: IPreciousMetalAssetProperties) {\n        return new this.ctor(parent, props);\n    }\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { CryptoWalletInputInfo, ICryptoWalletInputInfoParameters } from \"./CryptoWalletInputInfo\";\nimport { TextInputInfo } from \"./TextInputInfo\";\nimport { IQuantityCryptoWalletProperties } from \"./validation/schemas/IQuantityCryptoWalletProperties.schema\";\nimport { XmrWallet } from \"./XmrWallet\";\n\ninterface IQuantityCryptoWalletInputInfoParameters extends\n    ICryptoWalletInputInfoParameters<XmrWallet, IQuantityCryptoWalletProperties> {\n    readonly quantityDecimals: 8 | 18;\n}\n\nexport class QuantityCryptoWalletInputInfo extends\n    CryptoWalletInputInfo<XmrWallet, IQuantityCryptoWalletProperties> {\n    public readonly address = new TextInputInfo();\n    public readonly quantity: TextInputInfo;\n\n    /** @internal */\n    public constructor(parameters: IQuantityCryptoWalletInputInfoParameters) {\n        super(parameters);\n        this.quantity = new TextInputInfo({\n            label: \"Quantity\",\n            hint: \"The amount in the wallet.\",\n            isPresent: true,\n            isRequired: false,\n            schemaName: QuantityCryptoWalletInputInfo.getSchema(parameters.quantityDecimals),\n        });\n    }\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { IParent } from \"./IEditable\";\nimport { PreciousMetalAsset } from \"./PreciousMetalAsset\";\nimport { silver } from \"./validation/schemas/AssetTypeName.schema\";\nimport { IPreciousMetalAssetProperties } from \"./validation/schemas/IPreciousMetalAssetProperties.schema\";\n\n/** Represents an asset made of silver. */\nexport class SilverAsset extends PreciousMetalAsset {\n    public static readonly type = silver;\n\n    public readonly type = silver;\n\n    public constructor(parent: IParent, props: IPreciousMetalAssetProperties) {\n        super(parent, props, \"lbma/silver.json\");\n    }\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { AssetPropertyName } from \"./AssetInterfaces\";\nimport { CryptoWalletInputInfo, ICryptoWalletInputInfoParameters } from \"./CryptoWalletInputInfo\";\nimport { CompositeInput } from \"./Input\";\nimport { SimpleCryptoWallet } from \"./SimpleCryptoWallet\";\nimport { TextInputInfo } from \"./TextInputInfo\";\nimport { ISimpleCryptoWalletProperties } from \"./validation/schemas/ISimpleCryptoWalletProperties.schema\";\n\ninterface ISimpleCryptoWalletInputInfoParameters extends\n    ICryptoWalletInputInfoParameters<SimpleCryptoWallet, ISimpleCryptoWalletProperties> {\n    readonly addressHint: string;\n    readonly quantityDecimals: 8 | 18;\n}\n\n/**\n * Defines how the properties of a simple crypto currency wallet need to be input and validated and provides a method to\n * create a representation of the wallet.\n */\nexport class SimpleCryptoWalletInputInfo extends\n    CryptoWalletInputInfo<SimpleCryptoWallet, ISimpleCryptoWalletProperties> {\n    public readonly address: TextInputInfo;\n    public readonly quantity: TextInputInfo;\n\n    /** @internal */\n    public constructor(parameters: ISimpleCryptoWalletInputInfoParameters) {\n        super(parameters);\n        const { addressHint, quantityDecimals } = parameters;\n        this.address = new TextInputInfo({\n            label: \"Address\", hint: addressHint, isPresent: true, isRequired: !quantityDecimals, schemaName: \"Text\",\n        });\n        this.quantity = new TextInputInfo({\n            label: \"Quantity\",\n            hint: \"The amount in the wallet.\",\n            isPresent: true,\n            isRequired: false,\n            schemaName: SimpleCryptoWalletInputInfo.getSchema(quantityDecimals),\n        });\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    protected validateRelations(input: CompositeInput, propertyName: AssetPropertyName) {\n        if (!this.address.isRequired &&\n            ((propertyName === \"address\") || (propertyName === \"quantity\")) &&\n            (SimpleCryptoWalletInputInfo.isUndefined(input.address) ===\n                SimpleCryptoWalletInputInfo.isUndefined(input.quantity))) {\n            return `A value is required for either the ${this.address.label} or the ${this.quantity.label} (not both).`;\n        }\n\n        return super.validateRelations(input, propertyName);\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    private static isUndefined(value: unknown) {\n        return (value ?? \"\") === \"\";\n    }\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { erc20Tokens } from \"./AssetTypeName.schema\";\nimport { IAddressCryptoWalletProperties } from \"./IAddressCryptoWalletProperties.schema\";\n\nexport const addressCryptoWalletTypeNames = [erc20Tokens] as const;\n\nexport type AddressCryptoWalletTypeName = typeof addressCryptoWalletTypeNames[number];\n\nexport interface IAddressCryptoObject {\n    readonly type: AddressCryptoWalletTypeName;\n}\n\nexport interface IAddressCryptoWallet extends IAddressCryptoObject, IAddressCryptoWalletProperties {\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { misc } from \"./AssetTypeName.schema\";\nimport { IMiscAssetProperties } from \"./IMiscAssetProperties.schema\";\n\nexport const miscAssetTypeNames = [misc] as const;\n\nexport type MiscAssetTypeName = typeof miscAssetTypeNames[number];\n\nexport interface IMiscObject {\n    readonly type: MiscAssetTypeName;\n}\n\nexport interface IMiscAsset extends IMiscObject, IMiscAssetProperties {\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { gold, palladium, platinum, silver } from \"./AssetTypeName.schema\";\nimport { IPreciousMetalAssetProperties } from \"./IPreciousMetalAssetProperties.schema\";\n\nexport const preciousMetalAssetTypeNames = [silver, palladium, platinum, gold] as const;\n\nexport type PreciousMetalAssetTypeName = typeof preciousMetalAssetTypeNames[number];\n\nexport interface IPreciousMetalObject {\n    readonly type: PreciousMetalAssetTypeName;\n}\n\nexport interface IPreciousMetalAsset extends IPreciousMetalObject, IPreciousMetalAssetProperties {\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { monero } from \"./AssetTypeName.schema\";\nimport { IQuantityCryptoWalletProperties } from \"./IQuantityCryptoWalletProperties.schema\";\n\nexport const quantityCryptoWalletTypeNames = [monero] as const;\n\nexport type QuantityCryptoWalletTypeName = typeof quantityCryptoWalletTypeNames[number];\n\nexport interface IQuantityCryptoObject {\n    readonly type: QuantityCryptoWalletTypeName;\n}\n\nexport interface IQuantityCryptoWallet extends IQuantityCryptoObject, IQuantityCryptoWalletProperties {\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { bitcoin, bitcoinGold, dash, ethereum, ethereumClassic, litecoin, zcash } from \"./AssetTypeName.schema\";\nimport { ISimpleCryptoWalletProperties } from \"./ISimpleCryptoWalletProperties.schema\";\n\nconst simpleCryptoWalletTypeNames =\n    [bitcoin, litecoin, ethereumClassic, ethereum, bitcoinGold, dash, zcash] as const;\n\ntype SimpleCryptoWalletTypeName = typeof simpleCryptoWalletTypeNames[number];\n\ninterface ISimpleCryptoObject {\n    readonly type: SimpleCryptoWalletTypeName;\n}\n\ntype ISimpleCryptoWallet = ISimpleCryptoObject & ISimpleCryptoWalletProperties;\n\nexport { simpleCryptoWalletTypeNames, SimpleCryptoWalletTypeName, ISimpleCryptoObject, ISimpleCryptoWallet };\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\n/* eslint-disable max-classes-per-file */\nimport { IAssetBundle } from \"./Asset\";\nimport { GenericAssetBundle } from \"./GenericAssetBundle\";\nimport { IParent } from \"./IEditable\";\nimport { RealCryptoWallet } from \"./RealCryptoWallet\";\nimport { monero } from \"./validation/schemas/AssetTypeName.schema\";\nimport { IQuantityCryptoWallet } from \"./validation/schemas/IQuantityCryptoWallet.schema\";\nimport { IQuantityCryptoWalletProperties } from \"./validation/schemas/IQuantityCryptoWalletProperties.schema\";\n\n/** Represents a wallet for Monero. */\nexport class XmrWallet extends RealCryptoWallet {\n    public static readonly type = monero;\n\n    public readonly type = monero;\n\n    public constructor(parent: IParent, props: IQuantityCryptoWalletProperties) {\n        super(parent, RealCryptoWallet.getProperties(props, \"XMR\"));\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    public bundle(bundle?: unknown): IAssetBundle {\n        return new XmrWallet.Bundle(this);\n    }\n\n    /** @internal */\n    public toJSON(): IQuantityCryptoWallet {\n        return {\n            type: this.type,\n            ...this.getProperties(),\n            quantity: this.quantity ?? 0,\n        };\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    private static readonly Bundle = class extends GenericAssetBundle<XmrWallet> implements IAssetBundle {\n        public toJSON() {\n            return {\n                primaryAsset: this.assets[0].toJSON(),\n            };\n        }\n    };\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nexport class ZchainGetAccountResponse {\n    readonly [key: string]: unknown;\n    public readonly balance!: number;\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { IParent } from \"./IEditable\";\nimport { QueryCache } from \"./QueryCache\";\nimport { RealCryptoWallet } from \"./RealCryptoWallet\";\nimport { SimpleCryptoWallet } from \"./SimpleCryptoWallet\";\nimport { zcash } from \"./validation/schemas/AssetTypeName.schema\";\nimport { ISimpleCryptoWalletProperties } from \"./validation/schemas/ISimpleCryptoWalletProperties.schema\";\nimport { ZchainGetAccountResponse } from \"./validation/schemas/ZchainGetAccountResponse.schema\";\n\n/** Represents a ZEC wallet. */\nexport class ZecWallet extends SimpleCryptoWallet {\n    public static readonly type = zcash;\n\n    public readonly type = zcash;\n\n    public constructor(parent: IParent, props: ISimpleCryptoWalletProperties) {\n        super(parent, RealCryptoWallet.getProperties(props, \"ZEC\"));\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    protected async queryQuantity() {\n        const url = `https://api.zcha.in/v2/mainnet/accounts/${this.address}`;\n\n        // cSpell: ignore zcha\n        // Apparently, zcha.in doesn't validate the address at all, which is why we don't expect an error response.\n        return (await QueryCache.fetch(url, ZchainGetAccountResponse)).balance;\n    }\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { AddressCryptoWalletInputInfo } from \"./AddressCryptoWalletInputInfo\";\nimport { BtcWallet } from \"./BtcWallet\";\nimport { BtgWallet } from \"./BtgWallet\";\nimport { DashWallet } from \"./DashWallet\";\nimport { Erc20TokensWallet } from \"./Erc20TokensWallet\";\nimport { EtcWallet } from \"./EtcWallet\";\nimport { EthWallet } from \"./EthWallet\";\nimport { GoldAsset } from \"./GoldAsset\";\nimport { LtcWallet } from \"./LtcWallet\";\nimport { MiscAsset } from \"./MiscAsset\";\nimport { MiscAssetInputInfo } from \"./MiscAssetInputInfo\";\nimport { PalladiumAsset } from \"./PalladiumAsset\";\nimport { PlatinumAsset } from \"./PlatinumAsset\";\nimport { PreciousMetalAssetInputInfo } from \"./PreciousMetalAssetInputInfo\";\nimport { QuantityCryptoWalletInputInfo } from \"./QuantityCryptoWalletInputInfo\";\nimport { SilverAsset } from \"./SilverAsset\";\nimport { SimpleCryptoWalletInputInfo } from \"./SimpleCryptoWalletInputInfo\";\nimport { addressCryptoWalletTypeNames, IAddressCryptoObject } from \"./validation/schemas/IAddressCryptoWallet.schema\";\nimport { IMiscObject, miscAssetTypeNames } from \"./validation/schemas/IMiscAsset.schema\";\nimport { IPreciousMetalObject, preciousMetalAssetTypeNames } from \"./validation/schemas/IPreciousMetalAsset.schema\";\nimport {\n    IQuantityCryptoObject, quantityCryptoWalletTypeNames,\n} from \"./validation/schemas/IQuantityCryptoWallet.schema\";\nimport { ISimpleCryptoObject, simpleCryptoWalletTypeNames } from \"./validation/schemas/ISimpleCryptoWallet.schema\";\nimport { ObjectUnion } from \"./validation/schemas/ObjectUnion.schema\";\nimport { XmrWallet } from \"./XmrWallet\";\nimport { ZecWallet } from \"./ZecWallet\";\n\n// cSpell:ignore xpub, ypub, Mtub, Ltub, drkp, zcha\nconst btcHint =\n    \"The wallets public address, single or xpub (ypub is not supported). \" +\n    \"Will be sent to blockchain.info to query the balance.\";\n\nconst ltcHint =\n    \"The wallets single public address (neither Mtub nor Ltub are supported). \" +\n    \"Will be sent to blockcypher.com to query the balance.\";\n\nconst etcHint =\n    \"The wallets single public address (xpub is not supported). \" +\n    \"Will be sent to blockscout.com to query the balance.\";\n\nconst ethHint =\n    \"The wallets single public address (xpub is not supported). \" +\n    \"Will be sent to ethplorer.io to query the ETH balance.\";\n\nconst erc20Hint =\n    \"The wallets single public address (xpub is not supported). \" +\n    \"Will be sent to ethplorer.io to query ERC20 token balances.\";\n\nconst btgHint =\n    \"The wallets single public address (ypub is not supported). \" +\n    \"Will be sent to bitcoingold.org to query the balance.\";\n\nconst dashHint =\n    \"The wallets single public address (drkp is not supported). \" +\n    \"Will be sent to blockcypher.com to query the balance.\";\n\nconst zecHint =\n    \"The wallets single public address (xpub is not supported). \" +\n    \"Will be sent to zcha.in to query the balance.\";\n\ntype Converters<P, S, A, Q, M, PR, SR, AR, QR, MR> = readonly [\n    (value: P, info: PreciousMetalAssetInputInfo) => PR,\n    (value: S, info: SimpleCryptoWalletInputInfo) => SR,\n    (value: A, info: AddressCryptoWalletInputInfo) => AR,\n    (value: Q, info: QuantityCryptoWalletInputInfo) => QR,\n    (value: M, info: MiscAssetInputInfo) => MR,\n];\n\nexport class ObjectConverter {\n    public static readonly infos = {\n        [SilverAsset.type]: new PreciousMetalAssetInputInfo(SilverAsset),\n        [PalladiumAsset.type]: new PreciousMetalAssetInputInfo(PalladiumAsset),\n        [PlatinumAsset.type]: new PreciousMetalAssetInputInfo(PlatinumAsset),\n        [GoldAsset.type]: new PreciousMetalAssetInputInfo(GoldAsset),\n        [BtcWallet.type]:\n            new SimpleCryptoWalletInputInfo({ ctor: BtcWallet, addressHint: btcHint, quantityDecimals: 8 }),\n        [XmrWallet.type]: new QuantityCryptoWalletInputInfo({ ctor: XmrWallet, quantityDecimals: 8 }),\n        [LtcWallet.type]:\n            new SimpleCryptoWalletInputInfo({ ctor: LtcWallet, addressHint: ltcHint, quantityDecimals: 8 }),\n        [EtcWallet.type]:\n            new SimpleCryptoWalletInputInfo({ ctor: EtcWallet, addressHint: etcHint, quantityDecimals: 18 }),\n        [Erc20TokensWallet.type]: new AddressCryptoWalletInputInfo({ ctor: Erc20TokensWallet, addressHint: erc20Hint }),\n        [EthWallet.type]:\n            new SimpleCryptoWalletInputInfo({ ctor: EthWallet, addressHint: ethHint, quantityDecimals: 18 }),\n        [BtgWallet.type]:\n            new SimpleCryptoWalletInputInfo({ ctor: BtgWallet, addressHint: btgHint, quantityDecimals: 8 }),\n        [DashWallet.type]:\n            new SimpleCryptoWalletInputInfo({ ctor: DashWallet, addressHint: dashHint, quantityDecimals: 8 }),\n        [ZecWallet.type]:\n            new SimpleCryptoWalletInputInfo({ ctor: ZecWallet, addressHint: zecHint, quantityDecimals: 8 }),\n        [MiscAsset.type]: new MiscAssetInputInfo(),\n    } as const;\n\n    public static convert<\n        P extends IPreciousMetalObject,\n        S extends ISimpleCryptoObject,\n        A extends IAddressCryptoObject,\n        Q extends IQuantityCryptoObject,\n        M extends IMiscObject,\n        PR, SR, AR, QR, MR,\n    >(\n        rawObject: P | S | A | Q | M,\n        [\n            convertPreciousMetalObject,\n            convertSimpleCryptoObject,\n            convertAddressCryptoObject,\n            convertQuantityCryptoObject,\n            convertMiscObject,\n        // This is a false positive.\n        // eslint-disable-next-line array-bracket-newline\n        ]: Converters<P, S, A, Q, M, PR, SR, AR, QR, MR>,\n    ) {\n        // TODO: This is rather unwieldy. Once we switch over to schema-based validation completely, some of this should\n        // go away...\n        if (ObjectConverter.is<P>(rawObject, preciousMetalAssetTypeNames)) {\n            const info = ObjectConverter.infos[rawObject.type];\n\n            return [info, convertPreciousMetalObject(rawObject, info)] as const;\n        } else if (ObjectConverter.is<S>(rawObject, simpleCryptoWalletTypeNames)) {\n            const info = ObjectConverter.infos[rawObject.type];\n\n            return [info, convertSimpleCryptoObject(rawObject, info)] as const;\n        } else if (ObjectConverter.is<A>(rawObject, addressCryptoWalletTypeNames)) {\n            const info = ObjectConverter.infos[rawObject.type];\n\n            return [info, convertAddressCryptoObject(rawObject, info)] as const;\n        } else if (ObjectConverter.is<Q>(rawObject, quantityCryptoWalletTypeNames)) {\n            const info = ObjectConverter.infos[rawObject.type];\n\n            return [info, convertQuantityCryptoObject(rawObject, info)] as const;\n        } else if (ObjectConverter.is<M>(rawObject, miscAssetTypeNames)) {\n            const info = ObjectConverter.infos[rawObject.type];\n\n            return [info, convertMiscObject(rawObject, info)] as const;\n        }\n\n        return ObjectConverter.assertUnreachable(rawObject);\n    }\n\n    public static is<T extends ObjectUnion>(\n        rawObject: ObjectUnion,\n        types: ReadonlyArray<T[\"type\"]>,\n    ): rawObject is T {\n        return types.includes(rawObject.type);\n    }\n\n    private static assertUnreachable(value: never): never {\n        throw new Error(value);\n    }\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { IAuxProperties } from \"./IAuxProperties\";\nimport { ObjectConverter } from \"./ObjectConverter\";\nimport { AssetTypeName } from \"./validation/schemas/AssetTypeName.schema\";\nimport { AssetUnion } from \"./validation/schemas/AssetUnion.schema\";\nimport { CurrencyName } from \"./validation/schemas/CurrencyName.schema\";\nimport { IMiscAsset, miscAssetTypeNames } from \"./validation/schemas/IMiscAsset.schema\";\nimport { IPreciousMetalAsset, preciousMetalAssetTypeNames } from \"./validation/schemas/IPreciousMetalAsset.schema\";\nimport { WeightUnit, WeightUnitName } from \"./validation/schemas/WeightUnit.schema\";\n\n/** Represents the data being edited in the asset editor. */\nexport class AssetEditorData implements Partial<IAuxProperties<string>> {\n    public type: AssetTypeName | \"\";\n    public description?: string;\n    public location?: string;\n    public address?: string;\n    public weight?: string;\n    public weightUnit?: WeightUnitName;\n    public fineness?: string;\n    public value?: string;\n    public valueCurrency?: CurrencyName;\n    public quantity?: string;\n    public notes?: string;\n\n    /** @internal */\n    // The high ABC is due to the number of properties that need to be assigned. Breaking this up would not improve\n    // readability.\n    // codebeat:disable[ABC]\n    public constructor(asset?: AssetUnion) {\n        this.type = AssetEditorData.getType(asset);\n        this.description = AssetEditorData.getDescription(asset);\n        this.location = AssetEditorData.getLocation(asset);\n        this.address = AssetEditorData.getAddress(asset);\n        this.weight = AssetEditorData.getWeight(asset);\n        this.weightUnit = AssetEditorData.getWeightUnit(asset);\n        this.fineness = AssetEditorData.getFineness(asset);\n        this.value = AssetEditorData.getValue(asset);\n        this.valueCurrency = AssetEditorData.getValueCurrency(asset);\n        this.quantity = AssetEditorData.getQuantity(asset);\n        this.notes = AssetEditorData.getNotes(asset);\n    }\n    // codebeat:enable[ABC]\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    private static getType(asset?: AssetUnion) {\n        return asset?.type ?? \"\";\n    }\n\n    private static getDescription(asset?: AssetUnion) {\n        return asset?.description;\n    }\n\n    private static getLocation(asset?: AssetUnion) {\n        return asset?.location;\n    }\n\n    private static getAddress(asset?: AssetUnion) {\n        return (asset && (\"address\" in asset) && asset.address) || undefined;\n    }\n\n    private static getWeight(asset?: AssetUnion) {\n        return AssetEditorData.isPreciousMetalAsset(asset) ? asset.weight.toString() : undefined;\n    }\n\n    private static getWeightUnit(asset?: AssetUnion) {\n        return AssetEditorData.isPreciousMetalAsset(asset) ? WeightUnit[asset.weightUnit] as WeightUnitName : undefined;\n    }\n\n    private static getFineness(asset?: AssetUnion) {\n        return AssetEditorData.isPreciousMetalAsset(asset) ? asset.fineness.toString() : undefined;\n    }\n\n    private static getValue(asset?: AssetUnion) {\n        return AssetEditorData.isMiscAsset(asset) ? asset.value.toString() : undefined;\n    }\n\n    private static getValueCurrency(asset?: AssetUnion) {\n        return AssetEditorData.isMiscAsset(asset) ? asset.valueCurrency : undefined;\n    }\n\n    private static getQuantity(asset?: AssetUnion) {\n        return (asset && (\"quantity\" in asset) && asset.quantity.toString()) || undefined;\n    }\n\n    private static getNotes(asset?: AssetUnion) {\n        return asset?.notes;\n    }\n\n    private static isPreciousMetalAsset(asset?: AssetUnion): asset is IPreciousMetalAsset {\n        return AssetEditorData.isType<IPreciousMetalAsset>(preciousMetalAssetTypeNames, asset);\n    }\n\n    private static isMiscAsset(asset?: AssetUnion): asset is IMiscAsset {\n        return AssetEditorData.isType<IMiscAsset>(miscAssetTypeNames, asset);\n    }\n\n    private static isType<T extends AssetUnion>(\n        types: ReadonlyArray<T[\"type\"]>,\n        rawAsset?: AssetUnion,\n    ): rawAsset is T {\n        return (rawAsset && ObjectConverter.is<T>(rawAsset, types)) || false;\n    }\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { AssetInputInfo } from \"./AssetInputInfo\";\nimport { ObjectConverter } from \"./ObjectConverter\";\n\nexport class AssetInput {\n    /** Provides information objects for each of the supported asset types. */\n    public static readonly infos: typeof ObjectConverter.infos & { [key: string]: AssetInputInfo | undefined } = {\n        ...ObjectConverter.infos,\n    };\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\n/* eslint-disable max-classes-per-file */\nimport { Asset } from \"./Asset\";\nimport { AssetEditorData } from \"./AssetEditorData\";\nimport { IParent } from \"./IEditable\";\nimport { ObjectConverter } from \"./ObjectConverter\";\nimport { IAddressCryptoWalletProperties } from \"./validation/schemas/IAddressCryptoWalletProperties.schema\";\nimport { IMiscAssetProperties } from \"./validation/schemas/IMiscAssetProperties.schema\";\nimport { IPreciousMetalAssetProperties } from \"./validation/schemas/IPreciousMetalAssetProperties.schema\";\nimport { IQuantityCryptoWalletProperties } from \"./validation/schemas/IQuantityCryptoWalletProperties.schema\";\nimport { ISimpleCryptoWalletProperties } from \"./validation/schemas/ISimpleCryptoWalletProperties.schema\";\nimport { WeightUnit } from \"./validation/schemas/WeightUnit.schema\";\n\nclass AssetProperties {\n    public get description() {\n        return AssetProperties.validate(\"description\", this.data.description);\n    }\n\n    public get location() {\n        return this.data.location;\n    }\n\n    public get address() {\n        return this.data.address;\n    }\n\n    public get weight() {\n        return Number.parseFloat(AssetProperties.validate(\"weight\", this.data.weight));\n    }\n\n    public get weightUnit() {\n        return WeightUnit[AssetProperties.validate(\"weightUnit\", this.data.weightUnit)];\n    }\n\n    public get fineness() {\n        return Number.parseFloat(AssetProperties.validate(\"fineness\", this.data.fineness));\n    }\n\n    public get value() {\n        return Number.parseFloat(AssetProperties.validate(\"value\", this.data.value));\n    }\n\n    public get valueCurrency() {\n        return AssetProperties.validate(\"valueCurrency\", this.data.valueCurrency);\n    }\n\n    public get quantity() {\n        return this.data.quantity ? Number.parseFloat(this.data.quantity) : undefined;\n    }\n\n    public get notes() {\n        return this.data.notes;\n    }\n\n    public constructor(protected readonly data: AssetEditorData) {\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    protected static validate<T extends string | undefined>(name: string, value: T): Exclude<T, undefined | \"\"> {\n        if (!value) {\n            throw new Error(`Unexpected ${name}.`);\n        }\n\n        return value as Exclude<T, undefined | \"\">;\n    }\n}\n\nclass RequiredQuantityAssetProperties extends AssetProperties {\n    public get quantity() {\n        return Number.parseFloat(AssetProperties.validate(\"quantity\", this.data.quantity));\n    }\n}\n\nclass RequiredAddressAssetProperties extends AssetProperties {\n    public get address() {\n        return AssetProperties.validate(\"address\", this.data.address);\n    }\n}\n\nexport const getPreciousMetalProperties =\n    (data: AssetEditorData): IPreciousMetalAssetProperties => new RequiredQuantityAssetProperties(data);\n\nexport const getSimpleCryptoWalletProperties = (data: AssetEditorData): ISimpleCryptoWalletProperties => {\n    if (data.address) {\n        return new RequiredAddressAssetProperties(data);\n    } else if (data.quantity) {\n        return new RequiredQuantityAssetProperties(data);\n    }\n\n    throw new Error(\"Invalid data!\");\n};\n\nexport const getAddressCryptoWalletProperties =\n    (data: AssetEditorData): IAddressCryptoWalletProperties => new RequiredAddressAssetProperties(data);\n\nexport const getQuantityCryptoWalletProperties =\n    (data: AssetEditorData): IQuantityCryptoWalletProperties => new RequiredQuantityAssetProperties(data);\n\nexport const getMiscAssetProperties =\n    (data: AssetEditorData): IMiscAssetProperties => new RequiredQuantityAssetProperties(data);\n\nexport const createAsset = (parent: IParent, data: AssetEditorData) => {\n    if (data.type === \"\") {\n        throw new Error(\"Invalid asset type!\");\n    }\n\n    return ObjectConverter.convert(\n        { type: data.type },\n        [\n            (value, info) => ((p: IParent) => info.createAsset(p, getPreciousMetalProperties(data)) as Asset),\n            (value, info) => ((p: IParent) => info.createAsset(p, getSimpleCryptoWalletProperties(data))),\n            (value, info) => ((p: IParent) => info.createAsset(p, getAddressCryptoWalletProperties(data))),\n            (value, info) => ((p: IParent) => info.createAsset(p, getQuantityCryptoWalletProperties(data))),\n            (value, info) => ((p: IParent) => info.createAsset(p, getMiscAssetProperties(data))),\n        ],\n    )[1](parent);\n};\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { Asset } from \"../model/Asset\";\nimport { AssetInputInfo } from \"../model/AssetInputInfo\";\nimport { SelectInputInfo } from \"../model/SelectInputInfo\";\nimport { TextInputInfo } from \"../model/TextInputInfo\";\n\n/**\n * Defines how an asset with no properties needs to be \"input\".\n *\n * @description This is a virtual asset that is only useful to define how the [[AssetEditor]] UI looks like when no\n * asset type has been selected yet.\n */\nexport class NoAssetInputInfo extends AssetInputInfo {\n    public readonly type = \"\";\n    public readonly description = new TextInputInfo();\n    public readonly location = new TextInputInfo();\n    public readonly address = new TextInputInfo();\n    public readonly weight = new TextInputInfo();\n    public readonly weightUnit = new SelectInputInfo();\n    public readonly fineness = new TextInputInfo();\n    public readonly value = new TextInputInfo();\n    public readonly valueCurrency = new SelectInputInfo();\n    public readonly quantity = new TextInputInfo();\n    public readonly notes = new TextInputInfo();\n\n    /** @internal */\n    public constructor() {\n        super();\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    public createAsset(): Asset {\n        throw new Error(\"Can't create asset.\");\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.isPresent)?_c('v-flex',{attrs:{\"xs12\":\"\",\"sm12\":\"\",\"md6\":!_vm.large}},[_c('v-select',{attrs:{\"label\":_vm.label,\"hint\":_vm.hint,\"required\":_vm.isRequired,\"items\":_vm.items,\"rules\":[_vm.validate]},model:{value:(_vm.propertyValue),callback:function ($$v) {_vm.propertyValue=$$v},expression:\"propertyValue\"}})],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { Prop, Vue } from \"vue-property-decorator\";\n\n/** Defines common component functionality. */\nexport class ComponentBase<T> extends Vue {\n    @Prop()\n    public value?: T;\n\n    /**\n     * Provides the value.\n     *\n     * @description Provides whatever is set for `value`, but ensures that the value cannot be undefined.\n     */\n    public get checkedValue() {\n        if (this.value === undefined) {\n            throw new Error(\"No value set.\");\n        }\n\n        return this.value;\n    }\n\n    public set checkedValue(value: T) {\n        this.$emit(\"input\", value);\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    /** Gets the control with the supplied ref. */\n    protected getControl(ref: string) {\n        return this.$refs[ref] as Vue;\n    }\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { Prop } from \"vue-property-decorator\";\n\nimport { AssetPropertyName } from \"../model/AssetInterfaces\";\nimport { IAuxProperties } from \"../model/IAuxProperties\";\nimport { InputUtility } from \"../model/Input\";\nimport { InputInfo } from \"../model/InputInfo\";\nimport { PrimitiveInputInfo } from \"../model/PrimitiveInputInfo\";\n\nimport { ComponentBase } from \"./ComponentBase\";\n\n/** Defines the base for all controls that simplify common functionality like validation. */\nexport abstract class ControlBase<T extends PrimitiveInputInfo> extends ComponentBase<IAuxProperties<string> | string> {\n    @Prop()\n    public info?: InputInfo;\n\n    @Prop()\n    public property?: AssetPropertyName;\n\n    public get isPresent() {\n        return this.primitiveInputInfo.isPresent;\n    }\n\n    public get isRequired() {\n        return this.primitiveInputInfo.isRequired;\n    }\n\n    public get label() {\n        return this.primitiveInputInfo.label;\n    }\n\n    public get hint() {\n        return this.primitiveInputInfo.hint;\n    }\n\n    public get propertyValue() {\n        return InputUtility.isComposite(this.checkedValue) ?\n            this.checkedValue[this.checkedProperty] :\n            this.checkedValue;\n    }\n\n    public set propertyValue(value: string) {\n        if (InputUtility.isComposite(this.checkedValue)) {\n            this.checkedValue[this.checkedProperty] = value;\n        } else {\n            this.checkedValue = value;\n        }\n    }\n\n    public validate() {\n        return this.checkedInfo.validate(false, this.checkedValue, this.property);\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    protected abstract get primitiveInputInfo(): T;\n\n    protected get checkedInfo() {\n        if (this.info === undefined) {\n            throw new Error(\"No info set!\");\n        }\n\n        return this.info;\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    private get checkedProperty() {\n        if (this.property === undefined) {\n            throw new Error(\"No property set!\");\n        }\n\n        return this.property;\n    }\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { Component, Prop } from \"vue-property-decorator\";\n\nimport { SelectInputInfo, SelectInputInfoBase } from \"../model/SelectInputInfo\";\n\nimport { ControlBase } from \"./ControlBase\";\n\n@Component\n/** Implements a select control that simplifies common functionality like validation. */\n// eslint-disable-next-line import/no-default-export\nexport default class Select extends ControlBase<SelectInputInfoBase> {\n    @Prop()\n    public large?: boolean;\n\n    public get items() {\n        return this.primitiveInputInfo.items;\n    }\n\n    /**\n     * @description This redundant method is only necessary because a method called from a template apparently needs to\n     * be a member of the class associated with the template.\n     */\n    public validate() {\n        return super.validate();\n    }\n\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    protected get primitiveInputInfo(): SelectInputInfoBase {\n        return this.checkedInfo.get(SelectInputInfo, this.property);\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!./Select.vue.ts?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!./Select.vue.ts?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Select.vue?vue&type=template&id=1c155300&scoped=true&\"\nimport script from \"./Select.vue.ts?vue&type=script&lang=ts&\"\nexport * from \"./Select.vue.ts?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1c155300\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VFlex } from 'vuetify/lib/components/VGrid';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\ninstallComponents(component, {VFlex,VSelect})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.isPresent)?_c('v-flex',{attrs:{\"xs12\":\"\",\"sm12\":\"\"}},[_c('v-textarea',{attrs:{\"label\":_vm.label,\"hint\":_vm.hint,\"required\":_vm.isRequired,\"rules\":[_vm.validate]},model:{value:(_vm.propertyValue),callback:function ($$v) {_vm.propertyValue=$$v},expression:\"propertyValue\"}})],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { Component } from \"vue-property-decorator\";\n\nimport { TextInputInfo } from \"../model/TextInputInfo\";\n\nimport { ControlBase } from \"./ControlBase\";\n\n@Component\n/** Implements a text area control that simplifies common functionality like validation. */\n// eslint-disable-next-line import/no-default-export\nexport default class TextArea extends ControlBase<TextInputInfo> {\n    /**\n     * @description This redundant method is only necessary because a method called from a template apparently needs to\n     * be a member of the class associated with the template.\n     */\n    public validate() {\n        return super.validate();\n    }\n\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    protected get primitiveInputInfo(): TextInputInfo {\n        return this.checkedInfo.get(TextInputInfo, this.property);\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!./TextArea.vue.ts?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!./TextArea.vue.ts?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./TextArea.vue?vue&type=template&id=17323bf9&scoped=true&\"\nimport script from \"./TextArea.vue.ts?vue&type=script&lang=ts&\"\nexport * from \"./TextArea.vue.ts?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"17323bf9\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VFlex } from 'vuetify/lib/components/VGrid';\nimport { VTextarea } from 'vuetify/lib/components/VTextarea';\ninstallComponents(component, {VFlex,VTextarea})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.isPresent)?_c('v-flex',{attrs:{\"xs12\":\"\",\"sm12\":\"\",\"md6\":!_vm.large}},[_c('v-text-field',{attrs:{\"label\":_vm.label,\"hint\":_vm.hint,\"required\":_vm.isRequired,\"type\":_vm.type,\"min\":_vm.min,\"max\":_vm.max,\"step\":_vm.step,\"rules\":[_vm.validate]},model:{value:(_vm.propertyValue),callback:function ($$v) {_vm.propertyValue=$$v},expression:\"propertyValue\"}})],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { Component, Prop } from \"vue-property-decorator\";\n\nimport { TextInputInfo } from \"../model/TextInputInfo\";\n\nimport { ControlBase } from \"./ControlBase\";\n\n@Component\n/** Implements a text field control that simplifies common functionality like validation. */\n// eslint-disable-next-line import/no-default-export\nexport default class TextField extends ControlBase<TextInputInfo> {\n    @Prop()\n    public large?: boolean;\n\n    public get type() {\n        return this.primitiveInputInfo.type;\n    }\n\n    public get min() {\n        return this.primitiveInputInfo.min;\n    }\n\n    public get max() {\n        return this.primitiveInputInfo.max;\n    }\n\n    public get step() {\n        return this.primitiveInputInfo.step;\n    }\n\n    /**\n     * @description This redundant method is only necessary because a method called from a template apparently needs to\n     * be a member of the class associated with the template.\n     */\n    public validate() {\n        return super.validate();\n    }\n\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    protected get primitiveInputInfo(): TextInputInfo {\n        return this.checkedInfo.get(TextInputInfo, this.property);\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!./TextField.vue.ts?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!./TextField.vue.ts?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./TextField.vue?vue&type=template&id=02bdd4b9&scoped=true&\"\nimport script from \"./TextField.vue.ts?vue&type=script&lang=ts&\"\nexport * from \"./TextField.vue.ts?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"02bdd4b9\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VFlex } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VFlex,VTextField})\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { Component, Vue } from \"vue-property-decorator\";\nimport { Asset } from \"../model/Asset\";\nimport { AssetEditorData } from \"../model/AssetEditorData\";\nimport { AssetInput } from \"../model/AssetInput\";\nimport { AssetInputInfo } from \"../model/AssetInputInfo\";\nimport { createAsset } from \"../model/AssetProperties\";\nimport { IParent } from \"../model/IEditable\";\nimport { SelectInputInfo } from \"../model/SelectInputInfo\";\nimport { assetTypeNames } from \"../model/validation/schemas/AssetTypeName.schema\";\nimport { NoAssetInputInfo } from \"./NoAssetInputInfo\";\nimport Select from \"./Select.vue\";\nimport TextArea from \"./TextArea.vue\";\nimport TextField from \"./TextField.vue\";\n\n@Component({ components: { Select, TextArea, TextField } })\n/** Implements the dialog used to edit assets. */\n// eslint-disable-next-line import/no-default-export\nexport default class AssetEditor extends Vue {\n    public isOpen = false;\n\n    public get title() {\n        return this.isExistingAsset ? \"Edit Asset\" : \"New Asset\";\n    }\n\n    /** Provides the asset type input information. */\n    // eslint-disable-next-line class-methods-use-this\n    public get typeInputInfo() {\n        return new SelectInputInfo({\n            label: \"Type\",\n            hint: \"\",\n            isPresent: true,\n            isRequired: true,\n            items: assetTypeNames,\n            enumSchemaNames: [\"AssetTypeName\"],\n        });\n    }\n\n    /** Provides the currently selected asset type. */\n    public get type() {\n        return this.assetInfo.type;\n    }\n\n    public set type(value: string | undefined) {\n        this.assetInfo = (value && AssetInput.infos[value]) || new NoAssetInputInfo();\n        this.data.type = this.assetInfo.type;\n    }\n\n    /** Provides information about the currently selected asset type. */\n    public assetInfo: AssetInputInfo = new NoAssetInputInfo();\n\n    /** Provides the data currently displayed in the asset editor. */\n    public data = new AssetEditorData();\n\n    public onSaveClicked() {\n        if (!this.parent) {\n            throw new Error(\"No parent set!\");\n        }\n\n        if (this.isValid()) {\n            this.close(createAsset(this.parent, this.data));\n        }\n    }\n\n    public onCancelClicked() {\n        this.close();\n    }\n\n    /** @internal */\n    public async showDialog(parent: IParent, asset?: Asset) {\n        this.parent = parent;\n        this.isExistingAsset = Boolean(asset);\n        this.assetInfo = AssetEditor.getAssetInfo(asset) ?? new NoAssetInputInfo();\n        this.data = new AssetEditorData(asset ? asset.editableAsset.toJSON() : undefined);\n        this.isOpen = true;\n\n        return new Promise<Asset | undefined>((resolve) => (this.resolve = resolve));\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    private static getAssetInfo(asset: Asset | undefined) {\n        return asset ? AssetInput.infos[asset.editableAsset.type] : undefined;\n    }\n\n    private parent?: IParent;\n    private isExistingAsset = false;\n    private resolve?: (value: Asset | undefined) => void;\n\n    private isValid() {\n        this.assetInfo.includeRelations = true;\n\n        try {\n            return this.form.validate();\n        } finally {\n            this.assetInfo.includeRelations = false;\n        }\n    }\n\n    private close(asset?: Asset) {\n        // This is necessary so that the Type field does not initially show an error next time we add a new asset.\n        this.form.reset();\n        // The following line ensures that the property is changed even if we happen to edit the same asset\n        // again. Said change is necessary so that the vue.js change detection is triggered after clearing all fields\n        // with the reset call above.\n        this.assetInfo = new NoAssetInputInfo();\n        this.isOpen = false;\n\n        if (!this.resolve) {\n            throw new Error(\"No resolve callback set!\");\n        }\n\n        this.resolve(asset);\n    }\n\n    private get form() {\n        // The runtime type of this.$refs.form is VueComponent. It appears nobody has written typings for this yet.\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return this.$refs.form as any;\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!./AssetEditor.vue.ts?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!./AssetEditor.vue.ts?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./AssetEditor.vue?vue&type=template&id=2cc25028&scoped=true&\"\nimport script from \"./AssetEditor.vue.ts?vue&type=script&lang=ts&\"\nexport * from \"./AssetEditor.vue.ts?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2cc25028\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VLayout } from 'vuetify/lib/components/VGrid';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardText,VCardTitle,VContainer,VDialog,VForm,VLayout,VSpacer})\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { AssetDisplayPropertyName } from \"../model/Asset\";\nimport { GroupBys } from \"../model/Ordering\";\n\nexport type ColumnName = \"expand\" | AssetDisplayPropertyName | \"more\";\n\nexport class ColumnInfo {\n    /**\n     * This is the number of columns that are always visible. If no optional columns are currently shown\n     * (optionalCount = 0), the first 4 columns of whatever is returned by `getAllNames` will be shown.\n     */\n    public static readonly requiredCount = 4;\n\n    /** Provides the maximum number of optional columns that can be displayed. */\n    public static readonly maxOptionalCount = 7;\n\n    /** @internal */\n    public static getTotalCount(optionalCount: number) {\n        return ColumnInfo.requiredCount + optionalCount;\n    }\n\n    public static getAllNames(groupBys: GroupBys): readonly ColumnName[] {\n        return [\n            \"expand\",\n            groupBys[0],\n            \"percent\",\n            \"more\",\n            \"totalValue\",\n            groupBys[1],\n            \"unit\",\n            \"quantity\",\n            \"unitValue\",\n            \"description\",\n            \"fineness\",\n        ] as const;\n    }\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nexport class Format {\n    /** @internal */\n    public static value(num: number | undefined, maximumFractionDigits: number, minimumFractionDigits?: number) {\n        if (num === undefined) {\n            return \"\";\n        } else if (Number.isNaN(num)) {\n            return \"Error\";\n        }\n\n        return Format.format(num, maximumFractionDigits, minimumFractionDigits);\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    private static format(num: number, maximumFractionDigits: number, minimumFractionDigits?: number) {\n        return num.toLocaleString(\n            undefined,\n            { maximumFractionDigits, minimumFractionDigits, useGrouping: true },\n        );\n    }\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { Component } from \"vue-property-decorator\";\n\nimport { Asset } from \"../model/Asset\";\nimport { Model } from \"../model/Model\";\nimport { GroupBys } from \"../model/Ordering\";\nimport { SortBy } from \"../model/validation/schemas/SortBy.schema\";\n\nimport AssetEditor from \"./AssetEditor.vue\";\nimport { ColumnInfo, ColumnName } from \"./ColumnInfo\";\nimport { ComponentBase } from \"./ComponentBase\";\nimport { Format } from \"./Format\";\n\ntype ITableHeader = {\n    readonly value: Exclude<ColumnName, SortBy>;\n    readonly text: string;\n    readonly sortable: false;\n} | {\n    readonly value: SortBy;\n    readonly text: string;\n};\n\ninterface IOptions {\n    readonly sortBy: SortBy[];\n    readonly sortDesc: boolean[];\n}\n\nconst numericColumnNames = [\"fineness\", \"unitValue\", \"quantity\", \"totalValue\", \"percent\"] as const;\ntype NumericColumnName = keyof Pick<Asset, typeof numericColumnNames[number]>;\n\n@Component({ components: { AssetEditor } })\n/** Implements the asset list UI. */\n// eslint-disable-next-line import/no-default-export\nexport default class AssetList extends ComponentBase<Model> {\n    public get headers() {\n        const allColumnNames = ColumnInfo.getAllNames(this.checkedValue.assets.ordering.groupBys);\n        const visibleColumnNames: readonly ColumnName[] = allColumnNames.filter(\n            (name) => allColumnNames.indexOf(name) < ColumnInfo.getTotalCount(this.optionalColumnCount),\n        );\n\n        return AssetList.getHeaders(this.checkedValue.assets.ordering.groupBys).filter(\n            (h) => visibleColumnNames.includes(h.value),\n        );\n    }\n\n    public get options() {\n        return {\n            sortBy: [this.checkedValue.assets.ordering.sort.by],\n            sortDesc: [this.checkedValue.assets.ordering.sort.descending],\n        };\n    }\n\n    public set options(options: IOptions) {\n        this.checkedValue.assets.ordering.sort = {\n            by: (options.sortBy.length && options.sortBy[0]) || this.checkedValue.assets.ordering.sort.by,\n            descending: (options.sortDesc.length && options.sortDesc[0]) || false,\n        };\n    }\n\n    public get grandTotalValue() {\n        return this.checkedValue.assets.grandTotalValue;\n    }\n\n    /** Provides a value indicating how many columns are currently visible. */\n    public get totalColumnCount() {\n        return ColumnInfo.getTotalCount(this.optionalColumnCount);\n    }\n\n    public get grandTotalLabelColumnCount() {\n        // This is the minimal column span for the grand total label.\n        let result = 2;\n\n        if (this.optionalColumnCount >= 1) {\n            // We need to add to the minimum the number of columns that are added *after* the total value column has\n            // appeared.\n            result += (ColumnInfo.getTotalCount(this.optionalColumnCount) - ColumnInfo.getTotalCount(1));\n        }\n\n        return result;\n    }\n\n    public isVisible(columnName: ColumnName) {\n        return ColumnInfo.getAllNames(this.checkedValue.assets.ordering.groupBys).indexOf(columnName) <\n            ColumnInfo.getTotalCount(this.optionalColumnCount);\n    }\n\n    public format(num: number | undefined, maximumFractionDigits: number, minimumFractionDigits?: number) {\n        // This must be an instance function, because it is called from the template. The following avoids\n        // \"Class method does not use 'this'.\" error.\n        this.toString();\n\n        return Format.value(num, maximumFractionDigits, minimumFractionDigits);\n    }\n\n    /**\n     * @description Calculates a string that needs to be prepended to a given number such that its decimal point is\n     * aligned with all other numbers in the same column.\n     */\n    public getPrefix(columnName: NumericColumnName, value: number | undefined) {\n        if ((value === undefined) || Number.isNaN(value)) {\n            return \"\";\n        }\n\n        const maxPrefix = this.maxPrefixes.get(columnName) ?? [\"\", false];\n        const valueFormatted = this.format(Math.trunc(value), 0);\n\n        // The following logic is necessary so that negative values will be displayed in alignment with their\n        // positive brothers and sisters. In a column with at least one negative value, all positive values are\n        // first prefixed with an invisible - sign, before potentially also being prefixed with zeroes and grouping\n        // characters.\n        const prefixWithoutSign = maxPrefix[0].substr(\n            0,\n            maxPrefix[0].length - valueFormatted.length + (((value < 0) && 1) || 0),\n        );\n\n        return ((value < 0) || !maxPrefix[1]) ? prefixWithoutSign : `${prefixWithoutSign}-`;\n    }\n\n    public async onAdd() {\n        const newAsset = await this.assetEditor.showDialog(this.checkedValue);\n\n        if (newAsset) {\n            this.checkedValue.assets.add(newAsset);\n        }\n    }\n\n    public async onEdit(asset: Asset) {\n        const changedAsset = await this.assetEditor.showDialog(this.checkedValue, asset);\n\n        if (changedAsset) {\n            this.checkedValue.assets.replace(asset, changedAsset);\n        }\n    }\n\n    public onDelete(asset: Asset) {\n        this.checkedValue.assets.delete(asset);\n    }\n\n    public mounted() {\n        this.timer = setInterval(() => this.adjustTableColumnCount(), 500);\n    }\n\n    public beforeDestroy() {\n        if (this.timer) {\n            clearInterval(this.timer);\n            this.timer = undefined;\n        }\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    private static getHeaders(groupBys: GroupBys): readonly ITableHeader[] {\n        return [\n            { value: \"expand\", text: \"\", sortable: false },\n            { value: groupBys[0], text: AssetList.capitalize(groupBys[0]) },\n            { value: groupBys[1], text: AssetList.capitalize(groupBys[1]) },\n            { value: \"description\", text: \"Description\" },\n            { value: \"unit\", text: \"Unit\", sortable: false },\n            { value: \"fineness\", text: \"Fineness\", sortable: false },\n            { value: \"unitValue\", text: \"Unit Value\" },\n            { value: \"quantity\", text: \"Quantity\", sortable: false },\n            { value: \"totalValue\", text: \"Total Value\" },\n            { value: \"percent\", text: \"%\", sortable: false },\n            { value: \"more\", text: \"\", sortable: false },\n        ];\n    }\n\n    private static capitalize(str: string) {\n        return `${str[0].toUpperCase()}${str.substr(1)}`;\n    }\n\n    private optionalColumnCount = ColumnInfo.maxOptionalCount;\n    private timer?: NodeJS.Timer;\n\n    private get assetEditor() {\n        return this.getControl(\"editor\") as AssetEditor;\n    }\n\n    private get maxPrefixes(): ReadonlyMap<NumericColumnName, [string, boolean]> {\n        const result = new Map<NumericColumnName, [string, boolean]>(\n            numericColumnNames.map((name) => [name, [\"\", false]]),\n        );\n        result.set(\"totalValue\", [this.formatZeroes(this.checkedValue.assets.grandTotalValue), false]);\n        result.set(\"percent\", [this.formatZeroes(100), false]);\n\n        for (const property of numericColumnNames) {\n            let [longest, hasNegativeValues] = result.get(property) ?? [\"\", false];\n\n            for (const asset of this.checkedValue.assets.grouped) {\n                const value = asset[property];\n                hasNegativeValues = hasNegativeValues || ((value ?? 0) < 0);\n                const current = this.formatZeroes(value);\n                longest = current.length > longest.length ? current : longest;\n            }\n\n            result.set(property, [longest, hasNegativeValues]);\n        }\n\n        return result;\n    }\n\n    private formatZeroes(num: number | undefined) {\n        const numToFormat = (num === undefined) || Number.isNaN(num) ? undefined : Math.abs(num);\n\n        return this.format(numToFormat && Math.trunc(numToFormat), 0).replace(/\\d/ug, \"0\");\n    }\n\n    private adjustTableColumnCount() {\n        this.$nextTick(() => this.onRendered());\n    }\n\n    private onRendered() {\n        const element = this.$el as HTMLElement;\n\n        // If we detect that the table column count needs to be adjusted, we need to have this function be called again\n        // to see whether the count is now correct.\n        if ((this.optionalColumnCount > 0) && (element.offsetLeft < 0)) {\n            --this.optionalColumnCount;\n            this.adjustTableColumnCount();\n        } else if ((this.optionalColumnCount < ColumnInfo.maxOptionalCount) &&\n            (element.offsetLeft * 2 > element.offsetWidth /\n                (ColumnInfo.requiredCount + this.optionalColumnCount) * 3)) {\n            ++this.optionalColumnCount;\n            this.adjustTableColumnCount();\n        }\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!./AssetList.vue.ts?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!./AssetList.vue.ts?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./AssetList.vue?vue&type=template&id=25ad2234&scoped=true&\"\nimport script from \"./AssetList.vue.ts?vue&type=script&lang=ts&\"\nexport * from \"./AssetList.vue.ts?vue&type=script&lang=ts&\"\nimport style0 from \"./AssetList.vue?vue&type=style&index=0&id=25ad2234&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"25ad2234\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VDataTable } from 'vuetify/lib/components/VDataTable';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VLayout } from 'vuetify/lib/components/VGrid';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\nimport { VMenu } from 'vuetify/lib/components/VMenu';\ninstallComponents(component, {VBtn,VDataTable,VIcon,VLayout,VList,VListItem,VListItemTitle,VMenu})\n\n\n/* vuetify-loader */\nimport installDirectives from \"!../../node_modules/vuetify-loader/lib/runtime/installDirectives.js\"\nimport Resize from 'vuetify/lib/directives/resize'\ninstallDirectives(component, {Resize})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-dialog',{attrs:{\"persistent\":\"\",\"width\":\"600px\"},model:{value:(_vm.isOpen),callback:function ($$v) {_vm.isOpen=$$v},expression:\"isOpen\"}},[_c('v-card',[_c('v-card-title',{staticClass:\"headline\"},[_vm._v(\"Untested Browser\")]),_c('v-card-text',[_c('p',[_vm._v(\" \"+_vm._s(_vm.applicationTitle)+\" is regularly tested on \"),_c('strong',[_vm._v(\"Brave\")]),_vm._v(\" and \"),_c('strong',[_vm._v(\"Firefox\")]),_vm._v(\" only. While it should work on your browser, there's the possibility of browser-specific bugs. \")]),_c('p',[_vm._v(\" I would recommend to use Brave or Firefox because most other popular browsers are proprietary software. That is, at least part of the behavior of your browser is probably determined by source code that is not publicly available. Because the makers of proprietary software tend to focus on features suitable to increase the market share of their product, sound software design and user data privacy often take a back seat. They usually get away with that practice because the behavior of their software cannot be independently verified. \")]),_c('p',[_c('strong',[_vm._v(\" TL;DR To maximize your privacy, please consider using \"+_vm._s(_vm.applicationTitle)+\" on Brave or Firefox and refrain from using services that sync your browser data across devices. \")])]),_c('v-checkbox',{attrs:{\"label\":\"Don't show this again\"},model:{value:(_vm.dontShowDialog),callback:function ($$v) {_vm.dontShowDialog=$$v},expression:\"dontShowDialog\"}})],1),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"primary\"},on:{\"click\":function($event){_vm.isOpen = false}}},[_vm._v(\"Close\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { Component, Vue } from \"vue-property-decorator\";\n\nimport { Application } from \"../model/Application\";\n\n@Component\n/** Implements the dialog informing the user about untested browsers. */\n// eslint-disable-next-line import/no-default-export\nexport default class BrowserDialog extends Vue {\n    // eslint-disable-next-line class-methods-use-this\n    public get applicationTitle() {\n        return Application.title;\n    }\n\n    public isOpen = !this.dontShowDialog;\n\n    // eslint-disable-next-line class-methods-use-this\n    public get dontShowDialog() {\n        return !BrowserDialog.isUntestedBrowser ||\n            window.localStorage.getItem(BrowserDialog.dontShowBrowserDialogName) === true.toString();\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    public set dontShowDialog(value: boolean) {\n        window.localStorage.setItem(BrowserDialog.dontShowBrowserDialogName, value.toString());\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    private static readonly dontShowBrowserDialogName = \"dontShowBrowserDialog\";\n\n    private static get isUntestedBrowser() {\n        const userAgent = window.navigator.userAgent.toLowerCase();\n\n        // cSpell: ignore crios\n        return !(/firefox|electron/u).test(userAgent) &&\n            (!(/chrome|crios/u).test(userAgent) || (/edge|opr\\//u).test(userAgent));\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!./BrowserDialog.vue.ts?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!./BrowserDialog.vue.ts?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./BrowserDialog.vue?vue&type=template&id=7c3f0ca1&scoped=true&\"\nimport script from \"./BrowserDialog.vue.ts?vue&type=script&lang=ts&\"\nexport * from \"./BrowserDialog.vue.ts?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7c3f0ca1\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCheckbox } from 'vuetify/lib/components/VCheckbox';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardText,VCardTitle,VCheckbox,VDialog,VSpacer})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-dialog',{attrs:{\"persistent\":\"\",\"max-width\":\"400px\"},model:{value:(_vm.isOpen),callback:function ($$v) {_vm.isOpen=$$v},expression:\"isOpen\"}},[_c('v-card',[_c('v-card-title',{staticClass:\"headline\"},[_vm._v(\"Save As\")]),_c('v-card-text',[_c('v-form',{ref:\"form\",on:{\"submit\":function (e) { return e.preventDefault(); }}},[_c('v-container',{attrs:{\"grid-list-md\":\"\"}},[_c('v-layout',{attrs:{\"wrap\":\"\"}},[_c('TextField',{attrs:{\"large\":\"true\",\"info\":_vm.nameInfo},model:{value:(_vm.name),callback:function ($$v) {_vm.name=$$v},expression:\"name\"}})],1)],1)],1)],1),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{nativeOn:{\"click\":function($event){return _vm.onCancelClicked($event)}}},[_vm._v(\"Cancel\")]),_c('v-btn',{attrs:{\"color\":\"primary\"},nativeOn:{\"click\":function($event){return _vm.onSaveClicked($event)}}},[_vm._v(\"Save\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { Component, Vue } from \"vue-property-decorator\";\n\nimport { TextInputInfo } from \"../model/TextInputInfo\";\n\nimport TextField from \"./TextField.vue\";\n\n@Component({ components: { TextField } })\n/** Implements the dialog used during Save As... */\n// eslint-disable-next-line import/no-default-export\nexport default class SaveAsDialog extends Vue {\n    public name = \"\";\n\n    public isOpen = false;\n\n    /** Provides the name input information. */\n    public readonly nameInfo = new TextInputInfo({\n        label: \"Name\", hint: \"The name of the file.\", isPresent: true, isRequired: true, schemaName: \"Text\",\n    });\n\n    public onSaveClicked() {\n        if (this.isValid()) {\n            this.close(this.name);\n        }\n    }\n\n    public onCancelClicked() {\n        this.close(undefined);\n    }\n\n    public async showDialog(name: string) {\n        this.name = name;\n        this.isOpen = true;\n\n        return new Promise<string | undefined>((resolve) => (this.resolve = resolve));\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    private resolve?: (value: string | undefined) => void;\n\n    private isValid() {\n        // The runtime type of this.$refs.form is VueComponent. It appears nobody has written typings for this yet.\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return (this.$refs.form as any).validate();\n    }\n\n    private close(value: string | undefined) {\n        this.isOpen = false;\n\n        if (!this.resolve) {\n            throw new Error(\"No resolve callback set!\");\n        }\n\n        this.resolve(value);\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!./SaveAsDialog.vue.ts?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!./SaveAsDialog.vue.ts?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./SaveAsDialog.vue?vue&type=template&id=04a597f2&scoped=true&\"\nimport script from \"./SaveAsDialog.vue.ts?vue&type=script&lang=ts&\"\nexport * from \"./SaveAsDialog.vue.ts?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"04a597f2\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VForm } from 'vuetify/lib/components/VForm';\nimport { VLayout } from 'vuetify/lib/components/VGrid';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VBtn,VCard,VCardActions,VCardText,VCardTitle,VContainer,VDialog,VForm,VLayout,VSpacer})\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { Asset } from \"./Asset\";\nimport { AssetGroup } from \"./AssetGroup\";\nimport { ISort } from \"./validation/schemas/ISort.schema\";\nimport { SortBy } from \"./validation/schemas/SortBy.schema\";\n\nexport class AssetCollectionUtility {\n    public static sort(groups: AssetGroup[], sort: ISort) {\n        groups.sort((l, r) => AssetCollectionUtility.compare(l, r, sort));\n\n        for (const group of groups) {\n            group.assets.sort((l, r) => AssetCollectionUtility.compare(l, r, sort));\n        }\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    private static compare(left: Asset, right: Asset, sort: ISort) {\n        return (sort.descending ? -1 : 1) * AssetCollectionUtility.compareImpl(left, right, sort.by);\n    }\n\n    private static compareImpl(left: Asset, right: Asset, sortBy: SortBy) {\n        const leftProperty = left[sortBy];\n        const rightProperty = right[sortBy];\n\n        if (leftProperty === rightProperty) {\n            return 0;\n        } else if (leftProperty === undefined) {\n            return -1;\n        } else if (rightProperty === undefined) {\n            return 1;\n        } else if (leftProperty < rightProperty) {\n            return -1;\n        }\n\n        return 1;\n    }\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { Asset } from \"./Asset\";\nimport { IParent } from \"./IEditable\";\nimport { AssetUnion } from \"./validation/schemas/AssetUnion.schema\";\n\n// This could easily be fixed by overriding abstract methods in two extending classes, but doing so seems strange at\n// best. Most method implementations are trivial, so their number shouldn't matter that much.\n// codebeat:disable[TOO_MANY_FUNCTIONS]\nexport class AssetGroup extends Asset {\n    public isExpanded = false;\n\n    // eslint-disable-next-line class-methods-use-this\n    public get isExpandable() {\n        return true;\n    }\n\n    public get type() {\n        return this.coalesce((a) => a.type) ?? \"\";\n    }\n\n    public get description() {\n        return this.coalesce((a) => a.description) ?? \"\";\n    }\n\n    public get location() {\n        return this.coalesce((a) => a.location) ?? \"\";\n    }\n\n    public get unit() {\n        return this.coalesce((a) => a.unit) ?? \"\";\n    }\n\n    public get fineness() {\n        return this.coalesce((a) => a.fineness);\n    }\n\n    public get quantity() {\n        return (this.type && this.unit) ?\n            this.assets.reduce<number | undefined>((s, a) => AssetGroup.add(s, a.quantity), 0) :\n            undefined;\n    }\n\n    public get quantityHint() {\n        return this.coalesce((a) => a.quantityHint) ?? \"\";\n    }\n\n    public get displayDecimals() {\n        return this.coalesce((a) => a.displayDecimals) ?? 0;\n    }\n\n    public get notes() {\n        return this.assets.reduce((s, a) => `${s}${a.notes}\\n`, \"\");\n    }\n\n    public get unitValue() {\n        return this.coalesce((a) => a.unitValue);\n    }\n\n    public get unitValueHint() {\n        return this.coalesce((a) => a.unitValueHint) ?? \"\";\n    }\n\n    public get totalValue() {\n        return this.assets.reduce<number | undefined>((s, a) => AssetGroup.add(s, a.totalValue), 0);\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    public get hasActions() {\n        return false;\n    }\n\n    public constructor(parent: IParent, public readonly assets: Asset[]) {\n        super(parent);\n    }\n\n    // eslint-disable-next-line class-methods-use-this\n    public toJSON(): AssetUnion {\n        throw new Error(`${AssetGroup.name} cannot be serialized.`);\n    }\n\n    /** @internal */\n    public expand() {\n        this.isExpanded = !this.isExpanded;\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    private static add(addend1: number | undefined, addend2: number | undefined) {\n        return (addend1 === undefined) || (addend2 === undefined) ? undefined : addend1 + addend2;\n    }\n\n    private coalesce<T>(getProperty: (asset: Asset) => T): T | undefined {\n        // eslint-disable-next-line no-undef-init\n        let previous: T | undefined = undefined;\n\n        for (let index = 0; index < this.assets.length; ++index) {\n            if (index === 0) {\n                previous = getProperty(this.assets[index]);\n            } else if (getProperty(this.assets[index]) !== previous) {\n                return undefined;\n            }\n        }\n\n        return previous;\n    }\n}\n// codebeat:enable[TOO_MANY_FUNCTIONS]\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { arrayOfAll } from \"./arrayOfAll\";\nimport { GroupBy } from \"./validation/schemas/GroupBy.schema\";\nimport { ISort } from \"./validation/schemas/ISort.schema\";\n\ninterface IOrderingParameters {\n    readonly onGroupChanged: () => void;\n    readonly onSortChanged: () => void;\n    readonly groupBy?: GroupBy;\n    readonly sort?: ISort;\n}\n\nconst allGroupBys = [\n    arrayOfAll<GroupBy>()(\"type\", \"location\"),\n    arrayOfAll<GroupBy>()(\"location\", \"type\"),\n] as const;\n\nexport type GroupBys = typeof allGroupBys[number];\n\nexport interface IOrdering {\n    readonly groupBys: GroupBys;\n}\n\n/** Provides information how assets are ordered (grouped and sorted) in the main model of the application. */\nexport class Ordering implements IOrdering {\n    /** Provides the labels for the properties by which the asset list can be grouped. */\n    // eslint-disable-next-line class-methods-use-this\n    public get defaultGroupByLabels() {\n        return Ordering.capitalizeGroupBys(allGroupBys[0]);\n    }\n\n    /** Provides the names of the properties by which the asset list is currently grouped. */\n    public get groupBys() {\n        return allGroupBys[this.groupByIndex];\n    }\n\n    /** Provides the labels for the properties by which the asset list is currently grouped. */\n    public get groupByLabels() {\n        return Ordering.capitalizeGroupBys(this.groupBys);\n    }\n\n    /** Provides information on how to sort the asset list. */\n    public get sort() {\n        return this.sortImpl;\n    }\n\n    public set sort(sort: ISort) {\n        this.sortImpl = sort;\n        this.onSortChanged();\n    }\n\n    public constructor(params: IOrderingParameters) {\n        ({ onGroupChanged: this.onGroupChanged, onSortChanged: this.onSortChanged } = params);\n        this.groupByIndex = (params.groupBy && Ordering.getIndex(params.groupBy)) || 0;\n        this.sortImpl = params.sort ?? { by: \"totalValue\", descending: true };\n    }\n\n    public setGroupBy(groupBy: GroupBy) {\n        this.groupByIndex = Ordering.getIndex(groupBy);\n        this.onGroupChanged();\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    private static getIndex(groupBy: GroupBy) {\n        const result = allGroupBys.findIndex((groupBys) => groupBys[0] === groupBy);\n\n        if (result < 0) {\n            throw new Error(`Unknown groupBy: ${groupBy}`);\n        }\n\n        return result;\n    }\n\n    private static capitalizeGroupBys(groupBys: Readonly<GroupBys>) {\n        return [Ordering.capitalizeGroupBy(groupBys[0]), Ordering.capitalizeGroupBy(groupBys[1])] as const;\n    }\n\n    private static capitalizeGroupBy(groupBy: GroupBy) {\n        return `${groupBy[0].toUpperCase()}${groupBy.substr(1)}`;\n    }\n\n    private readonly onGroupChanged: () => void;\n    private readonly onSortChanged: () => void;\n    private groupByIndex: number;\n    private sortImpl: ISort;\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\n/** Provides the means to execute tasks strictly sequentially. */\nexport class TaskQueue {\n    /**\n     * Queues and executes the supplied task.\n     *\n     * @description First waits for possibly still queued tasks to complete in the sequence they were queued and then\n     * calls `executeTask`, waits for the returned promise to settle and then returns the result.\n     * @returns The promise returned by `executeTask`.\n     */\n    public async queue<T>(executeTask: () => Promise<T>) {\n        const current = this.executeAfterPrevious(executeTask);\n        this.previous = current;\n\n        try {\n            return await current;\n        } finally {\n            // The following condition can only be true if no other task has been queued while we've been waiting for\n            // current to settle. IOW, current was the last task in the queue and the queue is now empty.\n            if (this.previous === current) {\n                // Without the following statement, continued use of a TaskQueue object would create a memory leak in\n                // the sense that no involved promise would ever be eligible for GC, because the current promise would\n                // always reference the previous promise, which in turn would reference the promise before the previous\n                // promise and so on. Here, we break that chain when the queue becomes empty.\n                this.previous = Promise.resolve();\n            }\n        }\n    }\n\n    /** Waits for all currently queued tasks to complete. */\n    public async idle(): Promise<void> {\n        try {\n            await this.previous;\n        // eslint-disable-next-line no-empty\n        } catch {\n        }\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    private previous: Promise<unknown> = Promise.resolve();\n\n    private async executeAfterPrevious<T>(createTask: () => Promise<T>) {\n        await this.idle();\n\n        return createTask();\n    }\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { Asset, IAssetBundle } from \"./Asset\";\nimport { AssetCollectionUtility } from \"./AssetCollectionUtility\";\nimport { AssetGroup } from \"./AssetGroup\";\nimport { IParent } from \"./IEditable\";\nimport { Ordering } from \"./Ordering\";\nimport { TaskQueue } from \"./TaskQueue\";\nimport { GroupBy } from \"./validation/schemas/GroupBy.schema\";\nimport { ISort } from \"./validation/schemas/ISort.schema\";\n\ninterface INotifiableParent extends IParent {\n    notifyChanged(): void;\n}\n\ninterface IAssetCollectionParameters {\n    parent: INotifiableParent;\n    bundles: IAssetBundle[];\n    groupBy?: GroupBy;\n    sort?: ISort;\n}\n\nexport class AssetCollection {\n    public readonly ordering: Ordering;\n\n    /** Provides the grouped assets. */\n    public get grouped() {\n        const result = new Array<Asset>();\n\n        for (const group of this.groups) {\n            result.push(group);\n\n            if (group.isExpanded) {\n                result.push(...group.assets);\n            }\n        }\n\n        return result;\n    }\n\n    public get isEmpty() {\n        return this.bundles.length === 0;\n    }\n\n    /** Provides the sum of all asset total values. */\n    public get grandTotalValue() {\n        return this.groups.reduce<number | undefined>(\n            (s, a) => ((s === undefined) || (a.totalValue === undefined) ? undefined : s + a.totalValue),\n            0,\n        );\n    }\n\n    public constructor(params: IAssetCollectionParameters) {\n        this.ordering = new Ordering({\n            onGroupChanged: () => this.onGroupChanged(),\n            onSortChanged: () => AssetCollectionUtility.sort(this.groups, this.ordering.sort),\n            groupBy: params.groupBy,\n            sort: params.sort,\n        });\n\n        this.parent = params.parent;\n        this.bundles = params.bundles;\n        this.update(...this.bundles);\n    }\n\n    /** Bundles and adds `asset` to the list of asset bundles. */\n    public add(asset: Asset) {\n        const bundle = asset.bundle();\n        this.bundles.push(bundle);\n        this.update(bundle);\n        this.parent.notifyChanged();\n    }\n\n    /** Deletes `asset`. */\n    public delete(asset: Asset) {\n        const index = this.bundles.findIndex((b) => b.assets.includes(asset));\n\n        if (index >= 0) {\n            const bundle = this.bundles[index];\n            bundle.deleteAsset(asset);\n\n            if (bundle.assets.length === 0) {\n                this.bundles.splice(index, 1);\n            }\n\n            this.update();\n            this.parent.notifyChanged();\n        }\n    }\n\n    /** Replaces the bundle containing `oldAsset` with a bundle containing `newAsset`. */\n    public replace(oldAsset: Asset, newAsset: Asset) {\n        const index = this.bundles.findIndex((b) => b.assets.includes(oldAsset));\n\n        if (index >= 0) {\n            const bundle = newAsset.bundle();\n            // Apparently, Vue cannot detect the obvious way of replacing (this.bundles[index] = bundle):\n            // https://codingexplained.com/coding/front-end/vue-js/array-change-detection\n            this.bundles.splice(index, 1, bundle);\n            this.update(bundle);\n            this.parent.notifyChanged();\n        }\n    }\n\n    public async idle() {\n        return this.taskQueue.idle();\n    }\n\n    /** @internal */\n    public toJSON() {\n        return this.bundles.map((bundle) => bundle.toJSON());\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    private static async queryBundleData(bundle: IAssetBundle, id: number) {\n        await bundle.queryData();\n\n        return id;\n    }\n\n    private readonly taskQueue = new TaskQueue();\n    private readonly groups = new Array<AssetGroup>();\n    private readonly bundles: IAssetBundle[];\n    private readonly parent: INotifiableParent;\n\n    private onGroupChanged() {\n        this.groups.length = 0;\n        this.update();\n    }\n\n    private update(...newBundles: readonly IAssetBundle[]) {\n        // eslint-disable-next-line no-console\n        this.taskQueue.queue(async () => this.updateImpl(newBundles)).catch((error) => console.error(error));\n    }\n\n    private async updateImpl(newBundles: readonly IAssetBundle[]) {\n        this.updateGroups();\n        const promises = new Map<number, Promise<number>>(\n            newBundles.map<[number, Promise<number>]>((b, i) => [i, AssetCollection.queryBundleData(b, i)]),\n        );\n\n        while (promises.size > 0) {\n            // We're waiting for all promises at once, the loop is only here for updating purposes\n            // eslint-disable-next-line no-await-in-loop\n            await this.waitForResponses(promises);\n        }\n    }\n\n    private async waitForResponses(promises: Map<number, Promise<number>>) {\n        const delayId = Number.MAX_SAFE_INTEGER;\n\n        if (!promises.has(delayId)) {\n            promises.set(delayId, new Promise((resolve) => setTimeout(resolve, 1000, delayId)));\n        }\n\n        const index = await Promise.race(promises.values());\n\n        if (index === delayId) {\n            this.updateGroups();\n        }\n\n        promises.delete(index);\n    }\n\n    private updateGroups() {\n        const newGroups = this.getGroups();\n\n        // Remove no longer existing groups\n        for (let index = 0; index < this.groups.length;) {\n            if (newGroups.has(this.groups[index][this.ordering.groupBys[0]])) {\n                ++index;\n            } else {\n                this.groups.splice(index, 1);\n            }\n        }\n\n        // Update existing groups with new assets\n        for (const newGroup of newGroups) {\n            const existingGroup = this.groups.find((g) => g[this.ordering.groupBys[0]] === newGroup[0]);\n\n            if (existingGroup === undefined) {\n                this.groups.push(new AssetGroup(this.parent, newGroup[1]));\n            } else {\n                existingGroup.assets.splice(0, existingGroup.assets.length, ...newGroup[1]);\n            }\n        }\n\n        AssetCollectionUtility.sort(this.groups, this.ordering.sort);\n    }\n\n    private getGroups() {\n        const result = new Map<string, Asset[]>();\n\n        for (const bundle of this.bundles) {\n            this.addGroups(result, bundle.assets);\n        }\n\n        return result;\n    }\n\n    private addGroups(result: Map<string, Asset[]>, assets: readonly Asset[]) {\n        for (const asset of assets) {\n            const groupName = asset[this.ordering.groupBys[0]];\n            const groupAssets = result.get(groupName);\n\n            if (groupAssets === undefined) {\n                result.set(groupName, [asset]);\n            } else {\n                groupAssets.push(asset);\n            }\n        }\n    }\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { Application } from \"./Application\";\nimport { IAssetBundle } from \"./Asset\";\nimport { AssetCollection } from \"./AssetCollection\";\nimport { ExchangeRate } from \"./ExchangeRate\";\nimport { IParent } from \"./IEditable\";\nimport { QueryUtility } from \"./QueryUtility\";\nimport { CurrencyName, currencyNames } from \"./validation/schemas/CurrencyName.schema\";\nimport { GroupBy } from \"./validation/schemas/GroupBy.schema\";\nimport { ISort } from \"./validation/schemas/ISort.schema\";\nimport { TaggedModel } from \"./validation/schemas/TaggedModel.schema\";\n\nexport interface IModelParameters {\n    readonly name?: string;\n    readonly wasSavedToFile?: boolean;\n    readonly hasUnsavedChanges?: boolean;\n    readonly currency?: CurrencyName;\n    readonly groupBy?: GroupBy;\n    readonly sort?: ISort;\n    readonly createBundles: ReadonlyArray<(parent: IParent) => IAssetBundle>;\n}\n\nexport type IModel = Required<TaggedModel>;\n\n/** Represents the main model of the application. */\nexport class Model implements IParent {\n    /** Provides the name of the asset collection. */\n    public name: string;\n\n    /** Provides the file extension. */\n    public readonly fileExtension = \".assets\";\n\n    public get fileName() {\n        return `${this.name}${this.fileExtension}`;\n    }\n\n    public wasSavedToFile: boolean;\n\n    public get hasUnsavedChanges() {\n        return this.hasUnsavedChangesImpl;\n    }\n\n    public set hasUnsavedChanges(value: boolean) {\n        if (value !== this.hasUnsavedChangesImpl) {\n            this.hasUnsavedChangesImpl = value;\n\n            if (this.onChanged) {\n                this.onChanged();\n            }\n        }\n    }\n\n    public get title() {\n        return `${this.name}${this.hasUnsavedChanges ? \" (Modified)\" : \"\"} - ${Application.title}`;\n    }\n\n    /** Provides the available currencies to value the assets in. */\n    // eslint-disable-next-line class-methods-use-this\n    public get currencies() {\n        return currencyNames;\n    }\n\n    /** Provides the selected currency. */\n    public get currency() {\n        return this.currencyImpl;\n    }\n\n    /** Provides the selected currency. */\n    public set currency(currency: CurrencyName) {\n        if (this.currencyImpl !== currency) {\n            this.currencyImpl = currency;\n            this.onCurrencyChanged();\n        }\n    }\n\n    public readonly assets: AssetCollection;\n\n    // cSpell: ignore usdxxx\n    /**\n     * Provides the USD exchange rate of the currently selected currency (USDXXX, where XXX is the currently selected\n     * currency).\n     */\n    public exchangeRate: number | undefined = 1;\n\n    /** Provides the method that is called when the model has changed. */\n    public onChanged?: (() => void);\n\n    public constructor(params?: IModelParameters) {\n        // eslint-disable-next-line @typescript-eslint/prefer-nullish-coalescing\n        this.name = params?.name || \"Unnamed\";\n        this.wasSavedToFile = params?.wasSavedToFile ?? false;\n        this.hasUnsavedChangesImpl = params?.hasUnsavedChanges ?? false;\n        this.currency = params?.currency ?? this.currencyImpl;\n        this.assets = new AssetCollection({\n            parent: this,\n            bundles: params?.createBundles.map((c) => c(this)) ?? [],\n            groupBy: params?.groupBy,\n            sort: params?.sort,\n        });\n    }\n\n    /** Returns a JSON-formatted string representing the model. */\n    public toJsonString() {\n        return JSON.stringify(this, undefined, 2);\n    }\n\n    /** @internal */\n    public notifyChanged() {\n        this.hasUnsavedChangesImpl = true;\n\n        if (this.onChanged) {\n            this.onChanged();\n        }\n    }\n\n    /** @internal */\n    public toJSON(): IModel {\n        return {\n            version: 1,\n            name: this.name,\n            wasSavedToFile: this.wasSavedToFile,\n            hasUnsavedChanges: this.hasUnsavedChanges,\n            currency: this.currency,\n            groupBy: this.assets.ordering.groupBys[0],\n            sort: this.assets.ordering.sort,\n            bundles: this.assets.toJSON(),\n        };\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    private hasUnsavedChangesImpl: boolean;\n\n    private currencyImpl: CurrencyName = this.currencies[0];\n\n    private onCurrencyChanged() {\n        // eslint-disable-next-line no-console\n        this.onCurrencyChangedImpl().catch((reason) => console.error(reason));\n    }\n\n    private async onCurrencyChangedImpl() {\n        this.exchangeRate = undefined;\n        // Status is intentionally ignored\n        ({ result: this.exchangeRate } = await QueryUtility.execute(async () => ExchangeRate.get(this.currency)));\n    }\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { AssetBundleUnion } from \"./AssetBundleUnion.schema\";\nimport { CurrencyName } from \"./CurrencyName.schema\";\nimport { GroupBy } from \"./GroupBy.schema\";\nimport { ISort } from \"./ISort.schema\";\n\nexport class TaggedModel {\n    public readonly version!: 1;\n    public readonly name?: string;\n    public readonly wasSavedToFile?: boolean;\n    public readonly hasUnsavedChanges?: boolean;\n    public readonly currency?: CurrencyName;\n    public readonly groupBy?: GroupBy;\n    public readonly sort?: ISort;\n    public readonly bundles!: readonly AssetBundleUnion[];\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { IParent } from \"./IEditable\";\nimport { Model } from \"./Model\";\nimport { ObjectConverter } from \"./ObjectConverter\";\nimport { AssetBundleUnion } from \"./validation/schemas/AssetBundleUnion.schema\";\nimport { IAddressCryptoWallet } from \"./validation/schemas/IAddressCryptoWallet.schema\";\nimport { IMiscAsset } from \"./validation/schemas/IMiscAsset.schema\";\nimport { IPreciousMetalAsset } from \"./validation/schemas/IPreciousMetalAsset.schema\";\nimport { IQuantityCryptoWallet } from \"./validation/schemas/IQuantityCryptoWallet.schema\";\nimport { ISimpleCryptoWallet } from \"./validation/schemas/ISimpleCryptoWallet.schema\";\nimport { TaggedModel } from \"./validation/schemas/TaggedModel.schema\";\nimport { Validator } from \"./validation/Validator\";\n\nexport class ModelParser {\n    /**\n     * Returns a [[Model]] object that is equivalent to the passed JSON string or returns a string that describes why\n     * the parse process failed.\n     *\n     * @description This is typically called with a string that was returned by [[toJsonString]].\n     * @param json The string to parse.\n     */\n    public static parse(json: string) {\n        try {\n            return ModelParser.parseBundles(Validator.fromJson(json, TaggedModel));\n        } catch (e) {\n            if (e instanceof Error) {\n                return e.message;\n            }\n\n            throw e;\n        }\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    private static parseBundles(\n        { name, wasSavedToFile, hasUnsavedChanges, currency, groupBy, sort, bundles }: TaggedModel,\n    ) {\n        const params = {\n            name,\n            wasSavedToFile,\n            hasUnsavedChanges,\n            currency,\n            groupBy,\n            sort,\n            createBundles: bundles.map((bundle) => ModelParser.createBundle(bundle)),\n        };\n\n        return new Model(params);\n    }\n\n    private static createBundle(rawBundle: AssetBundleUnion) {\n        return ObjectConverter.convert(rawBundle.primaryAsset, [\n            (asset: IPreciousMetalAsset, info) => (\n                (parent: IParent) => info.createAsset(parent, asset).bundle(rawBundle)\n            ),\n            (asset: ISimpleCryptoWallet, info) => (\n                (parent: IParent) => info.createAsset(parent, asset).bundle(rawBundle)\n            ),\n            (asset: IAddressCryptoWallet, info) => (\n                (parent: IParent) => info.createAsset(parent, asset).bundle(rawBundle)\n            ),\n            (asset: IQuantityCryptoWallet, info) => (\n                (parent: IParent) => info.createAsset(parent, asset).bundle(rawBundle)\n            ),\n            (asset: IMiscAsset, info) => ((parent: IParent) => info.createAsset(parent, asset).bundle(rawBundle)),\n        ])[1];\n    }\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { Model } from \"./model/Model\";\nimport { ModelParser } from \"./model/ModelParser\";\n\nexport class Parser {\n    public static parse(json: string | null) {\n        const model = json ? ModelParser.parse(json) : undefined;\n\n        if (model instanceof Model) {\n            return model;\n        } else if (model) {\n            // We want to see the error in the debugger.\n            // eslint-disable-next-line no-alert\n            alert(model);\n        }\n\n        return undefined;\n    }\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { Model } from \"./model/Model\";\nimport { Parser } from \"./Parser\";\n\nexport class LocalStorage {\n    public static load() {\n        const localStorageKey = window.sessionStorage.getItem(LocalStorage.sessionLocalStorageKey);\n\n        return localStorageKey ? LocalStorage.loadExistingSession(localStorageKey) : LocalStorage.loadNewSession();\n    }\n\n    public static save(model: Model) {\n        // Apparently, there's no reliable way to prevent the user from closing a browser window that contains unsaved\n        // changes. Both Chromium and Firefox currently refuse to show a confirmation dialog that is opened in a\n        // \"beforeunload\" handler and the documentation for the event warns that this could be the case. Therefore, the\n        // only way to prevent the loss of unsaved data is to save our data either continuously or in the \"beforeunload\"\n        // handler. We could either save through window.localStorage or download to the users hard drive (via the same\n        // mechanism as when the user invokes the \"Save...\" menu entry). However, the latter is bound to surprise at\n        // least some users and doesn't seem to work on some browsers anyway (e.g. Firefox). Our only remaining option\n        // is to therefore save to local storage.\n        // Obviously, just saving to local storage under one key (e.g. \"assets\") only works reliably if the user\n        // confines herself to not ever work with the application in more than one browser window. Since we seem to have\n        // no way of preventing or detecting use in multiple browser windows, the storage mechanism must ideally satisfy\n        // the following requirements:\n        // 1. No committed but as of yet unsaved change in any browser window is ever lost if the user closes a tab,\n        //    closes the whole browser or reloads the page at any time.\n        // 2. It must be trivial to regain access to unsaved changes.\n        // It appears that both requirements can be satisfied with the following mechanism:\n        // - Data is always saved to local storage in a \"beforeunload\" handler under a monotonously increasing key,\n        //   which is then also stored through window.sessionStorage.\n        // - When the page loads, session storage is first checked for a saved key. If one exists, data under said key\n        //   is then loaded from local storage. This ensures that the same data is always displayed\n        //   before and after a page reload. If session storage does not contain a key, data under the largest key is\n        //   loaded from local storage.\n        // - Successfully loaded data is always *deleted* from local storage immediately. This ensures that navigating\n        //   to the application in additional browser windows will never load the same data in more than one browser\n        //   window.\n        // The above should ensure that the application can be used much like a normal desktop application. Even if the\n        // application is used in multiple tabs when the browser is closed, data in said tabs will be reloaded next\n        // time the user navigates to the application in the same number of tabs/windows. This is nicely complemented\n        // by the fact that many browsers have an option to automatically reload all previously open tabs when the\n        // browser is started.\n        // Unfortunately, the beforeunload handler doesn't seem to ever be called on Android when the user closes the\n        // browser, neither on Chrome, Firefox nor Edge. Luckily, at least reload works.\n        window.sessionStorage.setItem(LocalStorage.sessionLocalStorageKey, LocalStorage.saveImpl(model));\n    }\n\n    public static openNewWindow(model: Model | undefined) {\n        const url = new URL(window.location.pathname, window.location.origin);\n        url.searchParams.append(\n            LocalStorage.sessionLocalStorageKey,\n            model ? LocalStorage.saveImpl(model) : LocalStorage.emptyModelLocalStorageKey,\n        );\n        url.searchParams.append(LocalStorage.sessionForceLoadFromLocalStorageKey, Boolean(model).toString());\n        window.open(url.href);\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    private static readonly emptyModelLocalStorageKey = \"0\";\n    private static readonly sessionLocalStorageKey = \"localStorageKey\";\n    private static readonly sessionForceLoadFromLocalStorageKey = \"forceLoadFromLocalStorage\";\n\n    private static loadExistingSession(localStorageKey: string) {\n        if ((localStorageKey !== LocalStorage.emptyModelLocalStorageKey) &&\n            ((window.performance.navigation.type === window.performance.navigation.TYPE_RELOAD) ||\n            (window.sessionStorage.getItem(LocalStorage.sessionForceLoadFromLocalStorageKey) === true.toString()))) {\n            // Session storage can only be non-empty because the user either reloaded the page or because Open...\n            // or New was clicked. Both call openNewWindow, which opens a new window with parameters attached to the\n            // URL. Code in main.ts transfers any URL parameters into session storage and then uses\n            // window.location.replace to reload without the parameters.\n            return LocalStorage.loadModel(localStorageKey);\n        }\n\n        return new Model();\n    }\n\n    private static loadNewSession() {\n        const oldKeys = LocalStorage.getOldKeys();\n\n        // Sort the array in descending direction, so that the modified model that was last saved will be loaded.\n        oldKeys.sort((l, r) => (l < r ? 1 : -1));\n\n        for (const oldKey of oldKeys) {\n            const model = LocalStorage.loadModel(oldKey.toString());\n\n            if (model.hasUnsavedChanges) {\n                // The main goal of this whole mechanism is to prevent data loss, which is why, in a new session, we\n                // only ever load models that have unsaved changes. Models that have been written into a file but\n                // were nevertheless later saved to local storage as part of the browser being closed do not need to\n                // be considered here.\n                return model;\n            }\n        }\n\n        return new Model();\n    }\n\n    private static saveImpl(model: Model) {\n        let key: string | undefined = LocalStorage.emptyModelLocalStorageKey;\n\n        if (!model.assets.isEmpty) {\n            const json = model.toJsonString();\n\n            // eslint-disable-next-line no-empty\n            while (!(key = LocalStorage.trySaveToLocalStorage(json))) {\n            }\n        }\n\n        return key;\n    }\n\n    private static loadModel(localStorageKey: string) {\n        const result = Parser.parse(window.localStorage.getItem(localStorageKey));\n\n        if (result) {\n            while (window.sessionStorage.length > 0) {\n                window.sessionStorage.removeItem(window.sessionStorage.key(0) ?? \"\");\n            }\n\n            window.localStorage.removeItem(localStorageKey);\n\n            return result;\n        }\n\n        return new Model();\n    }\n\n    private static trySaveToLocalStorage(json: string) {\n        // We need a key that is unique and monotonously increasing. When a browser is closed with the application\n        // running in multiple tabs, it is likely that two tabs will get the same value from Date.now(). The random\n        // component should reduce the likelihood of a collision.\n        const uniqueNumber = Math.trunc((Date.now() + Math.random()) * (2 ** 10));\n\n        if (!Number.isSafeInteger(uniqueNumber)) {\n            // Make sure all digits are significant. Since Date.now() currently returns a value with 41 binary digits,\n            // adding another 10 binary digits should keep us well below the 53 binary digits commonly supported for\n            // safe integers.\n            throw new Error(\"Can't create unique key.\");\n        }\n\n        const uniqueKey = uniqueNumber.toString();\n\n        if (window.localStorage.getItem(uniqueKey)) {\n            return undefined;\n        }\n\n        window.localStorage.setItem(uniqueKey, json);\n\n        // There's still a low probability that two browser tabs arrive at the same key at the same time and an\n        // overwrite happens. Verifying the written should reduce this further.\n        return window.localStorage.getItem(uniqueKey) === json ? uniqueKey : undefined;\n    }\n\n    private static getOldKeys() {\n        // Put all old keys into the following array.\n        const result = new Array<number>();\n\n        for (let index = 0; index < window.localStorage.length; ++index) {\n            const oldKey = window.localStorage.key(index);\n            // eslint-disable-next-line no-undef-init\n            let oldKeyNumber: number | undefined = undefined;\n\n            if (oldKey && (oldKeyNumber = Number.parseInt(oldKey, 10))) {\n                result.push(oldKeyNumber);\n            }\n        }\n\n        return result;\n    }\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { Component, Vue } from \"vue-property-decorator\";\n\nimport AboutDialog from \"./components/AboutDialog.vue\";\nimport AssetList from \"./components/AssetList.vue\";\nimport BrowserDialog from \"./components/BrowserDialog.vue\";\nimport SaveAsDialog from \"./components/SaveAsDialog.vue\";\nimport { LocalStorage } from \"./LocalStorage\";\nimport { Model } from \"./model/Model\";\nimport { QueryCache } from \"./model/QueryCache\";\nimport { Parser } from \"./Parser\";\n\n@Component({ components: { AboutDialog, AssetList, BrowserDialog, SaveAsDialog } })\n// eslint-disable-next-line import/no-default-export\nexport default class App extends Vue {\n    public isDrawerVisible = false;\n    public model: Model;\n\n    public constructor() {\n        super();\n        this.model = App.initModel(LocalStorage.load());\n        window.addEventListener(\"beforeunload\", () => LocalStorage.save(this.model));\n    }\n\n    public onNewClicked() {\n        this.isDrawerVisible = false;\n        LocalStorage.openNewWindow(undefined);\n    }\n\n    public onOpenClicked() {\n        this.isDrawerVisible = false;\n        this.fileInput.click();\n    }\n\n    public async onFileInputChanged() {\n        try {\n            await this.onFileInputChangedImpl();\n        } finally {\n            this.fileInput.value = \"\";\n        }\n    }\n\n    public async onSaveClicked() {\n        if (this.model.wasSavedToFile) {\n            this.isDrawerVisible = false;\n            this.write();\n        } else {\n            await this.onSaveAsClicked();\n        }\n    }\n\n    public async onSaveAsClicked() {\n        this.isDrawerVisible = false;\n        const newName = await (this.$refs.saveAsDialog as SaveAsDialog).showDialog(this.model.name);\n\n        if (newName !== undefined) {\n            this.model.name = newName;\n            this.model.wasSavedToFile = true;\n            this.write();\n        }\n    }\n\n    public onAboutClicked() {\n        this.isDrawerVisible = false;\n        (this.$refs.aboutDialog as AboutDialog).showDialog();\n    }\n\n    public onRefreshClicked() {\n        QueryCache.clear();\n        this.model = App.initModel(Parser.parse(this.model.toJsonString()) ?? new Model());\n    }\n\n    public get groupBys() {\n        return this.model.assets.ordering.defaultGroupByLabels;\n    }\n\n    public get groupBy() {\n        return this.model.assets.ordering.groupByLabels[0];\n    }\n\n    public set groupBy(groupBy: string) {\n        const rawGroupBy = this.model.assets.ordering.groupBys.find((g) => g === groupBy.toLowerCase());\n\n        if (rawGroupBy !== undefined) {\n            this.model.assets.ordering.setGroupBy(rawGroupBy);\n        }\n    }\n\n    ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n    private static async read(blob: Blob) {\n        return new Promise<string>((resolve, reject) => {\n            const reader = new FileReader();\n            reader.onload = () => resolve(reader.result as string);\n            reader.onerror = () => reject(new Error(\"Unable to read file.\"));\n            reader.readAsText(blob);\n        });\n    }\n\n    private static initModel(model: Model) {\n        model.onChanged = () => (document.title = model.title);\n        document.title = model.title;\n\n        return model;\n    }\n\n    private get fileInput() {\n        return this.$refs.fileInput as HTMLInputElement;\n    }\n\n    private async onFileInputChangedImpl() {\n        const { files } = this.fileInput;\n\n        if (!files || (files.length !== 1)) {\n            return;\n        }\n\n        const [file] = files;\n        const model = Parser.parse(await App.read(file));\n\n        if (!model) {\n            return;\n        }\n\n        const name = file.name.endsWith(model.fileExtension) ?\n            file.name.substring(0, file.name.length - model.fileExtension.length) :\n            file.name;\n\n        if (name.length > 0) {\n            model.name = name;\n        }\n\n        if (this.model.hasUnsavedChanges) {\n            LocalStorage.openNewWindow(model);\n        } else {\n            this.model = App.initModel(model);\n        }\n    }\n\n    private write() {\n        this.model.hasUnsavedChanges = false;\n        const blob = new Blob([this.model.toJsonString()], { type: \"application/json\" });\n\n        if (window.navigator.msSaveBlob) {\n            window.navigator.msSaveBlob(blob, this.model.fileName);\n        } else {\n            const elem = window.document.createElement(\"a\");\n\n            // We should call window.URL.revokeObjectURL as soon as the user has either successfully downloaded the\n            // file or cancelled the download, but there seems to be no reliable way to detect these events. According\n            // to the docs the objects will be garbage collected anyway when the user closes the tab or navigates away.\n            // Given the currently small size of these downloads, not calling revokeObjectURL is probably good enough.\n            elem.href = window.URL.createObjectURL(blob);\n            elem.download = this.model.fileName;\n            document.body.appendChild(elem);\n            elem.click();\n            document.body.removeChild(elem);\n        }\n    }\n}\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!./App.vue.ts?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!./App.vue.ts?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=1ecc1c2a&scoped=true&\"\nimport script from \"./App.vue.ts?vue&type=script&lang=ts&\"\nexport * from \"./App.vue.ts?vue&type=script&lang=ts&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\nimport style1 from \"./App.vue?vue&type=style&index=1&id=1ecc1c2a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1ecc1c2a\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VApp } from 'vuetify/lib/components/VApp';\nimport { VAppBar } from 'vuetify/lib/components/VAppBar';\nimport { VAppBarNavIcon } from 'vuetify/lib/components/VAppBar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VContent } from 'vuetify/lib/components/VContent';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VLayout } from 'vuetify/lib/components/VGrid';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VListItemContent } from 'vuetify/lib/components/VList';\nimport { VListItemIcon } from 'vuetify/lib/components/VList';\nimport { VListItemTitle } from 'vuetify/lib/components/VList';\nimport { VMenu } from 'vuetify/lib/components/VMenu';\nimport { VNavigationDrawer } from 'vuetify/lib/components/VNavigationDrawer';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VToolbarTitle } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VApp,VAppBar,VAppBarNavIcon,VBtn,VContainer,VContent,VIcon,VLayout,VList,VListItem,VListItemContent,VListItemIcon,VListItemTitle,VMenu,VNavigationDrawer,VSpacer,VToolbarTitle})\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport Vue from \"vue\";\nimport Vuetify from \"vuetify/lib\";\n\nVue.use(Vuetify);\n\n// eslint-disable-next-line import/no-default-export\nexport default new Vuetify({\n    icons: {\n        iconfont: \"md\",\n    },\n});\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { install } from \"offline-plugin/runtime\";\nimport Vue from \"vue\";\n\nimport App from \"./App.vue\";\n// eslint-disable-next-line import/no-unassigned-import\nimport \"./assets/material-icons.css\";\n// eslint-disable-next-line import/no-unassigned-import\nimport \"./assets/roboto-fontface.css\";\nimport vuetify from \"./plugins/vuetify\";\n\ninstall();\nVue.config.productionTip = false;\n\nnew Vue({\n    vuetify,\n    render: (h) => h(App),\n}).$mount(\"#app\");\n","module.exports = __webpack_public_path__ + \"img/bitcoingold.32da808e.png\";","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=1&id=1ecc1c2a&scoped=true&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=1&id=1ecc1c2a&scoped=true&lang=css&\"","module.exports = __webpack_public_path__ + \"img/background.03f488ed.png\";","module.exports = __webpack_public_path__ + \"img/blockcypher.2fc542e8.svg\";","module.exports = __webpack_public_path__ + \"img/blockchain.90495685.svg\";","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AssetList.vue?vue&type=style&index=0&id=25ad2234&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/vuetify-loader/lib/loader.js??ref--19-0!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AssetList.vue?vue&type=style&index=0&id=25ad2234&scoped=true&lang=css&\"","module.exports = __webpack_public_path__ + \"img/blockscout.23a708dc.svg\";","module.exports = \"data:image/png;base64,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\"","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { UAParser } from \"ua-parser-js\";\n\nexport class Browser {\n    public static get isCompatible() {\n        const { browserName, browserVersion, engineName } = Browser.getInfo();\n\n        if ((browserName === \"Firefox\") && (browserVersion < 47)) {\n            return false;\n        }\n\n        if (((browserName === \"Mobile Safari\") || (browserName === \"Safari\")) && (browserVersion < 10)) {\n            return false;\n        }\n\n        if ((browserName === \"IE\") || (browserName === \"IEMobile\")) {\n            return false;\n        }\n\n        // The Blink engine is used by Chrome, Chromium and other Chromium-based browsers (like Opera and Yandex), all\n        // of which have a Chrome version in their userAgent string\n        if ((engineName === \"Blink\") && (browserVersion < 58)) {\n            return false;\n        }\n\n        return true;\n    }\n\n\n    private static getInfo() {\n        const uaParser = new UAParser();\n        const { browser: { name: browserName, major }, engine: { name: engineName } } = uaParser.getResult();\n        const parsedMajor = Number.parseInt(major ?? \"\", 10);\n\n        return {\n            browserName,\n            browserVersion: Number.isNaN(parsedMajor) ? 0 : parsedMajor,\n            engineName,\n        };\n    }\n}\n","// Copyright (C) 2018-2019 Andreas Huber Dönni\n//\n// This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public\n// License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later\n// version.\n//\n// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied\n// warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License along with this program. If not, see\n// <http://www.gnu.org/licenses/>.\n\nimport { Browser } from \"./Browser\";\nimport { Application } from \"./model/Application\";\n\nif (Browser.isCompatible) {\n    if (window.location.search) {\n        new URLSearchParams(window.location.search).forEach((value, key) => window.sessionStorage.setItem(key, value));\n        window.location.replace(new URL(window.location.pathname, window.location.origin).href);\n    } else {\n        // eslint-disable-next-line @typescript-eslint/no-require-imports, import/no-unassigned-import, global-require\n        require(\"./app-main\");\n    }\n} else {\n    const appElement = document.getElementById(\"app\");\n\n    if (appElement) {\n        appElement.innerHTML = `\n            <div class=\"base-page incompatible-browser-page\">\n                <p><strong>${Application.title} doesn't work on this browser.</strong></p>\n                <p>\n                    It is recommended to use ${Application.title} from within a recent version of an\n                    <strong>open-source</strong> browser like Iron, Brave or Firefox. ${Application.title} should also\n                    work on recent incarnations of proprietary browsers like Chrome, Opera, Safari, Edge and probably\n                    others.\n                </p>\n                <p>${Application.title} ${Application.version}</p>\n                <p>${window.navigator.userAgent}</p>\n            </div>\n        `;\n    }\n}\n","module.exports = __webpack_public_path__ + \"img/quandl.c53e90c0.svg\";"],"sourceRoot":""}